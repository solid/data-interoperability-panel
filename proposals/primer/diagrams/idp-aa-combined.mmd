sequenceDiagram
    autonumber
    participant App as Application (Client)
    participant OPAA as Alice's OIDC Provider & Authorization Agent
    participant AppID as Application's WebID Document
    participant WebID as Alice's WebID Document
    participant Pod as ACME's Pod
    note over App: ðŸ‘© Alice enters her WebID
    App ->> WebID: Resolve Alice's WebID
    WebID ->> App: Alice's WebID Document
    note over App: Discovers Alice's OIDC Provider and Authorization Agent from WebID Document
    App -->> OPAA: Initiate Solid-OIDC via redirect
    opt No active session with OP
    note over OPAA: ðŸ‘© Alice authenticates with OP
    end
    opt No existing registration
    note over OPAA: Creates Application Registration
    end
    OPAA ->> AppID: Resolve Application's WebID
    AppID ->> OPAA: Application's WebID Document
    note over OPAA: Authorization Agent finds Access Needs in Application's WebID Document
    note over OPAA: ðŸ‘© Alice grants access via consent screen based on Access Needs
    note over OPAA: Authorization Agent records Access Grants and updates Application Registration
    OPAA -->> App: Redirect with authorization code
    App ->> OPAA: Exchanges code for ID Token and Access Token
    note over App: âš ï¸ Application uses WebID from ID Token
    note over App: Application discovers its registration from ID Token
    opt live update
      note over App: Application subscribes for live updates to its registration
    end
    loop initially and on each update
      App ->> OPAA: Fetch Application Registration with Access Receipt
      OPAA ->> App: Application Registration with Access Receipt
    end
    App ->> Pod: Fetch Project 1 (uses access token)
    Pod ->> App: Project 1 Document
