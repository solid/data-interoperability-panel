PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX interop: <http://www.w3.org/ns/solid/interop#>
PREFIX alice: <https://alice.example/>
PREFIX alice-grants: <https://alice.example/grants/>
PREFIX authz-agent: <https://trusted.example/>
PREFIX acmeproject: <https://acmeproject.example/>
PREFIX pm: <https://vocab.example/pm/>
PREFIX pm-shex: <http://data.example/shex/pm#>
PREFIX pm-shapetrees: <http://data.example/shapetrees/pm#>

alice-grants:ab3d0023-3860-4358-ae33-8d3af1097b9d\/
  a interop:AccessGrant ;
  interop:registeredBy alice:\#id ;
  interop:registeredWith authz-agent:\#id ;
  interop:registeredAt "2020-04-04T20:15:47.000Z"^^xsd:dateTime ;
  interop:updatedAt "2020-04-04T21:11:33.000Z"^^xsd:dateTime ;
  interop:hasAccessGrantSubject <#grant-subject> ;
  interop:hasAccessNeedGroup <#need-group-pm> ;
  interop:hasDataGrant <#data-grant-project> .

alice-grants:705563552198b6fb3efc40717872aa2ec35d669c1095cc5d665f499ec5d7e23a\/\#grant-subject
  a interop:AccessGrantSubject ;
  interop:accessByAgent alice:\#id ;
  interop:accessByApplication acmeproject:\#id .

<#data-grant-project>
  a interop:DataGrant ;
  interop:hasAccessGrant <#grant> ;
  interop:satisfiesAccessNeed <#need-project> ;
  interop:registeredShapeTree pm-shapetrees:ProjectTree ;
  interop:hasDataRegistration data:project-tree-reg ;
  interop:accessMode acl:read, acl:write, acl:Control ;
  interop:creatorAccessMode acl:read, acl:write, acl:Control ;
  # Scope grants access to all instances in the project
  # data registration, now and in the future, with no conditions
  interop:scopeOfGrant interop:AllInstances ;
  interop:hasReferencedDataGrant
    <#data-grant-issue> ,
    <#data-grant-task> ,
    <#data-grant-milestone> ,
    <#data-grant-release> .


<#data-grant-issue>
  a interop:ReferencedDataGrant ;
  interop:hasDataGrant <#data-grant-project> ;
  interop:satisfiesAccessNeed <#need-issue> ;
  interop:registeredShapeTree pm-shapetrees:IssueTree ;
  interop:hasDataRegistration data:issue-tree-reg ;
  interop:accessMode acl:read, acl:write, acl:Control ;
  interop:creatorAccessMode acl:read, acl:write, acl:Control ;
  interop:scopeOfGrant interop:AllInstances .

<#data-grant-task>
  a interop:ReferencedDataGrant ;
  interop:hasDataGrant <#data-grant-project> ;
  interop:satisfiesAccessNeed <#need-task> ;
  interop:registeredShapeTree pm-shapetrees:TaskTree ;
  interop:hasDataRegistration data:task-tree-reg ;
  interop:accessMode acl:read, acl:write, acl:Control ;
  interop:creatorAccessMode acl:read, acl:write, acl:Control ;
  interop:scopeOfGrant interop:AllInstances .

<#data-grant-milestone>
  a interop:ReferencedDataGrant ;
  interop:hasDataGrant <#data-grant-project> ;
  interop:satisfiesAccessNeed <#need-milestone> ;
  interop:registeredShapeTree pm-shapetrees:MilestoneTree ;
  interop:hasDataRegistration data:milestone-tree-reg ;
  interop:accessMode acl:read, acl:write, acl:Control ;
  interop:creatorAccessMode acl:read, acl:write, acl:Control ;
  interop:scopeOfGrant interop:AllInstances .

<#data-grant-release>
  a interop:ReferencedDataGrant ;
  interop:hasDataGrant <#data-grant-release> ;
  interop:satisfiesAccessNeed <#need-release> ;
  interop:registeredShapeTree pm-shapetrees:ReleaseTree ;
  interop:hasDataRegistration data:release-tree-reg ;
  interop:accessMode acl:read, acl:write, acl:Control ;
  interop:creatorAccessMode acl:read, acl:write, acl:Control ;
  interop:scopeOfGrant interop:AllInstances .
