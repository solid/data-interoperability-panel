<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Access Invitations for Solid Application Interoperability</title>
  <meta content="w3c/ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="Bikeshed version fb1e763a4, updated Tue Mar 1 13:13:50 2022 -0800" name="generator">
  <link href="https://solid.github.io/data-interoperability-panel/invitation/" rel="canonical">
  <meta content="4a443b8ca43bec1274204f36bb2253d529d6ce29" name="document-revision">
<style>
table.permissions thead tr {
  font-size: 12px;
  text-align: left;
}

table.permissions th {
  text-align: left;
}

table.permissions tbody tr:nth-child(even) {
  background-color: lightgray;
  font-size: 10px;
}

table.permissions tbody td {
  font-size: 10px;
  text-align: left;
}

table.classinfo thead tr th[colspan] {
  text-align: left;
  font-size: 15px;
}

table.classinfo thead tr th {
  text-align: left;
  font-size: 14px;
}

table.classinfo tbody tr:nth-child(odd) {
  background-color: lightgray;
  font-size: 12px;
}

table.classinfo tbody tr td {
  font-size: 12px;
}

table.tree thead tr {
  font-size: 14px;
}

table.tree tbody tr:nth-child(even) {
  background-color: lightgray;
  font-size: 14px;
}

table.tree tbody td {
  font-size: 12px;
}

table.intersecting thead tr {
  font-size: 14px ;
}

table.intersecting tbody tr:nth-child(odd) {
  background-color: lightgray;
  font-size: 14px;
}

table.intersecting tbody td {
  font-size: 13px;
  vertical-align: top ;
  text-align: left;
}

table.intersecting td[colspan] {
  text-align: left;
}

pre {
  font-size: .8em;
}

figcaption {
  text-align: left;
}

a[data-link-type=dfn] {
  color: #000000;
}

a[href*=".ttl"] {
  color: #339966;
  border-bottom: 1px solid #339966;
}

a[href*="snippets"] {
  color: #5a3399;
  border-bottom: 1px solid #5a3399;
}

a[href^="#class"] {
  color: #339966;
  border-bottom: 1px solid #339966;
}

a.vocab {
  color: #339966;
  border-bottom: 1px solid #339966;
}

a[href*=".shex"] {
  color: #cc2900;
  border-bottom: 1px solid #cc2900;
}

a[href*=".tree"] {
  color: #e68a00;
  border-bottom: 1px solid #e68a00;
}

em.rfc2119 {
  text-transform: lowercase;
  font-variant: small-caps;
  font-style: normal;
  font-size: 18px;
  color: #900;
}

</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Access Invitations for Solid Application Interoperability</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2022-03-18">18 March 2022</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://solid.github.io/data-interoperability-panel/invitation/">https://solid.github.io/data-interoperability-panel/invitation/</a>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/solid/data-interoperability-panel/issues/">GitHub</a>
      <dd><a href="#issues-index">Inline In Spec</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard"><span class="p-name fn">Justin Bingham</span>
      <dd class="editor p-author h-card vcard"><span class="p-name fn">Eric Prud'hommeaux</span>
      <dd class="editor p-author h-card vcard"><span class="p-name fn">elf Pavlik</span>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"> MIT License Copyright 2019 - 2021 W3C Solid Community Group </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification details how <a data-link-type="dfn">Social Agents</a> in the Solid ecosystem

  can create <a data-link-type="dfn">Access Consents</a> for <a data-link-type="dfn">Social Agents</a> without knowing
  the decentralized identity of the grantee.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#invitations"><span class="secno">1</span> <span class="content">Access Invitations</span></a>
     <ol class="toc">
      <li><a href="#access-invitations"><span class="secno">1.1</span> <span class="content">Access Invitations</span></a>
      <li><a href="#datamodel-access-invitation-channel"><span class="secno">1.2</span> <span class="content">Access Invitation Channel</span></a>
     </ol>
    <li>
     <a href="#operations"><span class="secno">2</span> <span class="content">Operations</span></a>
     <ol class="toc">
      <li><a href="#initializeinvitation"><span class="secno">2.1</span> <span class="content">Initialize Invitation</span></a>
      <li><a href="#loadinvitation"><span class="secno">2.2</span> <span class="content">Load Invitation</span></a>
      <li><a href="#recordinvitation"><span class="secno">2.3</span> <span class="content">Record Invitation</span></a>
      <li><a href="#deliverinvitation"><span class="secno">2.4</span> <span class="content">Deliver Invitation</span></a>
      <li><a href="#validateinvitation"><span class="secno">2.5</span> <span class="content">Validate Invitation</span></a>
      <li><a href="#controllerinvite"><span class="secno">2.6</span> <span class="content">Controller Shares Access with Invited Agent</span></a>
     </ol>
    <li><a href="#definitions"><span class="secno">3</span> <span class="content">Definitions</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="invitations"><span class="secno">1. </span><span class="content">Access Invitations</span><a class="self-link" href="#invitations"></a></h2>
   <p><a data-link-type="dfn">Access Consents</a> record a <a data-link-type="dfn">Social Agent’s</a> decision to grant access to
some portion of the data in their control to another <a data-link-type="dfn">Social Agent</a> or <a data-link-type="dfn">Application</a>. <a data-link-type="dfn">Access Consents</a> are not shared with a grantee.</p>
   <p><a data-link-type="dfn">Access Grants</a> are generated from <a data-link-type="dfn">Access Consents</a>. They are shared
with a given <a data-link-type="dfn">Agent</a> to communicate the scope of access that has been
granted to them.</p>
   <h3 class="heading settled" data-level="1.1" id="access-invitations"><span class="secno">1.1. </span><span class="content">Access Invitations</span><a class="self-link" href="#access-invitations"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-invitation">Access Invitation</dfn> is a subclass of <a data-link-type="dfn">Access Grant</a> used when
a <a data-link-type="dfn">Social Agent</a> wishes to grant access to another <a data-link-type="dfn">Social Agent</a> whose
decentralized <a data-link-type="dfn" href="#identity" id="ref-for-identity">identity</a> is unknown to them, or may not exist yet, so they
must be first invited through another channel (such as phone or email).</p>
   <p>Like an <a data-link-type="dfn">Access Grant</a>, an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation">Access Invitation</a> links to access
criteria detailed in one or more <a data-link-type="dfn">Access Need Groups</a>, with
associated <a data-link-type="dfn">Data Grants</a> or <a data-link-type="dfn">Trusted Grants</a> indicating the
intended access to be granted.</p>
   <p>However, instead of linking to an <a data-link-type="dfn">Access Grant Subject</a>, an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①">Access Invitation</a> links to one or more <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel">Access Invitation Channels</a>.</p>
   <p>Each channel represents a mechanism through which the invitation can
be delivered and validated. The mechanism is designed so that multiple
channels may be validated before an invitation is confirmed and
converted to an <a data-link-type="dfn">Access Grant</a>.</p>
   <p><a href="interop.ttl#AccessInvitation">Class Definition</a> - <a href="interop.shex#AccessInvitationShape">Shape Definition</a> - <a href="interop.tree#AccessInvitationTree">Shape Tree Definition</a></p>
   <table align="left" class="classinfo data" id="classAccessInvitation">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>registeredBy
      <td><a href="https://solid.github.io/data-interoperability-panel/specification/#classSocialAgent">Solid Application Interoperability § classSocialAgent</a>
      <td><a data-link-type="dfn">Social Agent</a> that registered the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②">Access Invitation</a>
     <tr>
      <td>registeredWith
      <td><a href="https://solid.github.io/data-interoperability-panel/specification/#classApplication">Solid Application Interoperability § classApplication</a>
      <td><a data-link-type="dfn">Application</a> used to create the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③">Access Invitation</a>
     <tr>
      <td>registeredAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation④">Access Invitation</a> was created
     <tr>
      <td>expiresAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑤">Access Invitation</a> expires
     <tr>
      <td>hasAccessInvitationChannel
      <td><a href="#classAccessInvitationChannel">AccessInvitationChannel</a>
      <td>Links to an <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①">Access Invitation Channel</a>
     <tr>
      <td>hasAccessNeedGroup
      <td><a href="https://solid.github.io/data-interoperability-panel/specification/#classAccessNeedGrouup">Solid Application Interoperability § classAccessNeedGrouup</a>
      <td>Links to an <a data-link-type="dfn">Access Need Group</a> associated with
      the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑥">Access Invitation</a>.
     <tr>
      <td>hasDataGrant
      <td><a href="https://solid.github.io/data-interoperability-panel/specification/#classDataGrant">Solid Application Interoperability § classDataGrant</a>
      <td>Links to a <a data-link-type="dfn">Data Grant</a> associated with the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑦">Access Invitation</a>.
   </table>
   <figure>
    <figcaption>An <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑧">Access Invitation</a> at
  https://alice.example/grants/08c5ae76-6c83-46f8-8e1d-eb14219e7f5f</figcaption>
<pre class="include-code highlight"><c- nn>alice-grants</c-><c- p>:</c-><c- f>08c5ae76-6c83-46f8-8e1d-eb14219e7f5f\/</c->
  <c- b>a</c-> <c- nn>interop</c-><c- p>:</c-><c- f>AccessInvitation</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>registeredBy</c-> <c- nn>alice</c-><c- p>:</c-><c- f>\#id</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>registeredWith</c-> <c- nn>authz-agent</c-><c- p>:</c-><c- f>\#id</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>registeredAt</c-> <c- s>"2020-09-13T19:32:52Z"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>updatedAt</c-> <c- s>"2020-09-13T19:32:52Z"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>expiresAt</c-> <c- s>"2020-09-20T19:32:52Z"</c-><c- p>^^</c-><c- nn>xsd</c-><c- p>:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>hasAccessNeedGroup</c-> <c- g>&lt;#need-group-pm></c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>hasDataGrant</c->
    <c- g>&lt;#data-grant-project></c-> <c- p>,</c->
    <c- g>&lt;#data-grant-issue></c-> <c- p>,</c->
    <c- g>&lt;#data-grant-task></c-> <c- p>,</c->
    <c- g>&lt;#data-grant-milestone></c-> <c- p>,</c->
    <c- g>&lt;#data-grant-release></c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>hasAccessInvitationChannel</c-> <c- g>&lt;#phone-channel></c-> <c- p>,</c-> <c- g>&lt;#email-channel></c-> <c- p>.</c->
</pre>
   </figure>
   <h3 class="heading settled" data-level="1.2" id="datamodel-access-invitation-channel"><span class="secno">1.2. </span><span class="content">Access Invitation Channel</span><a class="self-link" href="#datamodel-access-invitation-channel"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-invitation-channel">Access Invitation Channel</dfn> represents a mechanism through
which an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑨">Access Invitation</a> can be delivered and validated.</p>
   <p><a href="interop.ttl#AccessInvitationChannel">Class Definition</a> - <a href="interop.shex#AccessInvitationChannelShape">Shape Definition</a></p>
   <table align="left" class="classinfo data" id="classAccessInvitationChannel">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>rdf:type
      <td>interop:PhoneInvitationChannel,
      interop:EmailInvitationChannel,
      interop:SMSInvitationChannel,
      interop:OfflineInvitationChannel,
      interop:LDNInvitationChannel
      <td>Each channel is represented by a subClassOf
      AccessInvitationChannel
     <tr>
      <td>channelTarget
      <td>xsd:string
      <td>Target used when validating the channel
     <tr>
      <td>channelCode
      <td>xsd:string
      <td>Code used for channel validation
     <tr>
      <td>isValidated
      <td>xsd:boolean
      <td>Indicates whether the channel has been validated
     <tr>
      <td>remainingAttempts
      <td>xsd:integer
      <td>Number of allowed validation attempts remaining
   </table>
   <figure>
    <figcaption><a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel②">Access Invitation Channels</a> in the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⓪">Access Invitation</a> at
  https://alice.example/grants/08c5ae76-6c83-46f8-8e1d-eb14219e7f5f</figcaption>
<pre class="include-code highlight"><c- g>&lt;#phone-channel></c->
  <c- b>a</c-> <c- nn>interop</c-><c- p>:</c-><c- f>PhoneInvitationChannel</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>channelTarget</c-> <c- s>"(555) 555-1212"</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>channelCode</c-> <c- s>"654345"</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>isValidated</c-> <c- l>false</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>remainingAttempts</c-> <c- mi>3</c-> <c- p>.</c->

<c- g>&lt;#email-channel></c->
  <c- b>a</c-> <c- nn>interop</c-><c- p>:</c-><c- f>EmailInvitationChannel</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>channelTarget</c-> <c- s>"bob@example.com"</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>channelCode</c-> <c- s>"434567"</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>isValidated</c-> <c- l>true</c-> <c- p>;</c->
  <c- nn>interop</c-><c- p>:</c-><c- f>remainingAttempts</c-> <c- mi>3</c-> <c- p>.</c->
</pre>
   </figure>
   <h2 class="heading settled" data-level="2" id="operations"><span class="secno">2. </span><span class="content">Operations</span><a class="self-link" href="#operations"></a></h2>
   <p>Load or initialize <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①①">Access Invitations</a></p>
   <ul>
    <li data-md>
     <p><a href="#loadinvitation">§ 2.2 Load Invitation</a> - Load an existing <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①②">Access Invitation</a> from an <a data-link-type="dfn">Access Grant Registry</a></p>
    <li data-md>
     <p><a href="#initializeinvitation">§ 2.1 Initialize Invitation</a> - Initializes a new <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①③">Access Invitation</a> for one or more <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel③">Access Invitation Channels</a> with one or more <a data-link-type="dfn">Access Need Groups</a></p>
   </ul>
   <p>Record <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①④">Access Invitations</a>:</p>
   <ul>
    <li data-md>
     <p><a href="#recordinvitation">§ 2.3 Record Invitation</a> - Store a new or updated <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑤">Access Invitation</a> in an <a data-link-type="dfn">Access Grant Registry</a></p>
   </ul>
   <h3 class="heading settled" data-level="2.1" id="initializeinvitation"><span class="secno">2.1. </span><span class="content">Initialize Invitation</span><a class="self-link" href="#initializeinvitation"></a></h3>
   <table align="left" class="data operation">
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="2">Description
    <tbody>
     <tr>
      <td colspan="2"> Initialize an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑥">Access Invitation</a> by processing
        the input <a data-link-type="dfn">Access Need Groups</a> and
        then initializing <a data-link-type="dfn">Data Grants</a>, 
        or <a data-link-type="dfn">Trusted Grants</a> with no access (yet). 
    <thead>
     <tr>
      <th colspan="2">Inputs
    <tbody>
     <tr>
      <td><code>ICHANNELS</code>
      <td>A set of <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel④">Access Invitation Channels</a>
     <tr>
      <td><code>GROUPS</code>
      <td><a data-link-type="dfn">Access Need Groups</a> to associate with the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑦">Access Invitation</a>
     <tr>
      <td><code>LANG</code>
      <td>The <a data-link-type="dfn">Social Agent’s</a> preferred language
    <thead>
     <tr>
      <th colspan="2">Outputs
    <tbody>
     <tr>
      <td><a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑧">Access Invitation</a>
      <td>Newly initialized based on input <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑤">Access Invitation Channels</a>
   </table>
   <div class="opdetails">
    <ol>
     <li data-md>
      <p>Let <code>INVITE</code> be a newly initialized <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑨">Access Invitation</a></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑥">Access Invitation Channel</a> <code>ICHANNEL</code> in <code>ICHANNELS</code></p>
     <li data-md>
      <p>Let <code>ICHANNEL</code> be linked to <code>INVITE</code> via <code>INVITE hasAccessInvitationChannel</code></p>
     <li data-md>
      <p>For each <a data-link-type="dfn">Access Need Group</a> <code>GROUP</code> in <code>GROUPS</code></p>
     <li data-md>
      <p>Link <code>GROUP</code> to <code>INVITE</code> via <code>INVITE hasAccessNeedGroup</code></p>
     <li data-md>
      <p>For each <a data-link-type="dfn">Access Need Group</a> <code>GROUP</code> linked via <code>INVITE hasAccessNeedGroup</code></p>
     <li data-md>
      <p>For each <a data-link-type="dfn">Access Need</a> <code>NEED</code> in <code>GROUP</code></p>
      <ol>
       <li data-md>
        <p>Call <a href="https://solid.github.io/data-interoperability-panel/specification/#grants-initializedatagrant">Solid Application Interoperability § grants-initializedatagrant</a> with inputs: <code>NEED</code>, <code>GRANT</code></p>
      </ol>
     <li data-md>
      <p>For each <a data-link-type="dfn">Trusted Need</a> <code>TNEED</code> in <code>GROUP</code></p>
      <ol>
       <li data-md>
        <p>Call <a href="https://solid.github.io/data-interoperability-panel/specification/#grants-initializetrustedgrant">Solid Application Interoperability § grants-initializetrustedgrant</a> with inputs: <code>TNEED</code>, <code>GRANT</code></p>
      </ol>
     <li data-md>
      <p>Return <code>INVITE</code></p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="loadinvitation"><span class="secno">2.2. </span><span class="content">Load Invitation</span><a class="self-link" href="#loadinvitation"></a></h3>
   <table align="left" class="data operation">
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="2">Description
    <tbody>
     <tr>
      <td colspan="2"> This operation will load an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⓪">Access Invitation</a> from a
      given <a data-link-type="dfn">Access Grant Registry</a> 
    <thead>
     <tr>
      <th colspan="2">Inputs
    <tbody>
     <tr>
      <td><code>TARGET</code>
      <td>An <code>interop:ChannelTarget</code> to match
     <tr>
      <td><code>CODE</code>
      <td>An optional <code>interop:channelCode</code> to match
     <tr>
      <td><code>REGISTRY</code>
      <td>An <a data-link-type="dfn">Access Grant Registry</a> to search
    <thead>
     <tr>
      <th colspan="2">Outputs
    <tbody>
     <tr>
      <td><a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②①">Access Invitations</a>
      <td>Matching <code>TARGET</code> and (if provided) <code>CODE</code>
   </table>
   <div class="opdetails">
    <ol>
     <li data-md>
      <p>Let <code>INVITATIONS</code> be an empty set of <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②②">Access Invitations</a></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②③">Access Invitation</a> <code>INVITATION</code> linked via <code>REGISTRY hasRegistration</code></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑦">Access Invitation Channel</a> <code>ICHANNEL</code> linked via <code>INVITATION hasAccessInvitationChannel</code></p>
      <ol>
       <li data-md>
        <p>Next if <code>ICHANNEL channelTarget</code> != <code>TARGET</code></p>
       <li data-md>
        <p>Next if <code>CODE</code> is not empty and <code>ICHANNEL channelCode</code> != <code>CODE</code></p>
       <li data-md>
        <p>Add <code>INVITATION</code> to <code>INVITATIONS</code></p>
      </ol>
     <li data-md>
      <p>Return <code>INVITATIONS</code></p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.3" id="recordinvitation"><span class="secno">2.3. </span><span class="content">Record Invitation</span><a class="self-link" href="#recordinvitation"></a></h3>
   <table align="left" class="data operation">
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="2">Description
    <tbody>
     <tr>
      <td colspan="2"> This operation stores a new or updated <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②④">Access Invitation</a> in
      an <a data-link-type="dfn">Access Grant Registry</a>. 
    <thead>
     <tr>
      <th colspan="2">Inputs
    <tbody>
     <tr>
      <td><code>INVITATION</code>
      <td>An <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑤">Access Invitation</a>
     <tr>
      <td><code>REGISTRY</code>
      <td>An <a data-link-type="dfn">Access Grant Registry</a>
    <thead>
     <tr>
      <th colspan="2">Outputs
    <tbody>
     <tr>
      <td><a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑥">Access Invitation</a>
      <td>Stored in <code>REGISTRY</code>
   </table>
   <div class="opdetails">
    <ol>
     <li data-md>
      <p>Add or Update <code>INVITATION</code> resource in the <code>REGISTRY</code> container, conforming to
the assigned <a href="interop.tree#AccessInvitationTree">interopt:AccessInvitationTree</a></p>
     <li data-md>
      <p>Link <code>INVITATION</code> to the <code>REGISTRY</code> via <code>ACCESS hasRegistration</code> if
it has not already been added</p>
     <li data-md>
      <p>Call <a href="#deliverinvitation">§ 2.4 Deliver Invitation</a> with inputs: <code>INVITATION</code></p>
     <li data-md>
      <p>Return <code>INVITATION</code></p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.4" id="deliverinvitation"><span class="secno">2.4. </span><span class="content">Deliver Invitation</span><a class="self-link" href="#deliverinvitation"></a></h3>
   <p class="issue" id="issue-2800f864"><a class="self-link" href="#issue-2800f864"></a> Write standard operation for invitation delivery</p>
   <h3 class="heading settled" data-level="2.5" id="validateinvitation"><span class="secno">2.5. </span><span class="content">Validate Invitation</span><a class="self-link" href="#validateinvitation"></a></h3>
   <p class="issue" id="issue-00444ef2"><a class="self-link" href="#issue-00444ef2"></a> Write standard operation for validating an invitation</p>
   <h3 class="heading settled" data-level="2.6" id="controllerinvite"><span class="secno">2.6. </span><span class="content">Controller Shares Access with Invited Agent</span><a class="self-link" href="#controllerinvite"></a></h3>
   <p>Controlling Agent initiates sharing their data with an Agent that doesn’t
have an identity or a pod.</p>
   <p>Let <code>CONTROLLER</code> be a <a data-link-type="dfn">Social Agent</a> in control of data that
they would like to authorize <code>INVITEE</code> to access.</p>
   <p>Let <code>CAPP</code> be an <a data-link-type="dfn">Application</a> piloted by <code>CONTROLLER</code></p>
   <p>Let <code>CAUTHZ</code> be an <a data-link-type="dfn">Application</a> trusted by <code>CONTROLLER</code> for
authorization and access control.</p>
   <p>Let <code>CISERVICE</code> be an <a data-link-type="dfn">Application</a> trusted by <code>CONTROLLER</code> to validate
invitations made to <code>INVITEE</code>s.</p>
   <p>Let <code>INVITEE</code> be a person without an <a data-link-type="dfn" href="#identity" id="ref-for-identity①">identity</a> or <a data-link-type="dfn" href="#pod" id="ref-for-pod">pod</a> that <code>CONTROLLER</code> would like to authorize to access their data. <code>CONTROLLER</code> knows their
e-mail address and mobile phone number.</p>
   <p>LET <code>PROVIDER</code> be a service that hosts <a data-link-type="dfn" href="#identity" id="ref-for-identity②">identities</a> and <a data-link-type="dfn" href="#pod" id="ref-for-pod①">pods</a> who
provisions the same for <code>INVITEE</code></p>
   <p>Let <code>PAUTHZ</code> be an <a data-link-type="dfn">Application</a> offered by <code>PROVIDER</code> and trusted by <code>INVITEE</code> for authorization and access control.</p>
   <ol>
    <li data-md>
     <p><code>CONTROLLER</code> would like to give <code>INVITEE</code> access to their data.</p>
    <li data-md>
     <p><code>CONTROLLER</code> provides <code>INVITEE</code>'s e-mail address and mobile number to <code>CAPP</code>.</p>
    <li data-md>
     <p><code>CAPP</code> discovers that <code>CAUTHZ</code> is an <a data-link-type="dfn">Application</a> that is a <a data-link-type="dfn">Trusted Agent</a> of <code>CONTROLLER</code> for data authorization</p>
    <li data-md>
     <p><code>CAPP</code> redirects <code>CONTROLLER</code> to <code>CAUTHZ</code></p>
    <li data-md>
     <p><code>CAUTHZ</code> looks in <code>CAPP</code>'s <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document">application profile document</a> for <a data-link-type="dfn">Access Need Groups</a> with an <code>interop:accessScenario</code> of <code>interop:SharedAccess</code></p>
    <li data-md>
     <p>Any <a data-link-type="dfn">Access Need Groups</a> found are passed to
 the [[##present-grant]]
 workflow, which presents them to <code>CONTROLLER</code>.</p>
    <li data-md>
     <p><code>CONTROLLER</code> authorizes the data to share with <code>INVITEE</code> based on
 the provided <a data-link-type="dfn">Access Need Groups</a>.</p>
     <ol>
      <li data-md>
       <p>The <a href="#recordinvitation">§ 2.3 Record Invitation</a> operation is invoked</p>
       <ol>
        <li data-md>
         <p>An <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑦">Access Invitation</a> is stored in <code>CONTROLLER</code>'s <a data-link-type="dfn">Access Grant Registry</a>.</p>
        <li data-md>
         <p><a href="#deliverinvitation">§ 2.4 Deliver Invitation</a> is called to create an
  invitation entry for each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑧">Access Invitation Channel</a> in
  the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑧">Access Invitation</a> with <code>CISERVICE</code></p>
       </ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑨">Access Invitation Channel</a> in the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑨">Access Invitation</a></p>
       <ol>
        <li data-md>
         <p><code>CISERVICE</code> sends a notification to <code>INIVITEE</code> using the
 medium associated with the <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①⓪">Access Invitation Channel</a> type</p>
       </ol>
     </ol>
    <li data-md>
     <p><code>CAUTHZ</code> redirects <code>CONTROLLER</code> back to <code>CAPP</code></p>
    <li data-md>
     <p><code>INVITEE</code> receives a notification associated with one of the <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①①">Access Invitation Channels</a>.</p>
    <li data-md>
     <p><code>INVITEE</code> clicks a link in the notification to register an
 identity and pod with <code>PROVIDER</code>.</p>
    <li data-md>
     <p><code>INVITEE</code> clicks a link in the notification bringing them to the <code>CISERVICE</code> user interface to validate the invitation by
 invoking <a href="#validateinvitation">§ 2.5 Validate Invitation</a>.</p>
     <ol>
      <li data-md>
       <p>If validation is successful, but there are other <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①②">Access Invitation Channels</a> left to validate, the <code>INVITEE</code> will
be prompted to validate them. Continue until failure or
validation of all <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①③">Access Invitation Channels</a> are succesful.</p>
      <li data-md>
       <p><code>CISERVICE</code> initializes a new <a data-link-type="dfn">Access Grant</a> via <a href="https://solid.github.io/data-interoperability-panel/specification/#grants-initializegrant">Solid Application Interoperability § grants-initializegrant</a>, using the contents of
 the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⓪">Access Invitation</a>, and the new registered <a data-link-type="dfn" href="#identity" id="ref-for-identity③">identity</a> for <code>INVITEE</code>.</p>
      <li data-md>
       <p><code>CISERVICE</code> calls <a href="https://solid.github.io/data-interoperability-panel/specification/#grants-recordgrant">Solid Application Interoperability § grants-recordgrant</a> using the <a data-link-type="dfn">Access Grant</a> initialized from the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③①">Access Invitation</a></p>
      <li data-md>
       <p>An <a data-link-type="dfn">Access Grant</a> is stored in <code>CONTROLLER</code>'s <a data-link-type="dfn">Access Grant Registry</a>.</p>
      <li data-md>
       <p><a href="https://solid.github.io/data-interoperability-panel/specification/#apply-permissions">Solid Application Interoperability § apply-permissions</a> is called to apply permissions
 based on the <a data-link-type="dfn">Access Grant</a>.</p>
      <li data-md>
       <p><a href="https://solid.github.io/data-interoperability-panel/specification/#provide-access-receipt">Solid Application Interoperability § provide-access-receipt</a> is called to store the <a data-link-type="dfn">Access Receipt</a>. <code>INVITEE</code> has set <code>interop:receivesAccessReceipt</code> to <code>ReceiptInMessage</code>, so the <a data-link-type="dfn">Access Receipt</a> is posted
 to the access inbox identified via <code>hasAccessInbox</code> in <code>INVITEE</code>'s '<a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document">identity profile document</a>.</p>
     </ol>
   </ol>
   <p class="issue" id="issue-d5f0eb31"><a class="self-link" href="#issue-d5f0eb31"></a> Should we assume that CISERVICE is able to manage grants, or should
it need to redirect through the authorization agent? Perhaps the recommendation
should be that they are combined? Bad separation of concerns?</p>
   <p class="issue" id="issue-d1e70f49"><a class="self-link" href="#issue-d1e70f49"></a> This doesn’t take account a sequencing of validation steps from
one channel to another.</p>
   <h2 class="heading settled" data-level="3" id="definitions"><span class="secno">3. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
   <p><b>All definitions as stated below should be considered in the context of
an interoperable <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem">ecosystem</a> for <a data-link-type="dfn" href="#solid" id="ref-for-solid">Solid</a>, whether explicitly stated
or not.</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="solid">Solid</dfn> is a protocol made up of a number of open web standards
aimed at decentralizing data on the web.</p>
   <p>A Solid <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pod">pod</dfn> is a place for storing and accessing data via
the <a data-link-type="dfn" href="#solid" id="ref-for-solid①">Solid</a> protocol, with mechanisms for controlling who or what can
access that data.</p>
   <p>An interoperable <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ecosystem">ecosystem</dfn> is
a collection of <a data-link-type="dfn" href="#solid" id="ref-for-solid②">Solid</a> compatible <a data-link-type="dfn">applications</a> developed by one or more
entities, used by a community of users, that can safely access and manipulate
the same kinds of data in <a data-link-type="dfn" href="#pod" id="ref-for-pod②">pods</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="server-side-application">server-side application</dfn> runs on a dedicated server. They may
also act as autonomous <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent">authenticated agents</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-piloted-application">user-piloted application</dfn> runs on a user’s device, with the user
as the <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent①">authenticated agent</a>. They include in-browser javascript
applications, native desktop applications, and mobile applications.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="authenticated-agent">authenticated agent</dfn> is an <a data-link-type="dfn">agent</a> that has strongly
authenticated their <a data-link-type="dfn" href="#identity" id="ref-for-identity④">identity</a> by proving control of the <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①">identity profile document</a> via an authentication protocol such as <a data-link-type="biblio" href="#biblio-solid-oidc">[SOLID-OIDC]</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="identity">identity</dfn> is a unique URI that can be dereferenced
to return an <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document②">identity profile document</a>. Compatible
identity systems include <a data-link-type="dfn" href="#webid" id="ref-for-webid">WebID</a> and <a data-link-type="dfn" href="#did" id="ref-for-did">DID</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="identity-profile-document">identity profile document</dfn> is a linked data document obtained by
dereferencing the URI for a given <a data-link-type="dfn" href="#identity" id="ref-for-identity⑤">identity</a>. It provides information that
can be used to prove that a given <a data-link-type="dfn">Agent</a> controls the document.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="webid">WebID</dfn> is a web resource at an HTTP URI which refers to an <a data-link-type="dfn">agent</a>. An <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document③">identity profile document</a> can be accessed by
dereferencing the WebID. <a data-link-type="biblio" href="#biblio-webid">[WEBID]</a></p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="did">DID</dfn> is a URI that associates a DID subject (e.g. an <a data-link-type="dfn">agent</a>,
thing, data model, abstract entity, etc.) with a DID document,
equivalent to an <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document④">identity profile document</a>, to allow trustable
interactions with that subject. <a data-link-type="biblio" href="#biblio-did">[DID]</a></p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-identity">application identity</dfn> is a web resource at an HTTP URI
that uniquely identifies a given <a data-link-type="dfn">Application</a>, and dereferences to an <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document①">application profile document</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-profile-document">application profile document</dfn> is a linked data document
obtained by dereferencing the URI for a given <a data-link-type="dfn" href="#application-identity" id="ref-for-application-identity">application identity</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="acl-resource">acl resource</dfn> as defined by <a data-link-type="biblio" href="#biblio-wac">[WAC]</a> may be directly
associated with a resource or indirectly associated with a resource
through inheritance. It determines which <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject">authorization subjects</a> can
access a resource, and the modes of access they have for it.</p>
   <p>An <dfn data-dfn-type="dfn" data-noexport id="access-mode">access mode<a class="self-link" href="#access-mode"></a></dfn> denotes operations (e.g. read, write)
that a given <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①">authorization subject</a> can perform on a resource.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="authorization-subject">authorization subject</dfn> is the target of a given authorization
statement in an <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource">acl resource</a>. It is either an <a data-link-type="dfn">Agent</a> (individual,
group, <a data-link-type="dfn" href="#server-side-application" id="ref-for-server-side-application">server-side application</a>), a <a data-link-type="dfn" href="#user-piloted-application" id="ref-for-user-piloted-application">User-Piloted Application</a> in use by <em>any</em> <a data-link-type="dfn">Agent</a>, or a combination of
a specific <a data-link-type="dfn">Agent</a> using a specific <a data-link-type="dfn" href="#user-piloted-application" id="ref-for-user-piloted-application①">User-Piloted Application</a>.</p>
   <p>An <dfn data-dfn-type="dfn" data-noexport id="authorization-statement">authorization statement<a class="self-link" href="#authorization-statement"></a></dfn> is ...</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="shape">shape<a class="self-link" href="#shape"></a></dfn> provides a schema that RDF data graphs must meet in order
to be considered conformant. A shape associated with a given resource in a <a data-link-type="dfn" href="#pod" id="ref-for-pod③">pod</a> ensures that any data stored in that resource must conform to the
associated shape. Shape languages include <a data-link-type="biblio" href="#biblio-shex">[SHEX]</a> and <a data-link-type="biblio" href="#biblio-shacl">[SHACL]</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shape-tree">Shape Tree</dfn> defines a prospective tree of related resources
which can be read and written by applications. The shape tree associates
each of these resources with a shape. This allows one to treat a set of
related resources as a single grouping, and apply that to a range of
operations including access control, data organization, data validation,
and data migration. <a data-link-type="biblio" href="#biblio-shapetrees">[SHAPETREES]</a></p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="shape-tree-decorator">Shape Tree Decorator<a class="self-link" href="#shape-tree-decorator"></a></dfn> provides additional human-readable
description and context for a given <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree">shape tree</a>.</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="shape-tree-reference">Shape Tree Reference<a class="self-link" href="#shape-tree-reference"></a></dfn> provides the necessary context to
associate instances of related shape trees via a ShapePath</p>
  </main>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#access-invitation">Access Invitation</a><span>, in § 1.1</span>
   <li><a href="#access-invitation-channel">Access Invitation Channel</a><span>, in § 1.2</span>
   <li><a href="#access-mode">access mode</a><span>, in § 3</span>
   <li><a href="#acl-resource">acl resource</a><span>, in § 3</span>
   <li><a href="#application-identity">application identity</a><span>, in § 3</span>
   <li><a href="#application-profile-document">application profile document</a><span>, in § 3</span>
   <li><a href="#authenticated-agent">authenticated agent</a><span>, in § 3</span>
   <li><a href="#authorization-statement">authorization statement</a><span>, in § 3</span>
   <li><a href="#authorization-subject">authorization subject</a><span>, in § 3</span>
   <li><a href="#did">DID</a><span>, in § 3</span>
   <li><a href="#ecosystem">ecosystem</a><span>, in § 3</span>
   <li><a href="#identity">identity</a><span>, in § 3</span>
   <li><a href="#identity-profile-document">identity profile document</a><span>, in § 3</span>
   <li><a href="#pod">pod</a><span>, in § 3</span>
   <li><a href="#server-side-application">server-side application</a><span>, in § 3</span>
   <li><a href="#shape">shape</a><span>, in § 3</span>
   <li><a href="#shape-tree">Shape Tree</a><span>, in § 3</span>
   <li><a href="#shape-tree-decorator">Shape Tree Decorator</a><span>, in § 3</span>
   <li><a href="#shape-tree-reference">Shape Tree Reference</a><span>, in § 3</span>
   <li><a href="#solid">Solid</a><span>, in § 3</span>
   <li><a href="#user-piloted-application">user-piloted application</a><span>, in § 3</span>
   <li><a href="#webid">WebID</a><span>, in § 3</span>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-did">[DID]
   <dd>Drummond Reed; et al. <a href="https://www.w3.org/TR/did-core/"><cite>Decentralized Identifiers (DIDs) v1.0</cite></a>. URL: <a href="https://www.w3.org/TR/did-core/">https://www.w3.org/TR/did-core/</a>
   <dt id="biblio-shacl">[SHACL]
   <dd>Holger Knublauch; Dimitris Kontokostas. <a href="https://www.w3.org/TR/shacl/"><cite>Shapes Constraint Language (SHACL)</cite></a>. URL: <a href="https://www.w3.org/TR/shacl/">https://www.w3.org/TR/shacl/</a>
   <dt id="biblio-shapetrees">[SHAPETREES]
   <dd>Justin Bingham; Eric Prud'hommeaux. <a href="https://shapetrees.org/TR/specification/index.html"><cite>Shape Trees</cite></a>. URL: <a href="https://shapetrees.org/TR/specification/index.html">https://shapetrees.org/TR/specification/index.html</a>
   <dt id="biblio-shex">[SHEX]
   <dd>Eric Prud'hommeaux; et al. <a href="http://shex.io/shex-semantics/index.html"><cite>Shape Expressions Language 2.1</cite></a>. URL: <a href="http://shex.io/shex-semantics/index.html">http://shex.io/shex-semantics/index.html</a>
   <dt id="biblio-solid-oidc">[SOLID-OIDC]
   <dd>Dmitri Zagidulin; Aaron Coburn; elf Pavlik. <a href="https://solid.github.io/solid-oidc/"><cite>Solid-OIDC Specification</cite></a>. URL: <a href="https://solid.github.io/solid-oidc/">https://solid.github.io/solid-oidc/</a>
   <dt id="biblio-wac">[WAC]
   <dd><a href="https://solid.github.io/specification/wac/"><cite>Web Access Control</cite></a>. URL: <a href="https://solid.github.io/specification/wac/">https://solid.github.io/specification/wac/</a>
   <dt id="biblio-webid">[WEBID]
   <dd>Tim Berners-Lee; Henry Story; Andrei Sambra. <a href="https://www.w3.org/2005/Incubator/webid/spec/identity/"><cite>WebID 1.0</cite></a>. URL: <a href="https://www.w3.org/2005/Incubator/webid/spec/identity/">https://www.w3.org/2005/Incubator/webid/spec/identity/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Write standard operation for invitation delivery <a class="issue-return" href="#issue-2800f864" title="Jump to section">↵</a></div>
   <div class="issue"> Write standard operation for validating an invitation <a class="issue-return" href="#issue-00444ef2" title="Jump to section">↵</a></div>
   <div class="issue"> Should we assume that CISERVICE is able to manage grants, or should
it need to redirect through the authorization agent? Perhaps the recommendation
should be that they are combined? Bad separation of concerns? <a class="issue-return" href="#issue-d5f0eb31" title="Jump to section">↵</a></div>
   <div class="issue"> This doesn’t take account a sequencing of validation steps from
one channel to another. <a class="issue-return" href="#issue-d1e70f49" title="Jump to section">↵</a></div>
  </div>
  <aside class="dfn-panel" data-for="access-invitation">
   <b><a href="#access-invitation">#access-invitation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-invitation">1.1. Access Invitations</a> <a href="#ref-for-access-invitation①">(2)</a> <a href="#ref-for-access-invitation②">(3)</a> <a href="#ref-for-access-invitation③">(4)</a> <a href="#ref-for-access-invitation④">(5)</a> <a href="#ref-for-access-invitation⑤">(6)</a> <a href="#ref-for-access-invitation⑥">(7)</a> <a href="#ref-for-access-invitation⑦">(8)</a> <a href="#ref-for-access-invitation⑧">(9)</a>
    <li><a href="#ref-for-access-invitation⑨">1.2. Access Invitation Channel</a> <a href="#ref-for-access-invitation①⓪">(2)</a>
    <li><a href="#ref-for-access-invitation①①">2. Operations</a> <a href="#ref-for-access-invitation①②">(2)</a> <a href="#ref-for-access-invitation①③">(3)</a> <a href="#ref-for-access-invitation①④">(4)</a> <a href="#ref-for-access-invitation①⑤">(5)</a>
    <li><a href="#ref-for-access-invitation①⑥">2.1. Initialize Invitation</a> <a href="#ref-for-access-invitation①⑦">(2)</a> <a href="#ref-for-access-invitation①⑧">(3)</a> <a href="#ref-for-access-invitation①⑨">(4)</a>
    <li><a href="#ref-for-access-invitation②⓪">2.2. Load Invitation</a> <a href="#ref-for-access-invitation②①">(2)</a> <a href="#ref-for-access-invitation②②">(3)</a> <a href="#ref-for-access-invitation②③">(4)</a>
    <li><a href="#ref-for-access-invitation②④">2.3. Record Invitation</a> <a href="#ref-for-access-invitation②⑤">(2)</a> <a href="#ref-for-access-invitation②⑥">(3)</a>
    <li><a href="#ref-for-access-invitation②⑦">2.6. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-invitation②⑧">(2)</a> <a href="#ref-for-access-invitation②⑨">(3)</a> <a href="#ref-for-access-invitation③⓪">(4)</a> <a href="#ref-for-access-invitation③①">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-invitation-channel">
   <b><a href="#access-invitation-channel">#access-invitation-channel</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-invitation-channel">1.1. Access Invitations</a> <a href="#ref-for-access-invitation-channel①">(2)</a>
    <li><a href="#ref-for-access-invitation-channel②">1.2. Access Invitation Channel</a>
    <li><a href="#ref-for-access-invitation-channel③">2. Operations</a>
    <li><a href="#ref-for-access-invitation-channel④">2.1. Initialize Invitation</a> <a href="#ref-for-access-invitation-channel⑤">(2)</a> <a href="#ref-for-access-invitation-channel⑥">(3)</a>
    <li><a href="#ref-for-access-invitation-channel⑦">2.2. Load Invitation</a>
    <li><a href="#ref-for-access-invitation-channel⑧">2.6. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-invitation-channel⑨">(2)</a> <a href="#ref-for-access-invitation-channel①⓪">(3)</a> <a href="#ref-for-access-invitation-channel①①">(4)</a> <a href="#ref-for-access-invitation-channel①②">(5)</a> <a href="#ref-for-access-invitation-channel①③">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="solid">
   <b><a href="#solid">#solid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-solid">3. Definitions</a> <a href="#ref-for-solid①">(2)</a> <a href="#ref-for-solid②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pod">
   <b><a href="#pod">#pod</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pod">2.6. Controller Shares Access with Invited Agent</a> <a href="#ref-for-pod①">(2)</a>
    <li><a href="#ref-for-pod②">3. Definitions</a> <a href="#ref-for-pod③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ecosystem">
   <b><a href="#ecosystem">#ecosystem</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ecosystem">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="server-side-application">
   <b><a href="#server-side-application">#server-side-application</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-server-side-application">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-piloted-application">
   <b><a href="#user-piloted-application">#user-piloted-application</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-piloted-application">3. Definitions</a> <a href="#ref-for-user-piloted-application①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="authenticated-agent">
   <b><a href="#authenticated-agent">#authenticated-agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-authenticated-agent">3. Definitions</a> <a href="#ref-for-authenticated-agent①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identity">
   <b><a href="#identity">#identity</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identity">1.1. Access Invitations</a>
    <li><a href="#ref-for-identity①">2.6. Controller Shares Access with Invited Agent</a> <a href="#ref-for-identity②">(2)</a> <a href="#ref-for-identity③">(3)</a>
    <li><a href="#ref-for-identity④">3. Definitions</a> <a href="#ref-for-identity⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identity-profile-document">
   <b><a href="#identity-profile-document">#identity-profile-document</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identity-profile-document">2.6. Controller Shares Access with Invited Agent</a>
    <li><a href="#ref-for-identity-profile-document①">3. Definitions</a> <a href="#ref-for-identity-profile-document②">(2)</a> <a href="#ref-for-identity-profile-document③">(3)</a> <a href="#ref-for-identity-profile-document④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="webid">
   <b><a href="#webid">#webid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-webid">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="did">
   <b><a href="#did">#did</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-did">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-identity">
   <b><a href="#application-identity">#application-identity</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-identity">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-profile-document">
   <b><a href="#application-profile-document">#application-profile-document</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-profile-document">2.6. Controller Shares Access with Invited Agent</a>
    <li><a href="#ref-for-application-profile-document①">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="acl-resource">
   <b><a href="#acl-resource">#acl-resource</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-acl-resource">3. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="authorization-subject">
   <b><a href="#authorization-subject">#authorization-subject</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-authorization-subject">3. Definitions</a> <a href="#ref-for-authorization-subject①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="shape-tree">
   <b><a href="#shape-tree">#shape-tree</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shape-tree">3. Definitions</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>