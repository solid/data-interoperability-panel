<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Solid Application Interoperability</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	html {
		color: black;
		color: var(--text);
		background-color: white;
		background-color: var(--bg);
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		background: transparent top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	 border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd;
	  border: thin solid var(--algo-border);
	  border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: red;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #080;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: none;
		border-bottom: 1px solid #707070;
		border-bottom: 1px solid var(--a-normal-underline);
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		border-bottom-color: #bbb;
		border-bottom-color: var(--a-visited-underline);
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		border-color: #c00;
		border-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker {
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

	@media not print {
		details.annoying-warning[open] {
			position: fixed;
			left: 0;
			right: 0;
			bottom: 2em;
			z-index: 1000;
		}
	}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good table positioning:
		   "content column" is 50ems wide at max; less on smaller screens.
		   Extra space (after ToC + content) is empty on the right.

		   1. When table < content column, centers table in column.
		   2. When content < table < available, left-aligns.
		   3. When table > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version f9f60c8f, updated Fri Sep 25 16:39:03 2020 -0700" name="generator">
  <link href="https://solid.github.io/data-interoperability-panel/specification/" rel="canonical">
  <meta content="18561b2e58b428809daaab10e273685b14c5af98" name="document-revision">
<style>
table.permissions thead tr {
  font-size: 12px;
  text-align: left;
}

table.permissions th {
  text-align: left;
}

table.permissions tbody tr:nth-child(even) {
  background-color: lightgray;
  font-size: 10px;
}

table.permissions tbody td {
  font-size: 10px;
  text-align: left;
}

table.classinfo thead tr th[colspan] {
  text-align: left;
  font-size: 15px;
}

table.classinfo thead tr th {
  text-align: left;
  font-size: 14px;
}

table.classinfo tbody tr:nth-child(odd) {
  background-color: lightgray;
  font-size: 12px;
}

table.classinfo tbody tr td {
  font-size: 12px;
}

table.tree thead tr {
  font-size: 14px;
}

table.tree tbody tr:nth-child(even) {
  background-color: lightgray;
  font-size: 14px;
}

table.tree tbody td {
  font-size: 12px;
}

table.operation thead tr {
  font-size: 14px;
}

table.operation tbody tr:nth-child(even) {
  background-color: lightgray;
  font-size: 14px;
}

table.operation tbody td {
  font-size: 12px;
}

pre {
  font-size: .8em;
}

figcaption {
  text-align: left;
}

a[data-link-type=dfn] {
  color: #000000;
}

a[href*=".ttl"] {
  color: #339966;
  border-bottom: 1px solid #339966;
}

a[href^="#class"] {
  color: #339966;
  border-bottom: 1px solid #339966;
}

a.vocab {
  color: #339966;
  border-bottom: 1px solid #339966;
}

a[href*=".shex"] {
  color: #cc2900;
  border-bottom: 1px solid #cc2900;
}

a[href^="#shex"] {
  color: #cc2900;
  border-bottom: 1px solid #cc2900;
}

a[href*=".tree"] {
  color: #e68a00;
  border-bottom: 1px solid #e68a00;
}

a[href^="#tree"] {
  color: #e68a00;
  border-bottom: 1px solid #e68a00;
}

em.rfc2119 {
  text-transform: lowercase;
  font-variant: small-caps;
  font-style: normal;
  font-size: 18px;
  color: #900;
}

</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
html {
    color: black;
    color: var(--text);
    background-color: white;
    background-color: var(--bg);
}
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #707070;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #bbb;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-line-highlighting */

:root {
    --highlight-hover-bg: rgba(0, 0, 0, .05);
}
.line-numbered {
    display: grid !important;
    grid-template-columns: min-content 1fr;
    grid-auto-flow: rows;
}
.line-numbered > *,
.line-numbered::before,
.line-numbered::after {
    grid-column: 1/-1;
}
.line-no {
    grid-column: 1;
    color: gray;
}
.line {
    grid-column: 2;
}
.line.highlight-line {
    background: var(--highlight-hover-bg);
}
.line-no.highlight-line {
    background: var(--highlight-hover-bg);
    color: #444;
    font-weight: bold;
}
.line-no.highlight-line[data-line]::before {
    padding: 0 .5em 0 .1em;
    content: attr(data-line);
}
.line-no.highlight-line[data-line-end]::after {
    padding: 0 .5em 0 .1em;
    content: attr(data-line-end);
}
</style>
<style>/* style-line-numbers */

:root {
    --highlight-hover-bg: rgba(0, 0, 0, .05);
}
.line-numbered {
    display: grid !important;
    grid-template-columns: min-content 1fr;
    grid-auto-flow: row;
}
.line-numbered > *,
.line-numbered::before,
.line-numbered::after {
    grid-column: 1/-1;
}
.line-no {
    grid-column: 1;
    color: gray;
}
.line {
    grid-column: 2;
}
.line:hover {
    background: var(--highlight-hover-bg);
}
.line-no[data-line]::before {
    padding: 0 .5em 0 .1em;
    content: attr(data-line);
}
.line-no[data-line-end]::after {
    padding: 0 .5em 0 .1em;
    content: attr(data-line-end);
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: #fdf6e3; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}

@media (prefers-color-scheme: dark) {
    :root {
        --highlight-hover-bg: rgba(255, 255, 255, .05);
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --highlight-hover-bg: rgba(255, 255, 255, .05);
    }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Solid Application Interoperability</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2020-10-01">1 October 2020</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://solid.github.io/data-interoperability-panel/specification/">https://solid.github.io/data-interoperability-panel/specification/</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/solid/data-interoperability-panel/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Justin Bingham</span>
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Eric Prud'hommeaux</span>
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Josh Collins</span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"> MIT License Copyright 2019 - 2020 W3C Solid Community Group </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification details how Agents and Applications can safely

  share and interoperate over data in a Solid Pod.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#agents"><span class="secno">2</span> <span class="content">Agent</span></a>
     <ol class="toc">
      <li><a href="#agents-overview"><span class="secno">2.1</span> <span class="content">Overview</span></a>
      <li><a href="#agents-datamodel"><span class="secno">2.2</span> <span class="content">Data Model</span></a>
      <li><a href="#agents-hierarchy"><span class="secno">2.3</span> <span class="content">Resource Hierarchy</span></a>
      <li><a href="#agents-permissions"><span class="secno">2.4</span> <span class="content">Permission Model</span></a>
     </ol>
    <li>
     <a href="#app"><span class="secno">3</span> <span class="content">Application</span></a>
     <ol class="toc">
      <li><a href="#app-overview"><span class="secno">3.1</span> <span class="content">Overview</span></a>
      <li><a href="#app-datamodel"><span class="secno">3.2</span> <span class="content">Data Model</span></a>
      <li><a href="#app-hierarchy"><span class="secno">3.3</span> <span class="content">Resource Hierarchy</span></a>
      <li><a href="#app-permissions"><span class="secno">3.4</span> <span class="content">Permission Model</span></a>
     </ol>
    <li>
     <a href="#appreg"><span class="secno">4</span> <span class="content">Application Registration</span></a>
     <ol class="toc">
      <li><a href="#appreg-overview"><span class="secno">4.1</span> <span class="content">Overview</span></a>
      <li><a href="#appreg-datamodel"><span class="secno">4.2</span> <span class="content">Data Model</span></a>
      <li><a href="#appreg-structure"><span class="secno">4.3</span> <span class="content">Structure and Validation</span></a>
      <li><a href="#appreg-permissions"><span class="secno">4.4</span> <span class="content">Permission Model</span></a>
      <li><a href="#appreg-lookup"><span class="secno">4.5</span> <span class="content">Looking up an Application Registration</span></a>
      <li><a href="#appreg-new"><span class="secno">4.6</span> <span class="content">Registering an Application</span></a>
     </ol>
    <li>
     <a href="#datareg"><span class="secno">5</span> <span class="content">Data Registration</span></a>
     <ol class="toc">
      <li><a href="#datareg-overview"><span class="secno">5.1</span> <span class="content">Overview</span></a>
      <li><a href="#datareg-model"><span class="secno">5.2</span> <span class="content">Data Model</span></a>
      <li><a href="#datareg-structure"><span class="secno">5.3</span> <span class="content">Structure and Validation</span></a>
      <li><a href="#datareg-permissions"><span class="secno">5.4</span> <span class="content">Permission Model</span></a>
      <li><a href="#datareg-registrations"><span class="secno">5.5</span> <span class="content">Registering Data</span></a>
     </ol>
    <li>
     <a href="#authz"><span class="secno">6</span> <span class="content">Data Authorization</span></a>
     <ol class="toc">
      <li><a href="#authz-overview"><span class="secno">6.1</span> <span class="content">Overview</span></a>
      <li><a href="#authz-workflows"><span class="secno">6.2</span> <span class="content">Workflows</span></a>
     </ol>
    <li>
     <a href="#needs"><span class="secno">7</span> <span class="content">Access Needs</span></a>
     <ol class="toc">
      <li><a href="#needs-overview"><span class="secno">7.1</span> <span class="content">Overview</span></a>
      <li><a href="#needs-datamodel"><span class="secno">7.2</span> <span class="content">Data Model</span></a>
      <li><a href="#needs-operations"><span class="secno">7.3</span> <span class="content">Operations</span></a>
     </ol>
    <li>
     <a href="#grants"><span class="secno">8</span> <span class="content">Access Grants</span></a>
     <ol class="toc">
      <li><a href="#grants-overview"><span class="secno">8.1</span> <span class="content">Overview</span></a>
      <li><a href="#grants-datamodel"><span class="secno">8.2</span> <span class="content">Data Model</span></a>
      <li><a href="#grants-hierarchy"><span class="secno">8.3</span> <span class="content">Resource Hierarchy</span></a>
      <li><a href="#grants-operations"><span class="secno">8.4</span> <span class="content">Operations</span></a>
     </ol>
    <li>
     <a href="#receipts"><span class="secno">9</span> <span class="content">Access Receipts</span></a>
     <ol class="toc">
      <li><a href="#receipts-overview"><span class="secno">9.1</span> <span class="content">Overview</span></a>
      <li><a href="#receipts-datamodel"><span class="secno">9.2</span> <span class="content">Data Model</span></a>
      <li><a href="#receipts-hierarchy"><span class="secno">9.3</span> <span class="content">Resource Hierarchy</span></a>
      <li><a href="#receipts-operations"><span class="secno">9.4</span> <span class="content">Operations</span></a>
     </ol>
    <li>
     <a href="#remote"><span class="secno">10</span> <span class="content">Remote Data Registration</span></a>
     <ol class="toc">
      <li><a href="#remote-overview"><span class="secno">10.1</span> <span class="content">Overview</span></a>
      <li><a href="#remote-datamodel"><span class="secno">10.2</span> <span class="content">Data Model</span></a>
      <li><a href="#remote-hierarchy"><span class="secno">10.3</span> <span class="content">Resource Hierarchy</span></a>
      <li><a href="#remote-operations"><span class="secno">10.4</span> <span class="content">Operations</span></a>
     </ol>
    <li>
     <a href="#trusted"><span class="secno">11</span> <span class="content">Trusted Agents</span></a>
     <ol class="toc">
      <li><a href="#trusted-overview"><span class="secno">11.1</span> <span class="content">Overview</span></a>
      <li><a href="#trusted-operations"><span class="secno">11.2</span> <span class="content">Operations</span></a>
     </ol>
    <li><a href="#definitions"><span class="secno">12</span> <span class="content">Definitions</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>Solid affords us the opportunity to create a valuable and
powerful ecosystem where people and organizations retain control
of their data, but are also able to put it to work and use it
to its full potential. The fundamentals of Solid make this possible,
but further definition of standard methods and mechanisms must be established
to make it practical, intuitive, and secure.</p>
   <p class="note" role="note"><span>Note:</span> See <a data-link-type="biblio" href="#biblio-problems-and-goals">Problems and Goals for Interoperability in Solid</a> for a detailed explanation of the problem space.</p>
   <p>This specification details how <a data-link-type="dfn" href="#agent" id="ref-for-agent">Agents</a> in the Solid ecosystem
can manage and utilize data stored in a Solid pod under their control using
disparate, interoperable <a data-link-type="dfn" href="#application" id="ref-for-application">Applications</a>, and then share that data in
collaboration with other <a data-link-type="dfn" href="#agent" id="ref-for-agent①">Agents</a>.</p>
   <p><a href="#appreg">§ 4 Application Registration</a> lets <a data-link-type="dfn" href="#agent" id="ref-for-agent②">Agents</a> register and track the <a data-link-type="dfn" href="#application" id="ref-for-application①">Applications</a> they’ve
decided to use.</p>
   <p><a href="#datareg">§ 5 Data Registration</a> lets <a data-link-type="dfn" href="#agent" id="ref-for-agent③">Agents</a> register, organize, and lookup their data.
Data is stored uniformly, avoiding complex physical hierarchies. <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree">Shape trees</a> and <a data-link-type="dfn" href="#shape" id="ref-for-shape">shapes</a> provide strong data validation and
intuitive data boundaries.</p>
   <p><a href="#authz">§ 6 Data Authorization</a> provides the means for an <a data-link-type="dfn" href="#agent" id="ref-for-agent④">Agent</a> to grant other <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤">Agents</a> and <a data-link-type="dfn" href="#application" id="ref-for-application②">Applications</a> access to data in their control.</p>
   <ul>
    <li data-md>
     <p><a href="#needs">§ 7 Access Needs</a> let <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥">Agents</a> and <a data-link-type="dfn" href="#application" id="ref-for-application③">Applications</a> express which data they
need access to, and patterns to request those needs.</p>
    <li data-md>
     <p><a href="#grants">§ 8 Access Grants</a> let <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦">Agents</a> manage and track access they’ve granted to
other <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧">Agents</a> and <a data-link-type="dfn" href="#application" id="ref-for-application④">Applications</a>.</p>
    <li data-md>
     <p><a href="#receipts">§ 9 Access Receipts</a> are provided by <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨">Agents</a> to other <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪">Agents</a> and <a data-link-type="dfn" href="#application" id="ref-for-application⑤">Applications</a> to let them know about the access they’ve been
granted.</p>
    <li data-md>
     <p><a href="#remote">§ 10 Remote Data Registration</a> lets <a data-link-type="dfn" href="#agent" id="ref-for-agent①①">Agents</a> maintain a local registry of remote data
that has been shared with them by other <a data-link-type="dfn" href="#agent" id="ref-for-agent①②">Agents</a>.</p>
   </ul>
   <h2 class="heading settled" data-level="2" id="agents"><span class="secno">2. </span><span class="content">Agent</span><a class="self-link" href="#agents"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="agents-overview"><span class="secno">2.1. </span><span class="content">Overview</span><a class="self-link" href="#agents-overview"></a></h3>
   <p><a data-link-type="dfn" href="#agent" id="ref-for-agent①③">Agents</a> represent the primary actors in an interoperable Solid <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem">ecosystem</a>.</p>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①④">Agent</a> is denoted by an <a data-link-type="dfn" href="#identity" id="ref-for-identity">identity</a>. Dereferencing that <a data-link-type="dfn" href="#identity" id="ref-for-identity①">identity</a> leads to the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤">Agent</a>, and a graph of useful information about them. This
graph is used by the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥">Agent</a> to locate and access their own data, and data
relevant to them, across the decentralized Web. Other <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦">Agents</a> and <a data-link-type="dfn" href="#application" id="ref-for-application⑥">Applications</a> use this information to interact with them.</p>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧">Agent</a> is designed to be publicly accessible, but many of the
things the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑨">Agent</a> links to are designed to be private, or accessible
only by other <a data-link-type="dfn" href="#agent" id="ref-for-agent②⓪">Agents</a> or <a data-link-type="dfn" href="#application" id="ref-for-application⑦">Applications</a> that the <a data-link-type="dfn" href="#agent" id="ref-for-agent②①">Agent</a> has authorized.</p>
   <p>Most of an <a data-link-type="dfn" href="#agent" id="ref-for-agent②②">Agent’s</a> information is stored in <a data-link-type="dfn" href="#registry" id="ref-for-registry">Registries</a>.
A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="registry">Registry</dfn> is a place where an <a data-link-type="dfn" href="#agent" id="ref-for-agent②③">Agent</a> can store and find
different types of data, often for particular purposes. Each type
of <a data-link-type="dfn" href="#registry" id="ref-for-registry①">Registry</a> serves a specific purpose or function.</p>
   <table align="left" class="classinfo data" id="agentRegistries">
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th>Registry
      <th>Description
    <tbody>
     <tr>
      <td>Application Registry
      <td>Records the <a data-link-type="dfn" href="#application" id="ref-for-application⑧">Applications</a> that a given <a data-link-type="dfn" href="#agent" id="ref-for-agent②④">Agent</a> uses
      or has given access to. <i>See <a href="#appreg">Application Registration</a></i>
     <tr>
      <td>Data Registry
      <td>Stores and organizes data types for interoperable use by different <a data-link-type="dfn" href="#application" id="ref-for-application⑨">Applications</a> and shared with other <a data-link-type="dfn" href="#agent" id="ref-for-agent②⑤">Agents</a> <i>See <a href="#datareg">Data Registration</a></i>
     <tr>
      <td>Access Grant Registry
      <td>Records access granted to other <a data-link-type="dfn" href="#agent" id="ref-for-agent②⑥">Agents</a> and/or <a data-link-type="dfn" href="#application" id="ref-for-application①⓪">Applications</a> <i>See <a href="#grants">Access Grants</a></i>
     <tr>
      <td>Access Receipt Registry
      <td>Tracks access that has been granted by other <a data-link-type="dfn" href="#agent" id="ref-for-agent②⑦">Agents</a> <i>See <a href="#receipts">Access Receipts</a></i>
     <tr>
      <td>Remote Data Registry
      <td>Local references to data that has been shared by other <a data-link-type="dfn" href="#agent" id="ref-for-agent②⑧">Agents</a> <i>See <a href="#remote">Remote Data Registration</a></i>
   </table>
   <h3 class="heading settled" data-level="2.2" id="agents-datamodel"><span class="secno">2.2. </span><span class="content">Data Model</span><a class="self-link" href="#agents-datamodel"></a></h3>
   <h4 class="heading settled" data-level="2.2.1" id="agents-datamodel-summary"><span class="secno">2.2.1. </span><span class="content">Summary</span><a class="self-link" href="#agents-datamodel-summary"></a></h4>
   <p>When an <a data-link-type="dfn" href="#agent" id="ref-for-agent②⑨">Agent</a> has more than one pod, or is managing
data on behalf of another <a data-link-type="dfn" href="#agent" id="ref-for-agent③⓪">Agent</a>, they will be linked to multiple <a data-link-type="dfn" href="#registry" id="ref-for-registry②">Registries</a> of the same type. A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="registry-set">Registry Set</dfn> is used to
organize <a data-link-type="dfn" href="#registry" id="ref-for-registry③">Registries</a> of the same type together.</p>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent③①">Agent</a> links to each kind of <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set">Registry Sets</a> through type-specific
subproperties of <a href="interop.ttl#hasRegistrySet">interop:hasRegistrySet</a>.</p>
   <p>This allows one <a data-link-type="dfn" href="#agent" id="ref-for-agent③②">Agent</a> to
link to many <a data-link-type="dfn" href="#registry" id="ref-for-registry④">Registries</a> across the Web, without exposing those <a data-link-type="dfn" href="#registry" id="ref-for-registry⑤">Registries</a> in a public document. Different permissions can be
assigned to each <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set①">Registry Set</a>, depending on the sensitivity of the <a data-link-type="dfn" href="#registry" id="ref-for-registry⑥">Registries</a> they link to.</p>
   <p><a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set②">Registry Sets</a> link to <a data-link-type="dfn" href="#registry" id="ref-for-registry⑦">Registries</a> through the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property.</p>
   <figure>
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent③③">Agent</a> at https://alice.pod.example/profile/id#me</figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- c>######## Registry Sets ########</c->
  <c- nn>interop:</c-><c- f>hasApplicationRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/application#set></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/data#set></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessGrantRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/grant#set></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessReceiptRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/receipt#set></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRemoteDataRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/remote#set></c-> <c- p>;</c->
  <c- c>######## Inboxes ########</c->
  <c- nn>interop:</c-><c- f>hasInbox</c-> <c- g>&lt;https://alice.pod.example/inbox/general></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessInbox</c-> <c- g>&lt;https://alice.pod.example/inbox/access></c-> <c- p>.</c->
</pre>
   </figure>
   <h4 class="heading settled" data-level="2.2.2" id="datamodel-agent"><span class="secno">2.2.2. </span><span class="content">Agent</span><a class="self-link" href="#datamodel-agent"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="agent">Agent</dfn> is a distinct individual, group, organization, or piece
of software with an <a data-link-type="dfn" href="#identity" id="ref-for-identity②">identity</a> that can be strongly authenticated.</p>
   <table align="left" class="classinfo data" id="classAgent">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3" text-align="left"> <a href="interop.ttl#Agent">Agent</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasApplicationRegistrySet
      <td>ApplicationRegistrySet
      <td><a data-link-type="dfn" href="#application-registry-set" id="ref-for-application-registry-set">Application Registry Set</a> for the <a data-link-type="dfn" href="#agent" id="ref-for-agent③④">Agent</a>
     <tr>
      <td>hasDataRegistrySet
      <td>DataRegistrySet
      <td><a data-link-type="dfn" href="#data-registry-set" id="ref-for-data-registry-set">Data Registry Set</a> for the <a data-link-type="dfn" href="#agent" id="ref-for-agent③⑤">Agent</a>
     <tr>
      <td>hasAccessGrantRegistrySet
      <td>AccessGrantRegistrySet
      <td><a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set">Access Grant Registry Set</a> for the <a data-link-type="dfn" href="#agent" id="ref-for-agent③⑥">Agent</a>
     <tr>
      <td>hasAccessReceiptRegistrySet
      <td>AccessReceiptRegistrySet
      <td><a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set">Access Receipt Registry Set</a> for the <a data-link-type="dfn" href="#agent" id="ref-for-agent③⑦">Agent</a>
     <tr>
      <td>hasRemoteDataRegistrySet
      <td>RemoteDataRegistrySet
      <td><a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set">Remote Data Registry Set</a> for the <a data-link-type="dfn" href="#agent" id="ref-for-agent③⑧">Agent</a>
     <tr>
      <td>hasInbox
      <td>ldp:inbox
      <td>A general inbox for messages sent to the <a data-link-type="dfn" href="#agent" id="ref-for-agent③⑨">Agent</a>
     <tr>
      <td>hasAccessInbox
      <td>ldp:inbox
      <td>An inbox for access related messages sent to the <a data-link-type="dfn" href="#agent" id="ref-for-agent④⓪">Agent</a>
   </table>
   <p>The <a href="#shexAgent">AgentShape</a> is used to validate an instance of the <a href="#classAgent">Agent</a> class.</p>
<pre class="highlight" id="shexAgent"><c- g>&lt;#AgentShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>Agent</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasApplicationRegistrySet</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataRegistrySet</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessGrantRegistrySet</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessReceiptRegistrySet</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRemoteDataRegistrySet</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasInbox</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessInbox</c-> IRI
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AgentTree">AgentTree</a> is assigned to a resource to ensure it will validate against the <a href="#shexAgent">AgentShape</a>.</p>
<pre class="highlight" id="treeAgent"><c- g>&lt;#AgentTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AgentShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   <h3 class="heading settled" data-level="2.3" id="agents-hierarchy"><span class="secno">2.3. </span><span class="content">Resource Hierarchy</span><a class="self-link" href="#agents-hierarchy"></a></h3>
   <table align="left" class="data tree">
    <colgroup>
     <col>
     <col>
     <col>
     <col>
    <thead>
     <tr>
      <th>Resource
      <th>Class
      <th>Shape
      <th>Shape Tree
    <tbody>
     <tr>
      <td><code>/profile/</code>
      <td>-
      <td>-
      <td><a href="#treeAgent">ProfileTree</a>
     <tr>
      <td><code>-- id#me</code>
      <td><a href="#classAgent">Agent</a>
      <td><a href="#shexAgent">AgentShape</a>
      <td><a href="#treeAgent">AgentTree</a>
     <tr>
      <td><code>-- application#set</code>
      <td><a href="#">ApplicationRegistrySet</a>
      <td><a href="#">ApplicationRegistrySetShape</a>
      <td><a href="#">ApplicationRegistrySetTree</a>
     <tr>
      <td><code>-- data#set</code>
      <td><a href="#">DataRegistrySet</a>
      <td><a href="#">DataRegistrySetShape</a>
      <td><a href="#">DataRegistrySetTree</a>
     <tr>
      <td><code>-- grant#set</code>
      <td><a href="#classAccessGrantRegistrySet">AccessGrantRegistrySet</a>
      <td><a href="#shexAccessGrantRegistrySet">AccessGrantRegistrySetShape</a>
      <td><a href="#treeAccessGrantRegistrySet">AccessGrantRegistrySetTree</a>
     <tr>
      <td><code>-- receipt#set</code>
      <td><a href="#classAccessReceiptRegistrySet">AccessReceiptRegistrySet</a>
      <td><a href="#shexAccessReceiptRegistrySet">AccessReceiptRegistrySetShape</a>
      <td><a href="#treeAccessReceiptRegistrySet">AccessReceiptRegistrySetTree</a>
     <tr>
      <td><code>-- remote#set</code>
      <td><a href="#classRemoteDataRegistrySet">RemoteDataRegistrySet</a>
      <td><a href="#shexRemoteDataRegistrySet">RemoteDataRegistrySetShape</a>
      <td><a href="#treeRemoteDataRegistrySet">RemoteDataRegistrySetTree</a>
     <tr>
      <td><code>/inbox/access</code>
      <td><a class="vocab" href="https://www.w3.org/ns/ldp#inbox">ldp:inbox</a>
      <td>-
      <td><a href="interop.tree#treeAccessInbox">AccessInboxTree</a>
     <tr>
      <td><code>/inbox/general</code>
      <td><a class="vocab" href="https://www.w3.org/ns/ldp#inbox">ldp:inbox</a>
      <td>-
      <td>-
   </table>
   <p><a data-link-type="dfn" href="#agent" id="ref-for-agent④①">Agent</a> resources <em class="rfc2119">MAY</em> use any resource or
subject names. The names used herein have been selected for comprehension
and readability.</p>
   <h3 class="heading settled" data-level="2.4" id="agents-permissions"><span class="secno">2.4. </span><span class="content">Permission Model</span><a class="self-link" href="#agents-permissions"></a></h3>
   <p>The permission model for the resources detailed in <a href="#agents-hierarchy">§ 2.3 Resource Hierarchy</a> are illustrated in the table below.</p>
   <p><b>Notable items:</b></p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document">identity profile document</a> <code>id</code> which contains the <a data-link-type="dfn" href="#agent" id="ref-for-agent④②">Agent</a> instance
gives the public read-only access.</p>
    <li data-md>
     <p><a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set③">Registry Sets</a> are not publicly exposed. Only the <a data-link-type="dfn" href="#agent" id="ref-for-agent④③">Agent</a> or their <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent">Trusted Agents</a> and <a data-link-type="dfn" href="#application" id="ref-for-application①①">Applications</a> can see the <a data-link-type="dfn" href="#registry" id="ref-for-registry⑧">Registries</a> listed by them.</p>
   </ul>
   <figure>
    <figcaption>Permission model for <a data-link-type="dfn" href="#agent" id="ref-for-agent④④">Agent</a> resources</figcaption>
    <table align="left" class="data permissions">
     <colgroup>
      <col>
     <colgroup>
     <colgroup>
     <colgroup>
     <colgroup span="2">
     <thead>
      <tr>
       <th>
       <th scope="colgroup">Agent
       <th scope="colgroup">Public
       <th scope="colgroup">Trusted Agents
       <th scope="colgroup">Other Agents Granted Access
      <tr>
       <th scope="col">Resource
       <th scope="col">Access
       <th scope="col">Access
       <th scope="col">Access
       <th scope="col">Subject
       <th scope="col">Access
     <tbody>
      <tr>
       <td><code>/profile/</code>
       <td>Control
       <td>-
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- id</code>
       <td>Control
       <td>Read
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- application</code>
       <td>Control
       <td>-
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- data</code>
       <td>Control
       <td>-
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- access</code>
       <td>Control
       <td>-
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- receipt</code>
       <td>Control
       <td>-
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- remote</code>
       <td>Control
       <td>-
       <td>Control
       <td>-
       <td>-
    </table>
   </figure>
   <h2 class="heading settled" data-level="3" id="app"><span class="secno">3. </span><span class="content">Application</span><a class="self-link" href="#app"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="app-overview"><span class="secno">3.1. </span><span class="content">Overview</span><a class="self-link" href="#app-overview"></a></h3>
   <p><a data-link-type="dfn" href="#application" id="ref-for-application①②">Applications</a> are pieces of software that <a data-link-type="dfn" href="#agent" id="ref-for-agent④⑤">Agents</a> use to
access, manipulate, and manage the data in their control, and the data
they’ve been granted access to.</p>
   <p>An <a data-link-type="dfn" href="#application" id="ref-for-application①③">Application</a> is denoted by an <a data-link-type="dfn" href="#identity" id="ref-for-identity③">identity</a>. Dereferencing that <a data-link-type="dfn" href="#identity" id="ref-for-identity④">identity</a> leads to an <a data-link-type="dfn" href="#application" id="ref-for-application①④">Application</a> profile instance, and a graph of
useful information about them.</p>
   <p>This information in the <a data-link-type="dfn" href="#application" id="ref-for-application①⑤">Application</a> profile is used during <a href="#appreg">§ 4 Application Registration</a> and <a href="#authz">§ 6 Data Authorization</a> to help <a data-link-type="dfn" href="#agent" id="ref-for-agent④⑥">Agents</a> determine whether they want to use
the <a data-link-type="dfn" href="#application" id="ref-for-application①⑥">Application</a>, what kind of data it needs access to, and whether
they’ll willing to give it that access.</p>
   <p>The <a data-link-type="dfn" href="#application" id="ref-for-application①⑦">Application</a> profile is designed to be publicly accessible.</p>
   <h3 class="heading settled" data-level="3.2" id="app-datamodel"><span class="secno">3.2. </span><span class="content">Data Model</span><a class="self-link" href="#app-datamodel"></a></h3>
   <h4 class="heading settled" data-level="3.2.1" id="app-datamodel-summary"><span class="secno">3.2.1. </span><span class="content">Summary</span><a class="self-link" href="#app-datamodel-summary"></a></h4>
   <p>An <a data-link-type="dfn" href="#application" id="ref-for-application①⑧">Application</a> provides summary detail about itself, and its
author, via properties in the <a href="#classApplication">Application</a> class.</p>
   <p>An <a data-link-type="dfn" href="#application" id="ref-for-application①⑨">Application</a> identifies the types of data it requires access to
by linking to <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group">Access Need Groups</a> via the <a href="#classAccessNeedGroup">interop:hasAccessNeedGroup</a> property.</p>
   <figure>
    <figcaption><a data-link-type="dfn" href="#application" id="ref-for-application②⓪">Application</a> at https://app.example/profile/id#app</figcaption>
<pre class="highlight"><c- g>&lt;#app></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Application</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationName</c-> <c- s>"Example Application"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationDescription</c-> <c- s>"This is a description of the Example Application"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationAuthor</c-> <c- g>&lt;https://app.example/org/id#agent></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationAuthorName</c-> <c- s>"Example Organization"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationThumbnail</c-> <c- g>&lt;https://app.example/profile/thumb.svg></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> <c- g>&lt;#exampleAccessNeedGroup></c-> <c- p>.</c->
</pre>
   </figure>
   <h4 class="heading settled" data-level="3.2.2" id="datamodel-application"><span class="secno">3.2.2. </span><span class="content">Application</span><a class="self-link" href="#datamodel-application"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application">Application</dfn> is a piece of software that an <a data-link-type="dfn" href="#agent" id="ref-for-agent④⑦">Agent</a> uses to
access, manipulate, and manage the data in their control, as well as the data
they’ve been granted access to.</p>
   <table align="left" class="classinfo data" id="classApplication">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3" text-align="left"> <a href="interop.ttl#Application">Agent</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>applicationName
      <td>xsd:string
      <td>Name of the <a data-link-type="dfn" href="#application" id="ref-for-application②①">Application</a>
     <tr>
      <td>applicationDescription
      <td>xsd:string
      <td>Description of the <a data-link-type="dfn" href="#application" id="ref-for-application②②">Application</a>
     <tr>
      <td>applicationAuthor
      <td><a href="#classAgent">Agent</a>
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent④⑧">Agent</a> that authored the <a data-link-type="dfn" href="#application" id="ref-for-application②③">Application</a>
     <tr>
      <td>applicationAuthorName
      <td>xsd:string
      <td>Name of the Author
     <tr>
      <td>applicationThumbnail
      <td>binary image
      <td>Thumbnail for the <a data-link-type="dfn" href="#application" id="ref-for-application②④">Application</a>
     <tr>
      <td>hasAccessNeedGroup
      <td><a href="#classAccessNeedGroup">AccessNeedGroup</a>
      <td><a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①">Access Need Group</a> representing types of data the <a data-link-type="dfn" href="#application" id="ref-for-application②⑤">Application</a> needs to operate
   </table>
   <p>The <a href="#shexApplication">ApplicationShape</a> is used to validate an instance of the <a href="#classApplication">Application</a> class.</p>
<pre class="highlight" id="shexApplication"><c- g>&lt;#ApplicationShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>Application</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationName</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationDescription</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationAuthor</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationAuthorName</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>applicationThumbanil</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> IRI* <c- p>;</c->
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#ApplicationTree">ApplicationTree</a> is assigned to a resource to ensure it will validate against the <a href="#shexApplication">ApplicationShape</a>.</p>
<pre class="highlight" id="treeApplication"><c- g>&lt;#ApplicationTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#ApplicationShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   <h3 class="heading settled" data-level="3.3" id="app-hierarchy"><span class="secno">3.3. </span><span class="content">Resource Hierarchy</span><a class="self-link" href="#app-hierarchy"></a></h3>
   <table align="left" class="data tree">
    <colgroup>
     <col>
     <col>
     <col>
     <col>
    <thead>
     <tr>
      <th>Resource
      <th>Class
      <th>Shape
      <th>Shape Tree
    <tbody>
     <tr>
      <td><code>/profile/</code>
      <td>-
      <td>-
      <td><a href="ecosystem.tree#ApplicationProfileTree">ApplicationProfileTree</a>
     <tr>
      <td><code>-- id#app</code>
      <td><a href="#classApplication">Application</a>
      <td><a href="#shexApplication">ApplicationShape</a>
      <td><a href="#treeApplication">ApplicationTree</a>
     <tr>
      <td><code>-- thumb.svg</code>
      <td>-
      <td>-
      <td><a href="interop.tree#ApplicationThumbTree">ApplicationThumbTree</a>
   </table>
   <p><a data-link-type="dfn" href="#application" id="ref-for-application②⑥">Application</a> resources <em class="rfc2119">MAY</em> use any resource or
subject names. The names used herein have been selected for comprehension
and readability.</p>
   <h3 class="heading settled" data-level="3.4" id="app-permissions"><span class="secno">3.4. </span><span class="content">Permission Model</span><a class="self-link" href="#app-permissions"></a></h3>
   <p>The permission model for the resources detailed in <a href="#agents-hierarchy">§ 2.3 Resource Hierarchy</a> are illustrated in the table below.</p>
   <p><b>Notable items:</b></p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①">identity profile document</a> <code>id</code> which contains the <a data-link-type="dfn" href="#application" id="ref-for-application②⑦">Application</a> instance gives the public read-only access.</p>
    <li data-md>
     <p>The thumbnail resource <code>thumb.svg</code> gives the public read-only access.</p>
   </ul>
   <figure>
    <figcaption>Permission model for <a data-link-type="dfn" href="#application" id="ref-for-application②⑧">Application</a> resources</figcaption>
    <table align="left" class="data permissions">
     <colgroup>
      <col>
     <colgroup>
     <colgroup>
     <colgroup>
     <colgroup span="2">
     <thead>
      <tr>
       <th>
       <th scope="colgroup">Agent
       <th scope="colgroup">Public
       <th scope="colgroup">Trusted Agents
       <th scope="colgroup">Other Agents Granted Access
      <tr>
       <th scope="col">Resource
       <th scope="col">Access
       <th scope="col">Access
       <th scope="col">Access
       <th scope="col">Subject
       <th scope="col">Access
     <tbody>
      <tr>
       <td><code>/profile/</code>
       <td>Control
       <td>-
       <td>-
       <td>-
       <td>-
      <tr>
       <td><code>-- id</code>
       <td>Control
       <td>Read
       <td>-
       <td>-
       <td>-
      <tr>
       <td><code>-- thumb.svg</code>
       <td>Control
       <td>Read
       <td>-
       <td>-
       <td>-
    </table>
   </figure>
   <h2 class="heading settled" data-level="4" id="appreg"><span class="secno">4. </span><span class="content">Application Registration</span><a class="self-link" href="#appreg"></a></h2>
   <p class="issue" id="issue-53f602c0"><a class="self-link" href="#issue-53f602c0"></a> Refactor Application Registration to use the format introduced throughout
Data Authorization (overview, model, hierarchy, permissions, operations )</p>
   <h3 class="heading settled" data-level="4.1" id="appreg-overview"><span class="secno">4.1. </span><span class="content">Overview</span><a class="self-link" href="#appreg-overview"></a></h3>
   <p>Application Registration gives <a data-link-type="dfn" href="#agent" id="ref-for-agent④⑨">Agents</a> participating in the Solid <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem①">ecosystem</a> a way to register and track the <a data-link-type="dfn" href="#application" id="ref-for-application②⑨">Applications</a> they’ve elected
to use with their data. It also provides each <a data-link-type="dfn" href="#application" id="ref-for-application③⓪">Application</a> with a place
to store metadata, preferences, access grants, caches, and other internal
data specific to the function of a given <a data-link-type="dfn" href="#application" id="ref-for-application③①">Application</a>.</p>
   <p>An <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry">Application Registry</a> for storing individual <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration">Application Registrations</a> is introduced.</p>
   <h3 class="heading settled" data-level="4.2" id="appreg-datamodel"><span class="secno">4.2. </span><span class="content">Data Model</span><a class="self-link" href="#appreg-datamodel"></a></h3>
   <figure>
     <img src="diagrams/appreg-model.svg" width="100%/"> 
    <figcaption>Data model for application registration</figcaption>
   </figure>
   <p>Application Registration extends the <a href="#datamodel-agent">§ 2.2.2 Agent</a> with type-specific
subclasses and subproperties.</p>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤⓪">Agent</a> links to <a data-link-type="dfn" href="#application-registry-set" id="ref-for-application-registry-set①">Application Registry Set</a> instances.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#application-registry-set" id="ref-for-application-registry-set②">Application Registry Set</a> links to any number of <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①">Application Registry</a> instances via the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry②">Application Registry</a> links to any number of <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①">Application Registrations</a> via the <a href="interop.ttl#hasRegistration">interop:hasRegistration</a> property.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②">Application Registration</a> extends the <a href="interop.ttl#Registration">interop:Registration</a> class with the <a href="interop.ttl#ApplicationRegistration">interop:ApplicationRegistration</a> subclass.</p>
   </ul>
   <p>The <a href="interop.ttl#ApplicationRegistration">interop:ApplicationRegistration</a> subclass also introduces the following properties:</p>
   <ul>
    <li data-md>
     <p><a href="interop.ttl#registeredApplication">interop:registeredApplication</a> - <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid">ApplicationID</a> of the <a data-link-type="dfn" href="#application" id="ref-for-application③②">Application</a> that is being registered.</p>
   </ul>
   <figure>
    <figcaption>Instance data for
  an <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration③">Application Registration</a> at
  https://alice.pod.example/applications/02f9d4221d9e5c0ae/#registration </figcaption>
<pre class="highlight line-numbered" line-highlight="5"><span class="line-no" data-line="1"></span><span class="line"><c- g>&lt;#registration></c-></span><span class="line-no" data-line="2"></span><span class="line">  <c- b>a</c-> <c- nn>interop:</c-><c- f>ApplicationRegistration</c-> <c- p>;</c-></span><span class="line-no" data-line="3"></span><span class="line">  <c- nn>interop:</c-><c- f>registeredBy</c-> <c- g>&lt;https://alice.pod.example/profile/id#me></c-> <c- p>;</c-></span><span class="line-no" data-line="4"></span><span class="line">  <c- nn>interop:</c-><c- f>registeredWith</c-> <c- g>&lt;https://trusted.example/ar></c-> <c- p>;</c-></span><span class="line-no highlight-line" data-line="5"></span><span class="line highlight-line">  <c- nn>interop:</c-><c- f>registeredApplication</c-> <c- g>&lt;https://nevernote.example/id#agent></c-> <c- p>;</c-></span><span class="line-no" data-line="6"></span><span class="line">  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-04-04T20:15:47.000Z"</c-><c- o>^^</c->xsd:dateTime <c- p>.</c-></span></pre>
   </figure>
   <h3 class="heading settled" data-level="4.3" id="appreg-structure"><span class="secno">4.3. </span><span class="content">Structure and Validation</span><a class="self-link" href="#appreg-structure"></a></h3>
   <p>A given <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤①">Agent</a> will have one or more <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry③">Application Registries</a> discoverable through the <a href="#datamodel-agent">§ 2.2.2 Agent</a>, via resources that implement
the <a href="#agents-hierarchy">§ 2.3 Resource Hierarchy</a>.</p>
   <figure>
    <figcaption>An <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry④">Application Registry</a> at
  https://alice.pod.example/applications/#registry</figcaption>
     <img src="diagrams/registrar-applications.svg" width="100%/"> 
   </figure>
   <p>The <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry⑤">Application Registry</a> instance data is stored in the RDF graph
of the <code>/applications</code> container at <code>https://alice.pod.example/applications/#registry</code>. It links to a
collection of <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration④">Application Registrations</a> stored in
the <code>/applications</code> container.</p>
   <p>The shape tree <a href="interop.tree#ApplicationRegistryTree">interopt:ApplicationRegistryTree</a> associated with the <code>/applications</code> container specifies this resource
structure. It assigns the <a href="interop.shex#ApplicationRegistryShape">interops:ApplicationRegistryShape</a> to validate the <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry⑥">Application Registry</a> instance data in the
container resource, and says that the container includes instances of <a href="interop.tree#ApplicationRegistrationTree">interopt:ApplicationRegistrationTree</a>,
which any resources added to the <code>/applications</code> container must conform to.</p>
   <p>Conforming to <a href="interop.tree#ApplicationRegistrationTree">interopt:ApplicationRegistrationTree</a> ensures that the container for the <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry⑦">Application Registry</a> at <code>/applications#registry</code> only contains valid <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration⑤">Application Registrations</a>.</p>
   <p>Specifically:</p>
   <ul>
    <li data-md>
     <p>Any resource added to the <code>/applications</code> container must be a
container (<code>st:expectsType st:ShapeTreeContainer</code>)</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration⑥">Application Registration</a> must be stored in the
RDF graph of that container, to successfully pass shape validation via <code>st:validatedBy &lt;interops#ApplicationRegistrationShape></code>.</p>
   </ul>
   <figure>
    <figcaption>An <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration⑦">Application Registration</a> at
  https://alice.pod.example/applications/02f9d4221d9e5c0ae/#registration </figcaption>
     <img src="diagrams/appregistration-structure.svg" width="100%/"> 
   </figure>
   <p>These <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration⑧">Application Registrations</a> are associated with container resources
so that the <a data-link-type="dfn" href="#application" id="ref-for-application③③">Application</a> that has been registered
has dedicated space to store data that is very specific to its internal
functions. In the figure above, we can see an application-specific
configuration resource (<code>config.ttl</code>) and a summary index file (<code>summary.idx</code>).</p>
   <h4 class="heading settled" data-level="4.3.1" id="appreg-naming"><span class="secno">4.3.1. </span><span class="content">Naming application registration resources</span><a class="self-link" href="#appreg-naming"></a></h4>
   <p>In this proposal, resource names for ecosystem instances are almost always
randomly generated. However, when creating an <a href="interop.tree#ApplicationRegistrationTree">interopt:ApplicationRegistrationTree</a> for an <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration⑨">Application Registration</a>, the container
must be named using a SHA-256 hash encoding of the <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid①">ApplicationID</a> for the <a data-link-type="dfn" href="#application" id="ref-for-application③④">Application</a>, which is linked through the <a href="interop.ttl#registeredApplication">interop:registeredApplication</a> property.</p>
   <dl>
    <dd data-md>
     <p><b>NeverNote ApplicationID:</b> <code>https://nevernote.example/id#agent</code></p>
    <dd data-md>
     <p><b>SHA-256 Hash:</b> <code>70e9249113f8aef095626980e82f13833f24a902571502ef726b4d7e69739ba3</code></p>
   </dl>
   <p>The name of the container for NeverNote’s <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①⓪">Application Registration</a> would be <code>70e9249113f8aef095626980e82f13833f24a902571502ef726b4d7e69739ba3</code>.</p>
   <p>There is a reasonable argument for whether or not a one-way hash alogorithm
like SHA-256 is appropriate, as we are primarily using it as a mechanism
for URL encoding to create uniform, opaque resource names,
and the ApplicationID for a given <a data-link-type="dfn" href="#application" id="ref-for-application③⑤">Application</a> is publicly shared. However, the use of one-way hash does add a modicum
of additional privacy at a miniscule expense.</p>
   <p class="issue" id="issue-0ccfac38"><a class="self-link" href="#issue-0ccfac38"></a> Is it appropriate to use a one-way hash for application registration
resource names. <a href="https://github.com/solid/data-interoperability-panel/issues/48">Github issue</a></p>
   <h4 class="heading settled" data-level="4.3.2" id="appreg-internal"><span class="secno">4.3.2. </span><span class="content">Use of internal application space</span><a class="self-link" href="#appreg-internal"></a></h4>
   <p>There is a legitimate argument that giving <a data-link-type="dfn" href="#application" id="ref-for-application③⑥">Applications</a> their own
private data space in Solid is counterintuitive to Solid’s proposition to
decouple data and <a data-link-type="dfn" href="#application" id="ref-for-application③⑦">Applications</a>.</p>
   <p>However, there are certain types of data that are very specific to
the function of a particular <a data-link-type="dfn" href="#application" id="ref-for-application③⑧">Application</a>, and have no value to other <a data-link-type="dfn" href="#application" id="ref-for-application③⑨">Applications</a>. This may include but not be limited to app-specific
preferences, configurations, caches, or indexes. Forcing that data into <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①">shape trees</a> and <a data-link-type="dfn" href="#shape" id="ref-for-shape①">shapes</a> stored in the data registry that are supposed
to be consumable and interoperable by other <a data-link-type="dfn" href="#application" id="ref-for-application④⓪">Applications</a> can lead to
frankenstein-like <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②">shape trees</a> and <a data-link-type="dfn" href="#shape" id="ref-for-shape②">shapes</a> that no one wants to use.
Giving <a data-link-type="dfn" href="#application" id="ref-for-application④①">Applications</a> a private space where they can store internal data
is therefore a key factor in broad interoperability,
because it protects interoperable data from pollution by narrowly
focused elements.</p>
   <p>Ultimately, if <a data-link-type="dfn" href="#application" id="ref-for-application④②">Applications</a> don’t want to be interoperable, there’s
no reasonable convention that could prevent it. For example, they could
decide to use proprietary vocabularies, <a data-link-type="dfn" href="#shape" id="ref-for-shape③">shapes</a>, and <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③">shape trees</a>.
However, there are motivating factors to
be interoperable, because in doing so they become compatible with a
slew of data that already exists in the <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem②">ecosystem</a>, including data within
their competitive landscape. Providing a private space allows <a data-link-type="dfn" href="#application" id="ref-for-application④③">Applications</a> to separate some internals from true interoperable data so that the
interoperable data is cleaner and more usable. Our belief is that
this helps avoid the creation of far-reaching app-specific silos.</p>
   <p>Because this space is private to an <a data-link-type="dfn" href="#application" id="ref-for-application④④">Application</a> and not meant to
be interoperable, the <a data-link-type="dfn" href="#application" id="ref-for-application④⑤">Application</a> may or may not decide to utilize
data validation facilities like <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④">shape trees</a> or <a data-link-type="dfn" href="#shape" id="ref-for-shape④">shapes</a>.</p>
   <h3 class="heading settled" data-level="4.4" id="appreg-permissions"><span class="secno">4.4. </span><span class="content">Permission Model</span><a class="self-link" href="#appreg-permissions"></a></h3>
   <p>There is no public access to any data in an <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry⑧">Application Registry</a>.</p>
   <p>Only <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤②">Agents</a> that have been selectively trusted to assist a
given agent with managing application registration have the ability to manage
contents and permissions across <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry⑨">Application Registries</a>,
including the creation and modification of <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①①">Application Registrations</a>.</p>
   <p>A given registered <a data-link-type="dfn" href="#application" id="ref-for-application④⑥">Application</a> has read access to its <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①②">Application Registration</a>, and read/write access to
the data space inside its container. It does not get control privileges.</p>
   <figure>
    <figcaption>Permission model for <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①⓪">Application Registry</a> resources</figcaption>
    <table align="left" class="data permissions">
     <colgroup>
      <col>
     <colgroup>
     <colgroup>
     <colgroup span="2">
     <colgroup span="2">
     <thead>
      <tr>
       <th>
       <th scope="colgroup">Controller
       <th scope="colgroup">Public
       <th colspan="2" scope="colgroup">Selectively Trusted
       <th colspan="2" scope="colgroup">Selectively Granted
      <tr>
       <th scope="col">Resource
       <th scope="col">Access
       <th scope="col">Access
       <th scope="col">Subject
       <th scope="col">Access
       <th scope="col">Subject
       <th scope="col">Access
     <tbody>
      <tr>
       <td><code>/applications/</code>
       <td>Control
       <td>-
       <td>App. Registration Agent
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- /applications/02f9d4221d9e5c0ae/</code>
       <td>Control
       <td>-
       <td>App. Registration Agent
       <td>Control
       <td>Registered App.
       <td>Read
      <tr>
       <td><code>-- /applications/02f9d4221d9e5c0ae/*</code>
       <td>Control
       <td>-
       <td>App. Registration Agent
       <td>Control
       <td>Registered App.
       <td>Write
      <tr>
       <td><code>-- /applications/6fe4221d0589d7bde/</code>
       <td>Control
       <td>-
       <td>App. Registration Agent
       <td>Control
       <td>Registered App.
       <td>Read
      <tr>
       <td><code>-- /applications/6fe4221d0589d7bde/*</code>
       <td>Control
       <td>-
       <td>App. Registration Agent
       <td>Control
       <td>Registered App.
       <td>Write
    </table>
   </figure>
   <h3 class="heading settled" data-level="4.5" id="appreg-lookup"><span class="secno">4.5. </span><span class="content">Looking up an Application Registration</span><a class="self-link" href="#appreg-lookup"></a></h3>
   <p>There are a few reasons that different actors might lookup
an <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①③">Application Registration</a>:</p>
   <ul>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤③">Agent</a> may want to view or manage their collection of registered <a data-link-type="dfn" href="#application" id="ref-for-application④⑦">Applications</a>.</p>
    <li data-md>
     <p>Another <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent①">trusted agent</a> may assist the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤④">Agent</a> with management
and registration of <a data-link-type="dfn" href="#application" id="ref-for-application④⑧">Applications</a>.</p>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#application" id="ref-for-application④⑨">Application</a> may want to see if it has been registered,
and access its <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①④">Application Registration</a> if it exists. <em>This is the most frequently occuring scenario.</em></p>
   </ul>
   <p>Per the <a href="#appreg-permissions">§ 4.4 Permission Model</a>, the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤⑤">Agent</a> and
any <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent②">trusted agents</a> for application registration will have access and
visibility across <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①①">Application Registries</a> and <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①⑤">Application Registrations</a>. An <a data-link-type="dfn" href="#application" id="ref-for-application⑤⓪">Application</a> will only have access to its own <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①⑥">Application Registration</a>,
in which case it would be linked to that <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①⑦">Application Registration</a> via the <a href="interop.ttl#registeredApplication">interop:registeredApplication</a> property.</p>
   <p>Since <a data-link-type="dfn" href="#application" id="ref-for-application⑤①">Applications</a> do not have access to the list of <a data-link-type="dfn" href="#application" id="ref-for-application⑤②">Applications</a> in <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①②">Application Registries</a>, the only way they can check to see if they
are registered is to perform a direct lookup in the addressable space
of each <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①③">Application Registry</a> in the <a data-link-type="dfn" href="#application-registry-set" id="ref-for-application-registry-set③">Application Registry Set</a>,
using the SHA-256 hash of its <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid②">applicationID</a>.</p>
<pre>GET https://alice.pod.example/applications/70e9249113f8aef095626980e82f13833f24a902571502ef726b4d7e69739ba3
</pre>
   <p>Inability to access the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①⑧">Application Registration</a> would be a result of:</p>
   <ul>
    <li data-md>
     <p>There is no <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration①⑨">Application Registration</a> for that <a data-link-type="dfn" href="#application" id="ref-for-application⑤③">Application</a> in the <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①④">Application Registry</a>.</p>
    <li data-md>
     <p>There is an <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②⓪">Application Registration</a> at the target URL, but
it cannot be accessed because it associated with a
different <a data-link-type="dfn" href="#application" id="ref-for-application⑤④">Application</a>.</p>
   </ul>
   <p>In either case, the server may return either a 403 or 404 depending on
server or user privacy preference.</p>
   <p>If an <a data-link-type="dfn" href="#application" id="ref-for-application⑤⑤">Application</a> can access the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②①">Application Registration</a>, then it can confirm that it
is already a registered <a data-link-type="dfn" href="#application" id="ref-for-application⑤⑥">Application</a> for the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤⑥">Agent</a>.</p>
   <p>If an <a data-link-type="dfn" href="#application" id="ref-for-application⑤⑦">Application</a> is not registered, and would like to be,
it will need to go through the process of <a href="#appreg-new">§ 4.6 Registering an Application</a>.</p>
   <h3 class="heading settled" data-level="4.6" id="appreg-new"><span class="secno">4.6. </span><span class="content">Registering an Application</span><a class="self-link" href="#appreg-new"></a></h3>
   <p>In almost every case, an <a data-link-type="dfn" href="#application" id="ref-for-application⑤⑧">Application</a> will not be permitted
to register itself, and will need the
assistance of a <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent③">trusted agent</a> that has been authorized to assist
with application registration for a given <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤⑦">Agent</a>.</p>
   <p class="issue" id="issue-368507bb"><a class="self-link" href="#issue-368507bb"></a> Applications that can perform these capabilities will be discoverable
through the Agent. Until that section is written, we’ll use
hard-coded properties associated with the Agent for discovery.</p>
   <p>The <a data-link-type="dfn" href="#application" id="ref-for-application⑤⑨">Application</a> will look for another <a data-link-type="dfn" href="#application" id="ref-for-application⑥⓪">Application</a> that is linked with the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑤⑧">Agent</a> through the <a href="interop.ttl#trustsForApplicationRegistration">interop:trustsForApplicationRegistration</a> property.</p>
   <figure>
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent⑤⑨">Agent</a> at https://alice.pod.example/profile/id#me linking to Application
  Registration Agent</figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>trustsForApplicationRegistration</c-> <c- g>&lt;https://trusted.example/ar/></c-> <c- p>.</c->
</pre>
   </figure>
   <p>The <a data-link-type="dfn" href="#application" id="ref-for-application⑥①">Application</a> will redirect the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥⓪">Agent</a> via the
synchronous <a href="#trusted">trusted agent</a> pattern to the <a data-link-type="dfn" href="#application" id="ref-for-application⑥②">Application</a> linked by <a href="interop.ttl#trustsForApplicationRegistration">interop:trustsForApplicationRegistration</a>,
supplying its <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid③">ApplicationID</a> as a parameter.</p>
   <p>The <a data-link-type="dfn" href="#application-registration-agent" id="ref-for-application-registration-agent">application registration agent</a> is now expected to dereference
(i.e. perform an HTTP GET on) the <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid④">ApplicationID</a> to retrieve an <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document">application profile document</a>. The contents of that document
help the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥①">Agent</a> determine whether that <a data-link-type="dfn" href="#application" id="ref-for-application⑥③">Application</a> is suitable for
approval.</p>
   <p>For example, verification of a verifiable credential
stored in the <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document①">application profile document</a>, issued by a trusted third party,
is a good indicator of the <a data-link-type="dfn" href="#application" id="ref-for-application⑥④">Application’s</a> trustworthiness.
Similarly, an <a data-link-type="dfn" href="#application" id="ref-for-application⑥⑤">Application</a>, or the <a data-link-type="dfn" href="#identity-provider" id="ref-for-identity-provider">identity provider</a> it uses, may
be listed on a trusted whitelist that the <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent④">trusted agent</a> consults. It is able to raise issues related to these checks (or others)
to the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥②">Agent</a> as part of her decision making process.</p>
   <p>Assuming suitability and confirmation from the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥③">Agent</a>, the <a data-link-type="dfn" href="#application-registration-agent" id="ref-for-application-registration-agent①">application registration agent</a> will proceed to create the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②②">Application Registration</a> for
the <a data-link-type="dfn" href="#application" id="ref-for-application⑥⑥">Application</a> in the appropriate <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①⑤">Application Registry</a>.
When it is finished, it will return her to
the <a data-link-type="dfn" href="#application" id="ref-for-application⑥⑦">Application</a> at the <a href="interop.ttl#applicationRegistrationCallback">interop:applicationRegistrationCallback</a> provided in the application profile document.</p>
   <h4 class="heading settled" data-level="4.6.1" id="appreg-creating"><span class="secno">4.6.1. </span><span class="content">Creating the application registration entry</span><a class="self-link" href="#appreg-creating"></a></h4>
   <p>The <a data-link-type="dfn" href="#application-registration-agent" id="ref-for-application-registration-agent②">application registration agent</a> is responsible for creating
the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②③">Application Registration</a> in conformance with the
documented <a href="#appreg-structure">§ 4.3 Structure and Validation</a> pattern.</p>
   <p>Specifically, the <a href="interop.tree#ApplicationRegistrationTree">interopt:ApplicationRegistrationTree</a> stipulates that the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②④">Application Registration</a> be a container via <code>st:expectsType st:ShapeTreeContainer</code>.</p>
   <p>The <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②⑤">Application Registration</a> must be added to the RDF
graph of that container with a <code>&lt;#registration></code> subject, and pass validation
against the <a href="interop.shex#ApplicationRegistrationShape">interops:ApplicationRegistrationShape</a>.</p>
   <p>The <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②⑥">Application Registration’s</a> properties must be set as follows:</p>
   <ul>
    <li data-md>
     <p><a href="interop.ttl#registeredBy">interop:registeredBy</a>: linked to the <a data-link-type="dfn" href="#identity" id="ref-for-identity⑤">identity</a> of the <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent">authenticated agent</a> that invoked the registration
(i.e. the <a data-link-type="dfn" href="#webid" id="ref-for-webid">webid</a> of the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥④">Agent</a>)</p>
    <li data-md>
     <p><a href="interop.ttl#registeredWith">interop:registeredWith</a>: linked to the <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid⑤">ApplicationID</a> of the <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent⑤">trusted agent</a> that facilitated the
registration, typically the <a data-link-type="dfn" href="#application-registration-agent" id="ref-for-application-registration-agent③">application registration agent</a>.</p>
    <li data-md>
     <p><a href="interop.ttl#registeredApplication">interop:registeredApplication</a>: linked to
the <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid⑥">ApplicationID</a> of the <a data-link-type="dfn" href="#application" id="ref-for-application⑥⑧">Application</a> that is being registered.</p>
    <li data-md>
     <p><a href="interop.ttl#registeredAt">interop:registeredAt</a>: the <code>xsd:dateTime</code> of
the registration.</p>
   </ul>
   <figure>
    <figcaption>Example <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②⑦">Application Registration</a></figcaption>
<pre class="highlight"><c- g>&lt;#registration></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>applicationRegistration</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> <c- g>&lt;https://alice.pod.example/profile/id#me></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> <c- g>&lt;https://trusted.example/ar></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredApplication</c-> <c- g>&lt;https://nevernote.example/id#agent></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-04-04T20:15:47.000Z"</c-><c- o>^^</c->xsd:dateTime <c- p>.</c->
</pre>
   </figure>
   <p>The <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②⑧">Application Registration</a> container must be named in
accordance with the instructions in <a href="#appreg-naming">§ 4.3.1 Naming application registration resources</a>.</p>
   <p>The <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration②⑨">Application Registration</a> container must be added as a child
member of the <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①⑥">Application Registry</a> container.</p>
   <p>Access to the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration③⓪">Application Registration</a> must be set per the
instructions in <a href="#appreg-permissions">§ 4.4 Permission Model</a>.</p>
   <p>The <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration③①">Application Registration</a> must be associated with the <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①⑦">Application Registry</a> through the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property in
the graph of the <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①⑧">Application Registry</a>.</p>
   <h2 class="heading settled" data-level="5" id="datareg"><span class="secno">5. </span><span class="content">Data Registration</span><a class="self-link" href="#datareg"></a></h2>
   <p class="issue" id="issue-3a71f65f"><a class="self-link" href="#issue-3a71f65f"></a> Refactor Data Registration to use the format introduced throughout
Data Authorization (overview, model, hierarchy, permissions, operations )</p>
   <h3 class="heading settled" data-level="5.1" id="datareg-overview"><span class="secno">5.1. </span><span class="content">Overview</span><a class="self-link" href="#datareg-overview"></a></h3>
   <p>Data Registration gives <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥⑤">Agents</a> participating in the Solid <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem③">ecosystem</a> a way to register, organize, and subsequently manage the data they control.</p>
   <p>A <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry">Data Registry</a> for storing individual <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration">Data Registrations</a> is
introduced.</p>
   <p>A given <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①">Data Registry</a> provides a specific location in a Solid <a data-link-type="dfn" href="#pod" id="ref-for-pod">pod</a> where
data of various types is organized and stored in a uniform way to aid
authorization, interoperability, discovery, and more. It avoids complex
hierarchies of data that hinder flexibility and interoperability by
employing a relatively flat hierarchy. This creates natural data boundaries
that make data authorization, amongst other things, extremely intuitive.</p>
   <p>A <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②">Data Registry</a> can be used for basic discovery, but it is not
designed nor intended to be an efficient means to query or index data.
However, it is <em>intended</em> to be used as reliable source data for different
query engines or indexing schemes.</p>
   <h3 class="heading settled" data-level="5.2" id="datareg-model"><span class="secno">5.2. </span><span class="content">Data Model</span><a class="self-link" href="#datareg-model"></a></h3>
   <figure id="fig-datareg-model">
     <img src="diagrams/datareg-model.svg" width="100%/"> 
    <figcaption>Data model for data registration</figcaption>
   </figure>
   <p>Data Registration extends the <a href="#datamodel-agent">§ 2.2.2 Agent</a> with type-specific subclasses
and subproperties.</p>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥⑥">Agent</a> links to <a data-link-type="dfn" href="#data-registry-set" id="ref-for-data-registry-set①">Data Registry Sets</a> via the <a href="interop.ttl#hasDataRegistrySet">interop:hasDataRegistrySet</a> property.</p>
   <p>A <a data-link-type="dfn" href="#data-registry-set" id="ref-for-data-registry-set②">Data Registry Set</a> links to any number of <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry③">Data Registries</a> via
the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property.</p>
   <p>A <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry④">Data Registry</a> links to any number of <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①">Data Registrations</a> via the <a href="interop.ttl#hasRegistration">interop:hasRegistration</a> property.</p>
   <figure id="fig-datareg-agent">
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent⑥⑦">Agent</a> at https://alice.pod.example/profile/id#me
  linking to a <a data-link-type="dfn" href="#data-registry-set" id="ref-for-data-registry-set③">Data Registry Set</a></figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/data#set></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-datareg-registry-set">
    <figcaption>A <a data-link-type="dfn" href="#data-registry-set" id="ref-for-data-registry-set④">Data Registry Set</a> at
   https://alice.pod.example/profile/data#set linking to two different <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry⑤">Data Registries</a></figcaption>
<pre class="highlight"><c- g>&lt;#set></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataRegistrySet</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> <c- g>&lt;https://alice.pod.example/data/#registry></c-> <c- p>,</c->
                  <c- g>&lt;https://alice.otherpod.example/data/#registry></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-datareg-registry">
    <figcaption>A <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry⑥">Data Registry</a> at https://alice.pod.example/data/#registry
  linking to several <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②">Data Registrations</a></figcaption>
<pre class="highlight"><c- g>&lt;#registry></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataRegistry</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- g>&lt;49a4057a-6ade-4a9d-9869-085a00925259/#registration></c-> <c- p>,</c->
                      <c- g>&lt;cf2d40d3-858e-42f7-8b11-d021b5989ed2/#registration></c-> <c- p>,</c->
                      <c- g>&lt;628a7371-3a9b-49f9-a7aa-2e9c93e0150b/#registration></c-> <c- p>.</c->
</pre>
   </figure>
   <p>A <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③">Data Registration</a> extends the <a href="interop.ttl#Registration">interop:Registration</a> class with the <a href="interop.ttl#DataRegistration">interop:DataRegistration</a> subclass.</p>
   <p>A <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④">Data Registration</a> includes any number of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance">Registered Data Instances</a> via the <a href="interop.ttl#hasRegisteredDataInstance">interop:hasRegisteredDataInstance</a> property.</p>
   <p>The <a href="interop.ttl#DataRegistration">interop:DataRegistration</a> subclass
extends the <a href="interop.ttl#Registration">interop:Registration</a> class with
the following properties:</p>
   <ul>
    <li data-md>
     <p><a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a> - URI of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑤">shape tree</a> that is being registered.</p>
    <li data-md>
     <p><a href="interop.ttl#hasRegisteredDataInstance">interop:hasRegisteredDataInstance</a> -
Any number of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①">Registered Data Instances</a> of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑥">shape tree</a> associated via <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a>.</p>
   </ul>
   <figure id="fig-datareg-registration">
    <figcaption>A <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤">Data Registration</a> at
  https://alice.pod.example/data/49a4057a-6ade-4a9d-9869-085a00925259/#registration
  linking to several <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②">Registered Data Instances</a></figcaption>
<pre class="highlight line-numbered" line-highlight="5"><span class="line-no" data-line="1"></span><span class="line"><c- g>&lt;#registration></c-></span><span class="line-no" data-line="2"></span><span class="line">  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataRegistration</c-> <c- p>;</c-></span><span class="line-no" data-line="3"></span><span class="line">  <c- nn>interop:</c-><c- f>registeredBy</c-> <c- g>&lt;https://alice.pod.example/profile/id#me></c-> <c- p>;</c-></span><span class="line-no" data-line="4"></span><span class="line">  <c- nn>interop:</c-><c- f>registeredWith</c-> <c- g>&lt;https://app.example/id#agent></c-> <c- p>;</c-></span><span class="line-no highlight-line" data-line="5"></span><span class="line highlight-line">  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-04-04T20:15:47.000Z"</c-><c- o>^^</c->xsd:dateTime <c- p>.</c-></span><span class="line-no" data-line="6"></span><span class="line">  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;https://tree.example/commonnote#notebook-tree></c-> <c- p>;</c-></span><span class="line-no" data-line="7"></span><span class="line">  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> <c- g>&lt;3f56c32e-96c6-4b0c-b941-eadc2bf98b18/#notebook></c-> <c- p>,</c-></span><span class="line-no" data-line="8"></span><span class="line">                                <c- g>&lt;16e1eae9-20a5-489d-8380-8c07ca3805c4/#notebook></c-> <c- p>,</c-></span><span class="line-no" data-line="9"></span><span class="line">                                <c- g>&lt;886785d2-6c23-46ee-9e19-5ac36b7bcd71/#notebook></c-> <c- p>,</c-></span><span class="line-no" data-line="10"></span><span class="line">                                <c- g>&lt;dae5015c-d5f9-4ede-b9eb-7ca7a19854a9/#notebook></c-> <c- p>.</c-></span></pre>
   </figure>
   <h3 class="heading settled" data-level="5.3" id="datareg-structure"><span class="secno">5.3. </span><span class="content">Structure and Validation</span><a class="self-link" href="#datareg-structure"></a></h3>
   <p>The resources associated with an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥⑧">Agent’s</a> <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry⑦">Data Registries</a> conform
to and extend the general patterns detailed in the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑥⑨">Agent’s</a> <a href="#agents-hierarchy">§ 2.3 Resource Hierarchy</a>.</p>
   <p>Consequently, this section focuses on the unique composition and validation of <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥">Data Registrations</a> in a <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry⑧">Data Registry</a>, and the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③">Registered Data Instances</a> contained in each <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑦">Data Registration</a>.</p>
   <h4 class="heading settled" data-level="5.3.1" id="datareg-registrations-structure"><span class="secno">5.3.1. </span><span class="content">Structure of Data Registrations in a Data Registry</span><a class="self-link" href="#datareg-registrations-structure"></a></h4>
   <figure id="fig-datareg-registry-structure">
    <figcaption>A <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry⑨">Data Registry</a> at
  https://alice.pod.example/data/#registry</figcaption>
     <img src="diagrams/datareg-structure.svg" width="100%/"> 
   </figure>
   <p>In the figure above, a <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①⓪">Data Registry</a> instance is stored in the RDF graph
of the <code>https://alice.pod.example/data/</code> container at <code>https://alice.pod.example/data/#registry</code>. This <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①①">Data Registry</a> contains a set of <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑧">Data Registrations</a> (all stored in
the <code>https://alice.pod.example/data/</code> container), <a href="#fig-datareg-registry">as shown</a> in the
previous section.</p>
   <p>Each individual <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑨">Data Registration</a> is associated with one <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑦">shape tree</a>, indicated by the <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a> property.</p>
   <figure id="fig-datareg-registry-tree">
    <figcaption>Definition of an <a href="interop.tree#DataRegistryTree">interopt:DataRegistryTree</a></figcaption>
<pre class="highlight"><c- g>&lt;#DataRegistryTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#DataRegistryShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>contains</c-> <c- g>&lt;#DataRegistrationTree></c-> <c- p>,</c->
                <c- nn>st:</c-><c- f>AllowNone</c-> <c- p>.</c->
</pre>
   </figure>
   <p>The <a href="interop.tree#DataRegistryTree">interopt:DataRegistryTree</a> defines the resource structure for the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①②">Data Registry</a>, and the data
validation rules for the resources inside it.</p>
   <ul>
    <li data-md>
     <p>It assigns the <a href="interop.shex#DataRegistryShape">interops:DataRegistryShape</a> to validate the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①③">Data Registry</a> instance itself, stored in the
graph of the container resource, <a href="#fig-datareg-registry">as shown</a> in the
previous section</p>
    <li data-md>
     <p>It says that the container includes instances of <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a></p>
    <li data-md>
     <p>It says through <code>st:AllowNone</code> that any resources that do not conform to <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> are
not allowed. This container can <em>only</em> contain resources that conform to <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a>.</p>
   </ul>
   <figure id="fig-datareg-registration-tree">
    <figcaption>Definition of an <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> </figcaption>
<pre class="highlight"><c- g>&lt;#DataRegistrationTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#DataRegistrationShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   </figure>
   <p>Conforming to <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> ensures that the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①④">Data Registry</a> container at <code>https://alice.pod.example/data/#registry</code> only contains valid <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①⓪">Data Registrations</a>.</p>
   <ul>
    <li data-md>
     <p>Any resource added to the <code>https://alice.pod.example/data/</code> container must be
a container per <code>st:expectsType st:ShapeTreeContainer</code>.</p>
    <li data-md>
     <p>It assigns the <a href="interop.shex#DataRegistrationShape">interops:DataRegistrationShape</a> to ensure there is a valid <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①①">Data Registration</a> instance in the
container resource graph.</p>
   </ul>
   <h4 class="heading settled" data-level="5.3.2" id="datareg-instances-structure"><span class="secno">5.3.2. </span><span class="content">Structure of Registered Data Instances in a Data Registration</span><a class="self-link" href="#datareg-instances-structure"></a></h4>
   <p>A given <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①②">Data Registration</a> will contain any number of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④">Registered Data Instances</a> of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑧">shape tree</a> associated
via <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a>.</p>
   <p>Two complementary <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑨">shape trees</a> must be assigned to the same <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①③">Data Registration</a> to ensure:</p>
   <ol>
    <li data-md>
     <p>It is a well-formed <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①④">Data Registration</a></p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①⑤">Data Registration</a> only contains <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤">Registered Data Instances</a> of <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a>.</p>
   </ol>
   <figure>
    <figcaption>A <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①⑥">Data Registration</a> at
  https://alice.pod.example/data/49a4057a-6ade-4a9d-9869-085a00925259/#registration </figcaption>
     <img src="diagrams/dataregistration-structure.svg" width="100%/"> 
   </figure>
   <p>In the figure above, we can observe the combination of the <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> and the <a href="note.tree#note-container-tree">note:note-container-tree</a> on the
same <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①⑦">Data Registration</a> at <code>https://alice.pod.example/data/49a4057a-6ade-4a9d-9869-085a00925259/#registration</code>.</p>
   <p>A <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①⑧">Data Registration</a> can’t know which specific <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①⓪">shape tree</a> will be registered in advance, so the <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> can’t specify the expected contents of the container with <code>st:contains</code>.</p>
   <p>However, it is crucial that the contents of the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration①⑨">Data Registration</a> container
be conformant instances of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①①">shape tree</a> specified in the <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a> property of the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②⓪">Data Registration</a>.</p>
   <p>A second <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①②">shape tree</a> (<a href="note.tree#note-container-tree">note:note-container-tree</a> in the example above)
is associated with the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②①">Data Registration</a> to ensure that what is stored
in the container are conformant instances of the <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a>.</p>
   <h4 class="heading settled" data-level="5.3.3" id="datareg-naming"><span class="secno">5.3.3. </span><span class="content">Naming Registrations and Registered Data Instances</span><a class="self-link" href="#datareg-naming"></a></h4>
   <p>The name of the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②②">Data Registration</a> container resource MUST be a
generated <a href="https://www.ietf.org/rfc/rfc4122.txt">UUID</a>.</p>
   <p>The name of a <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥">Registered Data Instance</a> resource linked to a <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②③">Data Registration</a> through <a href="interop.ttl#hasRegisteredDataInstance">interop:hasRegisteredDataInstance</a> MUST be a generated <a href="https://www.ietf.org/rfc/rfc4122.txt">UUID</a>.</p>
   <h3 class="heading settled" data-level="5.4" id="datareg-permissions"><span class="secno">5.4. </span><span class="content">Permission Model</span><a class="self-link" href="#datareg-permissions"></a></h3>
   <p>Almost all of the collaborative use cases between <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦⓪">Agents</a> in the <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem④">ecosystem</a> are based on data furnished through the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①⑤">Data Registry</a>.</p>
   <p><a data-link-type="dfn" href="#agent" id="ref-for-agent⑦①">Agents</a> grant different levels of access to other <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦②">Agents</a> on a
case-by-case basis through <a href="#authz">§ 6 Data Authorization</a>. Consequently, a signficant amount
of flexibility is needed in permissioning <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②④">Data Registrations</a> and <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦">Registered Data Instances</a>, while at the same time avoiding permission
swamps that become unwieldy to manage.</p>
   <figure>
    <figcaption>Permission model for <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①⑥">Data Registry</a> resources</figcaption>
    <table align="left" class="data permissions">
     <colgroup>
      <col>
      <col>
     <colgroup>
     <colgroup>
     <colgroup span="2">
     <colgroup span="2">
     <thead>
      <tr>
       <th>
       <th>
       <th scope="colgroup">Controller
       <th scope="colgroup">Public
       <th colspan="2" scope="colgroup">Selectively Trusted
       <th colspan="2" scope="colgroup">Selectively Granted
      <tr>
       <th scope="col">Resource
       <th scope="col">Type
       <th scope="col">Access
       <th scope="col">Access
       <th scope="col">Subject
       <th scope="col">Access
       <th scope="col">Subject
       <th scope="col">Access
     <tbody>
      <tr>
       <td><code>/data/</code>
       <td><a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①⑦">Data Registry</a>
       <td>Control
       <td>-
       <td>Authorization Agent
       <td>Control
       <td>-
       <td>-
      <tr>
       <td><code>-- /49a4057a...5259/</code>
       <td><a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②⑤">Data Registration</a>
       <td>Control
       <td>Varies
       <td>Authorization Agent
       <td>Control
       <td>Grantee
       <td>Varies
      <tr>
       <td><code>---- /168997f0...276a/</code>
       <td><a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑧">Registered Data Instance</a>
       <td>Control
       <td>Varies
       <td>Authorization Agent
       <td>Control
       <td>Grantee
       <td>Varies
    </table>
   </figure>
   <h4 class="heading settled" data-level="5.4.1" id="datareg-scopes"><span class="secno">5.4.1. </span><span class="content">Access Scopes for Data Registrations</span><a class="self-link" href="#datareg-scopes"></a></h4>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦③">Agent</a> specifies the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②⑥">Data Registrations</a> and <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑨">Registered Data Instances</a> within them that other <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦④">Agents</a> and/or <a data-link-type="dfn" href="#application" id="ref-for-application⑥⑨">Applications</a> can access, as well as what that mode
of access will be.</p>
   <p>It is imperative that the permission model enable patterns that
allow the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦⑤">Agent</a> to make intuitive decisions, without
having to directly manipulate <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource">acl resources</a> for individual documents
and containers throughout the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①⑧">Data Registry</a>.</p>
   <p>There are two levels of access that must be considered for a given <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②⑦">Data Registration</a>:</p>
   <ul>
    <li data-md>
     <p><strong>All Instances</strong> - Applies to all existing and yet to be created <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①⓪">Registered Data Instances</a> within that <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②⑧">Data Registration</a>.</p>
    <li data-md>
     <p><strong>Specific Instance</strong> - Applies only to specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①①">Registered Data Instances</a> within that <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration②⑨">Data Registration</a>.</p>
   </ul>
   <h5 class="heading settled" data-level="5.4.1.1" id="datareg-all"><span class="secno">5.4.1.1. </span><span class="content">Permissions for All Registered Data Instances</span><a class="self-link" href="#datareg-all"></a></h5>
   <p>The <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode">access modes</a> listed in the table below can be combined as needed and
granted to a given <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject">Authorization Subject</a>.</p>
   <p class="issue" id="issue-c8c51af1"><a class="self-link" href="#issue-c8c51af1"></a> WAC doesn’t have any mechanism to extend inherited permissions. The
presence of a specific ACL on a resource negates all inherited permissions,
making it impossible to “slightly adjust” or “modify” a resource
while maintaining the permissions inherited for it.</p>
   <figure>
    <figcaption>Modes of access for a <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③⓪">Data Registration</a></figcaption>
    <table align="left" class="data">
     <colgroup>
      <col>
      <col>
     <thead>
      <tr>
       <th scope="col">Mode
       <th scope="col">Resultant Access
     <tbody>
      <tr>
       <th scope="row">Read
       <td>Can read all existing and yet to be created <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①②">Registered Data Instances</a>. Includes being able to see the full
            list of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①③">Registered Data Instances</a> in the registration.
      <tr>
       <th scope="row">Write
       <td>Can modify the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③①">Data Registration</a>, and all existing <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①④">Registered Data Instances</a> within it.
            Can create new <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①⑤">Registered Data Instances</a>,
            and can delete them.
      <tr>
       <th scope="row">Control
       <td>Can change permissions on the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③②">Data Registration</a>, as well
            as any <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①⑥">Registered Data Instances</a> within it.
      <tr>
       <th scope="row">Append
       <td>Can only create new <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①⑦">Registered Data Instances</a> within the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③③">Data Registration</a>.
      <tr>
       <th scope="row">Created Resource Permissions
       <td>These determine the permissions assigned to <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①⑧">Registered Data Instances</a> created by the <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①">Authorization Subject</a>,
        when that <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject②">Authorization Subject</a> has been granted Write or Append <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode①">access modes</a>.
    </table>
   </figure>
   <p class="issue" id="issue-d79966ae"><a class="self-link" href="#issue-d79966ae"></a> Identify the scheme through which created resource permissions are
derived if they are not specified explicitly.</p>
   <p class="note" role="note"><span>Note:</span> Given the current limitations of <a data-link-type="biblio" href="#biblio-wac">[WAC]</a>, specifically the inability
to extend inherited permissions, it is likely that managing permissions
across all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance①⑨">Registered Data Instances</a> of a <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③④">Data Registrations</a> will need
to be managed directly in <a href="#datareg-specific">§ 5.4.1.2 Permissions for a Specific Registered Data Instance</a>, rather than inheriting
from the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③⑤">Data Registration</a>.</p>
   <h5 class="heading settled" data-level="5.4.1.2" id="datareg-specific"><span class="secno">5.4.1.2. </span><span class="content">Permissions for a Specific Registered Data Instance</span><a class="self-link" href="#datareg-specific"></a></h5>
   <p>The <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode②">access modes</a> listed in the table below can be combined as needed and
granted to a given <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject③">Authorization Subject</a> for a specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②⓪">Registered Data Instance</a>.</p>
   <figure>
    <figcaption>Modes of access for a Specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②①">Registered Data Instance</a></figcaption>
    <table align="left" class="data">
     <colgroup>
      <col>
      <col>
     <thead>
      <tr>
       <th scope="col">Mode
       <th scope="col">Resultant Access
     <tbody>
      <tr>
       <th scope="row">Read
       <td>Can list and read all resources within the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②②">Registered Data Instance</a>.
      <tr>
       <th scope="row">Write
       <td>Can modify the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②③">Registered Data Instance</a> and any resources
            within it, including creating and deleting resources.
      <tr>
       <th scope="row">Control
       <td>Can change permissions on the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②④">Registered Data Instance</a> and any resources within it.
      <tr>
       <th scope="row">Append
       <td>Can create resources within the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②⑤">Registered Data Instance</a>.
            Can add to a resource in the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②⑥">Registered Data Instance</a> but cannot
            remove anything from it, or delete it.
      <tr>
       <th scope="row">Created Resource Permissions
       <td>These determine the permissions assigned to
        resources within the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②⑦">Registered Data Instance</a> created by the <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject④">Authorization Subject</a>, when that <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject⑤">Authorization Subject</a> has
        been granted Write or Append <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode③">access modes</a>.
    </table>
   </figure>
   <h3 class="heading settled" data-level="5.5" id="datareg-registrations"><span class="secno">5.5. </span><span class="content">Registering Data</span><a class="self-link" href="#datareg-registrations"></a></h3>
   <p>Registering data in a <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry①⑨">Data Registry</a> is primarily concerned with the
following two operations:</p>
   <ul>
    <li data-md>
     <p>Registering new <em>data types</em> as <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③⑥">Data Registrations</a></p>
    <li data-md>
     <p>Storing and registering new <em>instances of those data types</em> as <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②⑧">Registered Data Instances</a></p>
   </ul>
   <p>This section explains the mechanics of those operations.</p>
   <p class="note" role="note"><span>Note:</span> Managing <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③⑦">Data Registrations</a> and the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance②⑨">Registered Data Instances</a> contained within them is inextricably linked to permissioning the data
for effective use and secure collaboration. This is covered at length
in <a href="#authz">§ 6 Data Authorization</a>.</p>
   <h4 class="heading settled" data-level="5.5.1" id="datareg-trustedagent"><span class="secno">5.5.1. </span><span class="content">Enlisting the help of a trusted agent</span><a class="self-link" href="#datareg-trustedagent"></a></h4>
   <p>In almost every case, an <a data-link-type="dfn" href="#application" id="ref-for-application⑦⓪">Application</a> will not be trusted to manage <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②⓪">Data Registries</a>, and will need the assistance of a <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent⑥">trusted agent</a> that has been authorized to assist with data registration for a given <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦⑥">Agent</a>.</p>
   <p>Untrusted <a data-link-type="dfn" href="#application" id="ref-for-application⑦①">Applications</a> can enlist the help of the <a data-link-type="dfn" href="#data-authorization-agent" id="ref-for-data-authorization-agent">Data Authorization Agent</a> to assist with privileged operations like registering new <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③⑧">Data Registrations</a> and changing permissions.</p>
   <p>The <a data-link-type="dfn" href="#data-authorization-agent" id="ref-for-data-authorization-agent①">Data Authorization Agent</a> trusted by a given <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦⑦">Agent</a> is linked
with them through the <a href="interop.ttl#trustsForDataAuthorization">interop:trustsForDataAuthorization</a> property.</p>
   <figure>
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent⑦⑧">Agent</a> at https://alice.pod.example/profile/id#me linking to Data
  Authorization Agent</figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>trustsForDataAuthorization</c-> <c- g>&lt;https://trusted.example/da/></c-> <c- p>.</c->
</pre>
   </figure>
   <p>An untrusted <a data-link-type="dfn" href="#application" id="ref-for-application⑦②">Application</a> must work through the trusted <a data-link-type="dfn" href="#data-authorization-agent" id="ref-for-data-authorization-agent②">Data Authorization Agent</a> anytime that <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration③⑨">Data Registrations</a> need to be
managed or additional access is needed to the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑦⑨">Agent’s</a> data.</p>
   <p class="issue" id="issue-50ef623f"><a class="self-link" href="#issue-50ef623f"></a> Patterns to interface with Trusted Agents will be detailed
in the Trusted Agents section.</p>
   <h4 class="heading settled" data-level="5.5.2" id="datareg-creating"><span class="secno">5.5.2. </span><span class="content">Creating the data registration entry</span><a class="self-link" href="#datareg-creating"></a></h4>
   <p><a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④⓪">Data Registrations</a> must be created in conformance with the
documented <a href="#datareg-structure">§ 5.3 Structure and Validation</a> pattern.</p>
   <p>The <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> must be assigned to the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④①">Data Registration</a> resource.</p>
   <figure id="fig-datareg-create-registration-tree">
    <figcaption>Definition of an <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> </figcaption>
<pre class="highlight"><c- g>&lt;#DataRegistrationTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#DataRegistrationShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   </figure>
   <p>The <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a> stipulates the following:</p>
   <ol>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④②">Data Registration</a> resource must be a container per <code>st:expectsType st:ShapeTreeContainer</code>.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④③">Data Registration</a> instance data must be added to the RDF
graph of that container, and validate successfully
against the <a href="interop.shex#DataRegistrationShape">interops:DataRegistrationShape</a>.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④④">Data Registration’s</a> properties must be set as follows:</p>
     <ul>
      <li data-md>
       <p><a href="interop.ttl#registeredBy">interop:registeredBy</a>: linked to the <a data-link-type="dfn" href="#identity" id="ref-for-identity⑥">identity</a> of the <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent①">authenticated agent</a> that invoked the registration
(i.e. the <a data-link-type="dfn" href="#webid" id="ref-for-webid①">webid</a> of the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧⓪">Agent</a>)</p>
      <li data-md>
       <p><a href="interop.ttl#registeredWith">interop:registeredWith</a>: linked to the <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid⑦">ApplicationID</a> of the <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent⑦">trusted agent</a> that facilitated the
registration, typically the <a data-link-type="dfn" href="#data-authorization-agent" id="ref-for-data-authorization-agent③">data authorization agent</a>.</p>
      <li data-md>
       <p><a href="interop.ttl#registeredAt">interop:registeredAt</a>: the <code>xsd:dateTime</code> of
the registration.</p>
      <li data-md>
       <p><a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a>: URI of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①③">shape tree</a> that is being registered.</p>
     </ul>
   </ol>
   <p>The <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①④">shape tree</a> associated with the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④⑤">Data Registration</a> via <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a> must also be assigned to <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④⑥">Data Registration</a> resource,
per the instructions in <a href="#datareg-structure">§ 5.3 Structure and Validation</a>. This ensures that only
instances of that particular shape tree are added to the container.</p>
   <p>The <a href="interop.ttl#hasRegisteredDataInstance">interop:hasRegisteredDataInstance</a> property is not populated until the first <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③⓪">Registered Data Instance</a> is
added to the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④⑦">Data Registration</a>.</p>
   <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④⑧">Data Registration</a> container must be named in
accordance with the instructions in <a href="#datareg-naming">§ 5.3.3 Naming Registrations and Registered Data Instances</a>.</p>
   <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration④⑨">Data Registration</a> container must be added as a child
member of the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②①">Data Registry</a> container.</p>
   <p>Access to the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤⓪">Data Registration</a> must be set per the
instructions in <a href="#datareg-permissions">§ 5.4 Permission Model</a>.</p>
   <p>The <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤①">Data Registration</a> must be associated with the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②②">Data Registry</a> through the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property in
the graph of the <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②③">Data Registry</a>.</p>
   <h4 class="heading settled" data-level="5.5.3" id="datareg-instances"><span class="secno">5.5.3. </span><span class="content">Creating registered data instances</span><a class="self-link" href="#datareg-instances"></a></h4>
   <p>Creation of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③①">Registered Data Instances</a> is a matter of storing instance
resources in conformance with the <a href="interop.ttl#registeredShapeTree">interop:registeredShapeTree</a>.</p>
   <p>Each new <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③②">Registered Data Instance</a> must be linked to the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤②">Data Registration</a> via <a href="interop.ttl#hasRegisteredDataInstance">interop:hasRegisteredDataInstance</a>.</p>
   <h2 class="heading settled" data-level="6" id="authz"><span class="secno">6. </span><span class="content">Data Authorization</span><a class="self-link" href="#authz"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="authz-overview"><span class="secno">6.1. </span><span class="content">Overview</span><a class="self-link" href="#authz-overview"></a></h3>
   <p>The ability for one <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧①">Agent</a> to grant others access to data in their control
is a fundamental element of a collaborative interoperable ecosystem.</p>
   <p>Data Authorization represents several key elements that
work together to grant, adjust, and rescind access to data controlled
by an ecosystem participant.</p>
   <ul>
    <li data-md>
     <p>A common way to express <a href="#needs">§ 7 Access Needs</a> allows <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem⑤">ecosystem</a> participants to
convey the types or specific instances of data they require.</p>
    <li data-md>
     <p><a href="#grants">§ 8 Access Grants</a> record access decisions made by an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧②">Agent</a> on the data in their
control.</p>
    <li data-md>
     <p><a href="#receipts">§ 9 Access Receipts</a> reflect <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant">Access Grants</a> that one <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧③">Agent</a> has provided
to another <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧④">Agent</a></p>
   </ul>
   <h3 class="heading settled" data-level="6.2" id="authz-workflows"><span class="secno">6.2. </span><span class="content">Workflows</span><a class="self-link" href="#authz-workflows"></a></h3>
   <p>The following workflows represent the authorization patterns
enabled by this specification.</p>
   <h4 class="heading settled" data-level="6.2.1" id="authz-apprequest"><span class="secno">6.2.1. </span><span class="content">Application Requests Access</span><a class="self-link" href="#authz-apprequest"></a></h4>
   <p>Let <code>CONTROLLER</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧⑤">Agent</a> that wants to give an <a data-link-type="dfn" href="#application" id="ref-for-application⑦③">Application</a> <code>APP</code> access to data in their control.</p>
   <p>Let <code>APP</code> be the <a data-link-type="dfn" href="#application" id="ref-for-application⑦④">Application</a> that <code>CONTROLLER</code> wishes to use, and must
    grant access to. <code>APP</code> may be an <a data-link-type="dfn" href="#application" id="ref-for-application⑦⑤">Application</a> that is piloted by the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧⑥">Agent</a>, or it may be an autonomous service that operates independently.
    The following workflow applies to both cases.</p>
   <p>Let <code>AUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑦⑥">Application</a> trusted by the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧⑦">Agent</a> for
    authorization and access control.</p>
   <ol>
    <li data-md>
     <p><code>CONTROLLER</code> decides they’d like to use <code>APP</code></p>
    <li data-md>
     <p><code>CONTROLLER</code> provides their <a data-link-type="dfn" href="#identity" id="ref-for-identity⑦">identity</a> to <code>APP</code></p>
    <li data-md>
     <p><code>APP</code> dereferences the <a data-link-type="dfn" href="#identity" id="ref-for-identity⑧">identity</a> to
get <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document②">identity profile document</a>.</p>
    <li data-md>
     <p><code>APP</code> discovers that <code>AUTHZ</code> is the <a data-link-type="dfn">Authorization Agent</a> for <code>CONTROLLER</code> via the <a href="#trusted-load">§ 11.2.1 Load Trusted Agent</a> operation.</p>
    <li data-md>
     <p><code>APP</code> redirects <code>CONTROLLER</code> to <code>AUTHZ</code> via the <a href="#trusted-redirect">§ 11.2.2 Redirect to Trusted Agent</a> operation.</p>
     <ol>
      <li data-md>
       <p><code>AUTHZ</code> looks in <code>APP</code>'s <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document②">application profile document</a> for <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②">Access Need Groups</a> with an <code>interop:accessScenario</code> of <code>interop:PersonalAccess</code></p>
      <li data-md>
       <p>Any <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③">Access Need Groups</a> found are passed to the <a href="#grants-present">§ 8.4.10 Present Grant</a> operation, which presents them to <code>CONTROLLER</code>.</p>
      <li data-md>
       <p><code>CONTROLLER</code> decides whether to grant <code>APP</code> the access requested.</p>
      <li data-md>
       <p><code>CONTROLLER</code> authorizes the requested <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④">Access Need Groups</a> and <a data-link-type="dfn" href="#access-need" id="ref-for-access-need">Access Needs</a>:</p>
       <ol>
        <li data-md>
         <p>The <a href="#appreg-new">Register Application</a> operation is called
to register <code>APP</code> in <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry①⑨">Application Registry</a>.</p>
        <li data-md>
         <p>The <a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> operation is invoked</p>
         <ol>
          <li data-md>
           <p>An <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①">Access Grant</a> is stored in <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry">Access Grant Registry</a>.</p>
          <li data-md>
           <p><a href="#grants-applyperms">§ 8.4.9 Apply Permissions</a> is called to apply permissions based
on the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②">Access Grant</a>.</p>
          <li data-md>
           <p><a href="#receipts-provide">§ 9.4.1 Provide Access Receipt</a> is called to store the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt">Access Receipt</a>. The Application has set <code>interop:receivesAccessReceipt</code> to <code>ReceiptInRegistration</code>, so the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①">Access Receipt</a> is
stored in the <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration③②">Application Registration</a> for <code>APP</code>.</p>
         </ol>
       </ol>
      <li data-md>
       <p><code>AUTHZ</code> redirects <code>CONTROLLER</code> back to <code>APP</code> via the <a href="#trusted-return">§ 11.2.3 Return from Trusted Agent</a> operation.</p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="6.2.2" id="authz-agentrequest"><span class="secno">6.2.2. </span><span class="content">Another Agent Requests Access</span><a class="self-link" href="#authz-agentrequest"></a></h4>
   <p>Let <code>REQUESTER</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧⑧">Agent</a> requesting data from another <a data-link-type="dfn" href="#agent" id="ref-for-agent⑧⑨">Agent</a> <code>CONTROLLER</code> with a known <a data-link-type="dfn" href="#identity" id="ref-for-identity⑨">identity</a>.</p>
   <p>Let <code>REQAPP</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑦⑦">Application</a> piloted by <code>REQUESTER</code></p>
   <p>Let <code>RAUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑦⑧">Application</a> trusted by <code>REQUESTER</code> for
    authorization and access control.</p>
   <p>Let <code>CONTROLLER</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨⓪">Agent</a> in control of data that <code>REQUESTER</code> would like to access.</p>
   <p>Let <code>CAUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑦⑨">Application</a> trusted by <code>CONTROLLER</code> for
    authorization and access control.</p>
   <ol>
    <li data-md>
     <p><code>REQUESTER</code> would like access to <code>CONTROLLER</code>'s data.</p>
    <li data-md>
     <p><code>REQUESTER</code> provides <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#identity" id="ref-for-identity①⓪">identity</a> to <code>REQAPP</code>.</p>
    <li data-md>
     <p><code>REQAPP</code> dereferences <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#identity" id="ref-for-identity①①">identity</a> to get <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document③">identity profile document</a>.</p>
    <li data-md>
     <p><code>REQAPP</code> uses <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑤">Access Need Groups</a> from its <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document③">application profile document</a> with an <code>interop:accessScenario</code> of <code>interop:SharedAccess</code> to identify <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑥">Access Need Groups</a> to request
from <code>CONTROLLER</code>.</p>
    <li data-md>
     <p><code>CONTROLLER</code> has an <code>interop:receivesAccessReceipt</code> value of <code>ReceiptInMessage</code> in their <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document④">identity profile document</a>.</p>
    <li data-md>
     <p><code>REQAPP</code> puts the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑦">Access Need Groups</a> into an <a data-link-type="dfn" href="#access-request" id="ref-for-access-request">Access Request</a> and posts it to the <a data-link-type="dfn">Access Inbox</a> identified by <code>interop:hasAccessInbox</code> in the <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document⑤">identity profile document</a>.</p>
    <li data-md>
     <p><code>CAUTHZ</code> monitors <code>CONTROLLER</code>'s access inbox autonomously. It notifies <code>CONTROLLER</code> when a new <a data-link-type="dfn" href="#access-request" id="ref-for-access-request①">Access Request</a> is received.</p>
     <ol>
      <li data-md>
       <p><code>CONTROLLER</code> clicks a link in the notification from <code>CAUTHZ</code>,
opening the <code>CAUTHZ</code> user interface and invoking the <a href="#grants-present">§ 8.4.10 Present Grant</a> operation using the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑧">Access Need Groups</a> from
the <a data-link-type="dfn" href="#access-request" id="ref-for-access-request②">Access Request</a>.</p>
      <li data-md>
       <p><code>CONTROLLER</code> determines whether they wish to grant the access requested.</p>
      <li data-md>
       <p>Assuming <code>CONTROLLER</code> authorizes a minimum of the
required <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑨">Access Need Groups</a> and <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①">Access Needs</a>,
the <a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> operation is invoked.</p>
      <li data-md>
       <p><a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> stores an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③">Access Grant</a> in <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①">Access Grant Registry</a>.</p>
       <ol>
        <li data-md>
         <p><a href="#grants-applyperms">§ 8.4.9 Apply Permissions</a> is called to apply permissions based on the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④">Access Grant</a>.</p>
        <li data-md>
         <p><a href="#receipts-provide">§ 9.4.1 Provide Access Receipt</a> is called to deliver the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②">Access Receipt</a>.</p>
         <ol>
          <li data-md>
           <p><code>CAUTHZ</code> dereferences <code>REQUESTER</code>'s <a data-link-type="dfn" href="#identity" id="ref-for-identity①②">identity</a> to get <code>REQUESTER</code>'s <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document⑥">identity profile document</a>.</p>
          <li data-md>
           <p><code>REQUESTER</code> has set <code>interop:receivesAccessReceipt</code> to <code>ReceiptInMessage</code>, so the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③">Access Receipt</a> is posted
to the access inbox identified via <code>hasAccessInbox</code> in <code>REQUESTER</code>'s '<a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document⑦">identity profile document</a>.</p>
         </ol>
       </ol>
     </ol>
    <li data-md>
     <p><code>RAUTHZ</code> monitors <code>REQUESTER</code>'s access inbox autonomously. It notifies <code>REQUESTER</code> when a new <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④">Access Receipt</a> is received.</p>
     <ol>
      <li data-md>
       <p><code>REQUESTER</code> clicks the link in the notification, opening the <code>RAUTHZ</code> user interface and invoking the <a href="#receipts-present">§ 9.4.4 Present Access Receipt</a> operation to approve the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤">Access Receipt</a>.</p>
      <li data-md>
       <p><code>REQUESTER</code> accepts the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑥">Access Receipt</a>, and <code>RAUTHZ</code> invokes the <a href="#receipts-record">§ 9.4.2 Record Access Receipt</a> operation.</p>
       <ol>
        <li data-md>
         <p><a href="#receipts-record">§ 9.4.2 Record Access Receipt</a> is called to store the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑦">Access Receipt</a> in <code>REQUESTER</code>'s <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry">Access Receipt Registry</a>.</p>
        <li data-md>
         <p><a href="#remote-update">§ 10.4.1 Update Remote Data</a> is called to update <code>REQUESTER</code>'s <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry">Remote Data Registry</a> to reflect what is in the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑧">Access Receipt</a>.</p>
       </ol>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="6.2.3" id="authz-controllershare"><span class="secno">6.2.3. </span><span class="content">Controller Shares Access</span><a class="self-link" href="#authz-controllershare"></a></h4>
   <p>Let <code>CONTROLLER</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨①">Agent</a> in control of data that
    they would like to authorize <code>RECEIVER</code> to access.</p>
   <p>Let <code>CAPP</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧⓪">Application</a> piloted by <code>CONTROLLER</code></p>
   <p>Let <code>CAUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧①">Application</a> trusted by <code>CONTROLLER</code> for
    authorization and access control.</p>
   <p>Let <code>RECEIVER</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨②">Agent</a> receiving access to data from another <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨③">Agent</a> <code>CONTROLLER</code>.</p>
   <p>Let <code>RAUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧②">Application</a> trusted by <code>RECEIVER</code> for
    authorization and access control.</p>
   <ol>
    <li data-md>
     <p><code>CONTROLLER</code> would like to give <code>RECEIVER</code> access to their data.</p>
    <li data-md>
     <p><code>CONTROLLER</code> provides <code>RECEIVER</code>'s <a data-link-type="dfn" href="#identity" id="ref-for-identity①③">identity</a> to <code>CAPP</code>.</p>
    <li data-md>
     <p><code>CAPP</code> dereferences <code>RECEIVER</code>'s <a data-link-type="dfn" href="#identity" id="ref-for-identity①④">identity</a> to get <code>RECEIVER</code>'s <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document⑧">identity profile document</a>.</p>
    <li data-md>
     <p><code>CAPP</code> discovers that <code>CAUTHZ</code> is the <a data-link-type="dfn">Authorization Agent</a> for <code>CONTROLLER</code> via the <a href="#trusted-load">§ 11.2.1 Load Trusted Agent</a> operation.</p>
    <li data-md>
     <p><code>CAPP</code> redirects <code>CONTROLLER</code> to <code>CAUTHZ</code> via the <a href="#trusted-redirect">§ 11.2.2 Redirect to Trusted Agent</a> operation.</p>
     <ol>
      <li data-md>
       <p><code>CAUTHZ</code> looks in <code>CAPP</code>'s <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document④">application profile document</a> for <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①⓪">Access Need Groups</a> with an <code>interop:accessScenario</code> of <code>interop:SharedAccess</code></p>
      <li data-md>
       <p>Any <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①①">Access Need Groups</a> found are passed to the <a href="#grants-present">§ 8.4.10 Present Grant</a> operation, which presents them to <code>CONTROLLER</code>.</p>
      <li data-md>
       <p><code>CONTROLLER</code> authorizes the data to share with <code>RECEIVER</code> based on
the provided <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①②">Access Need Groups</a>.</p>
       <ol>
        <li data-md>
         <p>The <a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> operation is invoked</p>
         <ol>
          <li data-md>
           <p>An <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑤">Access Grant</a> is stored in <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②">Access Grant Registry</a>.</p>
          <li data-md>
           <p><a href="#grants-applyperms">§ 8.4.9 Apply Permissions</a> is called to apply permissions based
on the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑥">Access Grant</a>.</p>
          <li data-md>
           <p><a href="#receipts-provide">§ 9.4.1 Provide Access Receipt</a> is called to store the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑨">Access Receipt</a>. <code>RECEIVER</code> has set <code>interop:receivesAccessReceipt</code> to <code>ReceiptInMessage</code>, so the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①⓪">Access Receipt</a> is posted
to the access inbox identified via <code>hasAccessInbox</code> in <code>RECEIVER</code>'s '<a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document⑨">identity profile document</a>.</p>
         </ol>
       </ol>
      <li data-md>
       <p><code>CAUTHZ</code> redirects <code>CONTROLLER</code> back to <code>CAPP</code> via the <a href="#trusted-return">§ 11.2.3 Return from Trusted Agent</a> operation.</p>
     </ol>
    <li data-md>
     <p><code>RAUTHZ</code> monitors <code>RECEIVER</code>'s access inbox autonomously. It notifies <code>RECEIVER</code> when a new <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①①">Access Receipt</a> is received.</p>
     <ol>
      <li data-md>
       <p><code>RECEIVER</code> clicks the link in the notification, opening the <code>RAUTHZ</code> user interface and invoking the <a href="#receipts-present">§ 9.4.4 Present Access Receipt</a> operation to approve the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①②">Access Receipt</a>.</p>
      <li data-md>
       <p><code>RECEIVER</code> accepts the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①③">Access Receipt</a>, and <code>RAUTHZ</code> invokes the <a href="#receipts-record">§ 9.4.2 Record Access Receipt</a> operation.</p>
       <ol>
        <li data-md>
         <p><a href="#receipts-record">§ 9.4.2 Record Access Receipt</a> is called to store the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①④">Access Receipt</a> in <code>RECEIVER</code>'s <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry①">Access Receipt Registry</a>.</p>
        <li data-md>
         <p><a href="#remote-update">§ 10.4.1 Update Remote Data</a> is called to update <code>RECEIVER</code>'s <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①">Remote Data Registry</a> to reflect what is in the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①⑤">Access Receipt</a>.</p>
       </ol>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="6.2.4" id="authz-controllerinvite"><span class="secno">6.2.4. </span><span class="content">Controller Shares Access with Invited Agent</span><a class="self-link" href="#authz-controllerinvite"></a></h4>
   <p>Controlling Agent initiates sharing their data with an Agent that doesn’t
have an identity or a pod.</p>
   <p>Let <code>CONTROLLER</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨④">Agent</a> in control of data that
    they would like to authorize <code>INVITEE</code> to access.</p>
   <p>Let <code>CAPP</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧③">Application</a> piloted by <code>CONTROLLER</code></p>
   <p>Let <code>CAUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧④">Application</a> trusted by <code>CONTROLLER</code> for
    authorization and access control.</p>
   <p>Let <code>CISERVICE</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧⑤">Application</a> trusted by <code>CONTROLLER</code> to validate
    invitations made to <code>INVITEE</code>s.</p>
   <p>Let <code>INVITEE</code> be a person without an <a data-link-type="dfn" href="#identity" id="ref-for-identity①⑤">identity</a> or <a data-link-type="dfn" href="#pod" id="ref-for-pod①">pod</a> that <code>CONTROLLER</code> would like to authorize to access their data. <code>CONTROLLER</code> knows their
    e-mail address and mobile phone number.</p>
   <p>LET <code>PROVIDER</code> be a service that hosts <a data-link-type="dfn" href="#identity" id="ref-for-identity①⑥">identities</a> and <a data-link-type="dfn" href="#pod" id="ref-for-pod②">pods</a> who
    provisions the same for <code>INVITEE</code></p>
   <p>Let <code>PAUTHZ</code> be an <a data-link-type="dfn" href="#application" id="ref-for-application⑧⑥">Application</a> offered by <code>PROVIDER</code> and trusted by <code>INVITEE</code> for authorization and access control.</p>
   <ol>
    <li data-md>
     <p><code>CONTROLLER</code> would like to give <code>INVITEE</code> access to their data.</p>
    <li data-md>
     <p><code>CONTROLLER</code> provides <code>INVITEE</code>'s e-mail address and mobile number to <code>CAPP</code>.</p>
    <li data-md>
     <p><code>CAPP</code> discovers that <code>CAUTHZ</code> is the <a data-link-type="dfn">Authorization Agent</a> for <code>CONTROLLER</code> via the <a href="#trusted-load">§ 11.2.1 Load Trusted Agent</a> operation.</p>
    <li data-md>
     <p><code>CAPP</code> redirects <code>CONTROLLER</code> to <code>CAUTHZ</code> via the <a href="#trusted-redirect">§ 11.2.2 Redirect to Trusted Agent</a> operation.</p>
     <ol>
      <li data-md>
       <p><code>CAUTHZ</code> looks in <code>CAPP</code>'s <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document⑤">application profile document</a> for <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①③">Access Need Groups</a> with an <code>interop:accessScenario</code> of <code>interop:SharedAccess</code></p>
      <li data-md>
       <p>Any <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①④">Access Need Groups</a> found are passed to the <a href="#grants-present">§ 8.4.10 Present Grant</a> operation, which presents them to <code>CONTROLLER</code>.</p>
      <li data-md>
       <p><code>CONTROLLER</code> authorizes the data to share with <code>INVITEE</code> based on
the provided <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①⑤">Access Need Groups</a>.</p>
       <ol>
        <li data-md>
         <p>The <a href="#grants-recordinvitation">§ 8.4.6 Record Invitation</a> operation is invoked</p>
         <ol>
          <li data-md>
           <p>An <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation">Access Invitation</a> is stored in <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry③">Access Grant Registry</a>.</p>
          <li data-md>
           <p><a href="#grants-deliverinvitation">§ 8.4.7 Deliver Invitation</a> is called to create an
invitation entry for each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel">Access Invitation Channel</a> in
the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①">Access Invitation</a> with <code>CISERVICE</code></p>
          <li data-md>
           <p>For each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①">Access Invitation Channel</a> in the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②">Access Invitation</a></p>
           <ol>
            <li data-md>
             <p><code>CISERVICE</code> sends a notification to <code>INIVITEE</code> using the
medium associated with the <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel②">Access Invitation Channel</a> type</p>
           </ol>
         </ol>
       </ol>
      <li data-md>
       <p><code>CAUTHZ</code> redirects <code>CONTROLLER</code> back to <code>CAPP</code> via the <a href="#trusted-return">§ 11.2.3 Return from Trusted Agent</a> operation.</p>
     </ol>
    <li data-md>
     <p><code>INVITEE</code> receives a notification associated with one of the <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel③">Access Invitation Channels</a>.</p>
     <ol>
      <li data-md>
       <p><code>INVITEE</code> clicks a link in the notification to register an
identity and pod with <code>PROVIDER</code>.</p>
      <li data-md>
       <p><code>INVITEE</code> clicks a link in the notification bringing them to the <code>CISERVICE</code> user interface to validate the invitation by
invoking <a href="#grants-validateinvitation">§ 8.4.8 Validate Invitation</a>.</p>
       <ol>
        <li data-md>
         <p>If validation is successful, but there are other <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel④">Access Invitation Channels</a> left to validate, the <code>INVITEE</code> will
be prompted to validate them. Continue until failure or
validation of all <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑤">Access Invitation Channels</a> are succesful.</p>
        <li data-md>
         <p><code>CISERVICE</code> initializes a new <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑦">Access Grant</a> via <a href="#grants-initializegrant">§ 8.4.1 Initialize Grant</a>, using the contents of
the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③">Access Invitation</a>, and the new registered <a data-link-type="dfn" href="#identity" id="ref-for-identity①⑦">identity</a> for <code>INVITEE</code>.</p>
        <li data-md>
         <p><code>CISERVICE</code> calls <a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> using the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑧">Access Grant</a> initialized from the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation④">Access Invitation</a></p>
         <ol>
          <li data-md>
           <p>An <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑨">Access Grant</a> is stored in <code>CONTROLLER</code>'s <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry④">Access Grant Registry</a>.</p>
          <li data-md>
           <p><a href="#grants-applyperms">§ 8.4.9 Apply Permissions</a> is called to apply permissions
based on the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①⓪">Access Grant</a>.</p>
          <li data-md>
           <p><a href="#receipts-provide">§ 9.4.1 Provide Access Receipt</a> is called to store the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①⑥">Access Receipt</a>. <code>INVITEE</code> has set <code>interop:receivesAccessReceipt</code> to <code>ReceiptInMessage</code>, so the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①⑦">Access Receipt</a> is posted
to the access inbox identified via <code>hasAccessInbox</code> in <code>INVITEE</code>'s '<a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①⓪">identity profile document</a>.</p>
         </ol>
       </ol>
     </ol>
   </ol>
   <p class="issue" id="issue-d5f0eb31"><a class="self-link" href="#issue-d5f0eb31"></a> Should we assume that CISERVICE is able to manage grants, or should
it need to redirect through the authorization agent? Perhaps the recommendation
should be that they are combined? Bad separation of concerns?</p>
   <p class="issue" id="issue-d1e70f49"><a class="self-link" href="#issue-d1e70f49"></a> This doesn’t take account a sequencing of validation steps from
one channel to another.</p>
   <h2 class="heading settled" data-level="7" id="needs"><span class="secno">7. </span><span class="content">Access Needs</span><a class="self-link" href="#needs"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="needs-overview"><span class="secno">7.1. </span><span class="content">Overview</span><a class="self-link" href="#needs-overview"></a></h3>
   <p><a data-link-type="dfn" href="#agent" id="ref-for-agent⑨⑤">Agents</a> or <a data-link-type="dfn" href="#application" id="ref-for-application⑧⑦">Applications</a> in the <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem⑥">ecosystem</a> often require access to
data controlled by some other <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨⑥">Agent</a>. Consequently, a common way to explain
and communicate data needs between participants in the <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem⑦">ecosystem</a> is
required.</p>
   <p>A given <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨⑦">Agent</a> or <a data-link-type="dfn" href="#application" id="ref-for-application⑧⑧">Application</a> expresses their access needs by
providing one or more <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①⑥">Access Need Groups</a> to the <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨⑧">Agent</a> controlling
the data they require access to. The channels through which these may be
communicated are detailed in <a href="#authz-workflows">§ 6.2 Workflows</a>.</p>
   <p>The <a href="#compile-group">§ 7.3.1 Compile Access Need Group</a> operation processes each <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①⑦">Access Need Group</a> received by the controlling <a data-link-type="dfn" href="#agent" id="ref-for-agent⑨⑨">Agent</a>. A <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group">Compiled Access Group</a> is
generated for each <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①⑧">Access Need Group</a> that was received.</p>
   <p><a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①">Compiled Access Groups</a> and the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access">Compiled Accesses</a> associated
with them are used as input to the <a href="#grants-present">§ 8.4.10 Present Grant</a> operation,
and are stored as part of the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①①">Access Grant</a> by the <a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> operation.</p>
   <h3 class="heading settled" data-level="7.2" id="needs-datamodel"><span class="secno">7.2. </span><span class="content">Data Model</span><a class="self-link" href="#needs-datamodel"></a></h3>
   <h4 class="heading settled" data-level="7.2.1" id="needs-datamodel-summary"><span class="secno">7.2.1. </span><span class="content">Summary</span><a class="self-link" href="#needs-datamodel-summary"></a></h4>
   <p>An <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group①⑨">Access Need Group</a> links to one or more <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need">Root Access Needs</a> via the <a href="#classAccessNeedGroup">hasAccessNeed</a> property. When the <a href="#compile-group">§ 7.3.1 Compile Access Need Group</a> operation follows a <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need①">Root Access Need</a>, it looks for <a data-link-type="dfn" href="#access-need-override" id="ref-for-access-need-override">Access Need Overrides</a> linked to the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②⓪">Access Need Group</a> via <a href="#classAccessNeedGroup">hasAccessNeedOverride</a> to change the defaults
inherited from the <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need②">Root Access Need</a>, or the most recent <a data-link-type="dfn" href="#access-need-override" id="ref-for-access-need-override①">Access Need Override</a>.</p>
   <p>An <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②">Access Need</a> is associated with one <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①⑤">shape tree</a> via <a href="#classAccessNeed">interop:registeredShapeTree</a>.</p>
   <p>A <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②">Compiled Access Group</a> is linked to the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②①">Access Need Group</a> it
was generated from via <a href="#classCompiledAccessGroup">fromAccessNeedGroup</a>.
It links to an <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator">Access Need Group Decorator</a> via <a href="#classCompiledAccessGroup">hasAccessNeedGroupDecorator</a>.</p>
   <p>It links to one or more <a data-link-type="dfn" href="#root-compiled-access" id="ref-for-root-compiled-access">Root Compiled Accesses</a> via <a href="#classCompiledAccess">hasCompiledAccess</a>. Each <a data-link-type="dfn" href="#root-compiled-access" id="ref-for-root-compiled-access①">Root Compiled Access</a> represents
a hierarchy of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①">Compiled Accesses</a> corresponding with the associated <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①⑥">shape tree</a>.</p>
   <p>Each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②">Compiled Access</a> links to child <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③">Compiled Accesses</a> via <a href="#classCompiledAccess">referencesCompiledAccess</a> or <a href="#classCompiledAccess">skos:narrower</a>.</p>
   <p>An <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②②">Access Need Group</a> links to an <a data-link-type="dfn" href="#access-decorator-index" id="ref-for-access-decorator-index">Access Decorator Index</a> of
different <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series">Access Decorator Series</a> that explain the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②③">Access Need Group</a> and <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③">Access Needs</a> in different languages. Each <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series①">Access Decorator Series</a> has one or more <a data-link-type="dfn" href="#access-decorator-version" id="ref-for-access-decorator-version">Access Decorator Versions</a> pointing to an <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource">Access Decorator Resource</a>, which contains the actual language-specific
content mappings.</p>
   <figure id="fig-access-need-group">
    <figcaption>An <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②④">Access Need Group</a> linking to <a data-link-type="dfn" href="#access-need" id="ref-for-access-need④">Access Needs</a></figcaption>
<pre class="highlight"><c- g>&lt;#notebook-collaboration-group></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeedGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessScenario</c-> <c- nn>interop:</c-><c- f>PersonalAccess</c-><c- p>,</c-> <c- nn>interop:</c-><c- f>SharedAccess</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> <c- nn>interop:</c-><c- f>Pilot</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeed</c-> <c- g>&lt;#notebook></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedOverride</c-> <c- g>&lt;#note></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessDecoratorIndex</c-> <c- g>&lt;notebook-access-decorator-index.ttl></c-> <c- p>.</c->

<c- g>&lt;#notebook></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeed</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>inAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:notebook-tree></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>recursivelyAuthorize</c-> <c- l>true</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>.</c->

<c- g>&lt;#note></c-> <c- c># Override to stop recursion</c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeed</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>inAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:notebook-tree></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>recursivelyAuthorize</c-> <c- l>false</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-compiled-access-group">
    <figcaption>A <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group③">Compiled Access Group</a> linking to <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④">Compiled Accesses</a></figcaption>
<pre class="highlight"><c- g>&lt;#compiled-notebook-collaboration-group></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccessGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroupDecorator</c-> <c- nn>ex:</c-><c- f>notebook-collaboration-decorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> <c- nn>interop:</c-><c- f>Pilot</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessScenario</c-> <c- nn>interop:</c-><c- f>PersonalAccess</c-><c- p>,</c-> <c- nn>interop:</c-><c- f>SharedAccess</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccess</c-> <c- g>&lt;#notebook></c-> <c- p>.</c->

<c- g>&lt;#compiled-notebook></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>inCompiledAccessGroup</c-> <c- g>&lt;#compiled-notebook-collaboration-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> <c- nn>note:</c-><c- f>notebook-decorator</c->> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> <c- nn>ex:</c-><c- f>notebook-need-decorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>referencesCompiledAccess</c-> <c- g>&lt;#compiled-note></c-> <c- p>.</c->

<c- g>&lt;#compiled-note></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>inCompiledAccessGroup</c-> <c- g>&lt;#compiled-notebook-collaboration-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:note-tree></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> <c- nn>note:</c-><c- f>note-decorator</c->> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> <c- nn>ex:</c-><c- f>note-need-decorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-access-need-decorator-index">
    <figcaption><a data-link-type="dfn" href="#access-decorator-index" id="ref-for-access-decorator-index①">Access Decorator Index</a> document linked by the <a href="#fig-access-need-group">#notebook-collaboration-group</a></figcaption>
<pre class="highlight"><c- k>@prefix</c-> <c- nn>interop:</c-> <c- g>&lt;http://www.w3.org/ns/solid/interop#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>xsd:</c-> <c- g>&lt;http://www.w3.org/2001/XMLSchema#></c-> <c- p>.</c->

<c- g>&lt;></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessDecoratorIndex</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>defaultLanguage</c-> <c- s>"en"</c-><c- o>^^</c->xsd:language <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasSeries</c-> <c- g>&lt;#series-en></c-> <c- p>.</c->

<c- g>&lt;#series-en></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessDecoratorSeries</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>usesLanguage</c-> <c- s>"en"</c-><c- o>^^</c->xsd:language <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasVersion</c-> <c- g>&lt;#en-v10></c-><c- p>,</c-> <c- g>&lt;#en-v11></c-> <c- p>.</c->

<c- g>&lt;#en-v10></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessDecoratorVersion</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>isVersion</c-> <c- s>"1.0.0"</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasSHA256</c-> <c- s>"98198123981273981273918273912738"</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasAccessDecoratorResource</c-> <c- g>&lt;notebook-decorator-en-1.0></c-> <c- p>.</c->

<c- g>&lt;#en-v11></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessDecoratorVersion</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>isVersion</c-> <c- s>"1.1.0"</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasSHA256</c-> <c- s>"12312312371273712731872371273712"</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasAccessDecoratorResource</c-> <c- g>&lt;notebook-decorator-en-1.1></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-access-decorator-resource">
    <figcaption>An <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource①">Access Decorator Resource</a> referenced
  by the <a href="#fig-access-need-decorator-index">Access Need Decorator Index</a> </figcaption>
<pre class="highlight"><c- k>@prefix</c-> <c- nn>skos:</c-> <c- g>&lt;http://www.w3.org/2004/02/skos/core#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>interop:</c-> <c- g>&lt;http://www.w3.org/ns/solid/interop#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>note:</c-> <c- g>&lt;http://shapetrees.pub/ns/note#></c-> <c- p>.</c->

<c- g>&lt;></c-> <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessDecoratorResource</c-> <c- p>.</c->

<c- g>&lt;#notebook-collaboration-decorator></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeedGroupDecorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
  <c- nn>skos:</c-><c- f>prefLabel</c-> <c- s>"Collaborate on notes"</c-><c- o>@</c->en <c- p>.</c->
  <c- nn>skos:</c-><c- f>definition</c-> <c- s>"Allowing for full reading and writing of notebooks and notes"</c-><c- o>@</c->en <c- p>.</c->

<c- g>&lt;#notebook-decorator></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeedDecorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:notebook-tree></c-> <c- p>;</c->
  <c- nn>skos:</c-><c- f>prefLabel</c-> <c- s>"Notebooks can be presented along with a list of their contents and read / written"</c-><c- o>@</c->en <c- p>.</c->

<c- g>&lt;#note-decorator></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeedDecorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:note-tree></c-> <c- p>;</c->
  <c- nn>skos:</c-><c- f>prefLabel</c-> <c- s>"Notes can be accessed and written"</c-><c- o>@</c->en <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-access-request">
    <figcaption>An <a data-link-type="dfn" href="#access-request" id="ref-for-access-request③">Access Request</a> sent from one agent to another</figcaption>
<pre class="highlight"><c- k>@prefix</c-> <c- nn>interop:</c-> <c- g>&lt;http://www.w3.org/ns/solid/interop#></c-> <c- p>.</c->
<c- k>@prefix</c-> <c- nn>note:</c-> <c- g>&lt;http://shapetrees.pub/ns/note#></c-> <c- p>.</c->

<c- g>&lt;></c-> <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessRequest</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAgent</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>toAgent</c-> https<c- p>:</c->//bob<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>.</c->

<c- g>&lt;#notebook-collaboration-group></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeedGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessScenario</c-> <c- nn>interop:</c-><c- f>PersonalAccess</c-><c- p>,</c-> <c- nn>interop:</c-><c- f>SharedAccess</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> <c- nn>interop:</c-><c- f>Pilot</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeed</c-> <c- g>&lt;#notebook></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedOverride</c-> <c- g>&lt;#note></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessDecoratorIndex</c-> <c- g>&lt;notebook-access-decorator-index.ttl></c-> <c- p>.</c->

<c- g>&lt;#notebook></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeed</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>inAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:notebook-tree></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>recursivelyAuthorize</c-> <c- l>true</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>.</c->

<c- g>&lt;#note></c-> <c- c># Override to stop recursion</c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessNeed</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>inAccessNeedGroup</c-> <c- g>&lt;#notebook-collaboration-group></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- g>&lt;note:notebook-tree></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>recursivelyAuthorize</c-> <c- l>false</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>.</c->
</pre>
   </figure>
   <h4 class="heading settled" data-level="7.2.2" id="needs-access-need-group"><span class="secno">7.2.2. </span><span class="content">Access Need Group</span><a class="self-link" href="#needs-access-need-group"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-need-group">Access Need Group</dfn> is a collection of <a data-link-type="dfn" href="#access-need" id="ref-for-access-need⑤">Access Needs</a> that a given <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪⓪">Agent</a> and/or <a data-link-type="dfn" href="#application" id="ref-for-application⑧⑨">Application</a> uses to communicate a data
access request to other <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪①">Agents</a>.</p>
   <p>Each <a data-link-type="dfn" href="#access-need" id="ref-for-access-need⑥">Access Need</a> is associated with a specific <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①⑦">shape tree</a>,
and <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①⑧">shape trees</a> provide both physical and/or virtual hierarchies.
The <a href="#compile-group">§ 7.3.1 Compile Access Need Group</a> operation starts with each <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="root-access-need">Root Access Need</dfn> linked via <code>hasAccessNeed</code>, and traverses the shape tree hierarchy,
creating a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤">Compiled Access</a> at each new <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree①⑨">shape tree</a> and
linking them in a tree via <code>referencesCompiledAccess</code> or <code>skos:narrower</code>.
Each <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-need-override">Access Need Override</dfn> that it encounters when traversing the
hierarchy applies new inherited defaults, or stops the recursion before
it continues through the remainder of the tree.</p>
   <table align="left" class="classinfo data" id="classAccessNeedGroup">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessNeedGroup">AccessNeedGroup</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>accessNecessity
      <td><code>interop:AccessRequired</code>, <code>interop:AccessOptional</code>
      <td>Necessity of the access to the requesting party
     <tr>
      <td>accessScenario
      <td><code>interop:PersonalAccess</code>, <code>interop:SharedAccess</code>
      <td>Context in which the access group should be presented
     <tr>
      <td>hasAccessNeed
      <td><a href="#classAccessNeed">AccessNeed</a>
      <td>Link to a <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need③">Root Access Need</a>
     <tr>
      <td>hasAccessNeedOverride
      <td><a href="#classAccessNeed">AccessNeed</a>
      <td>Link to an <a data-link-type="dfn" href="#access-need-override" id="ref-for-access-need-override②">Access Need Override</a>
     <tr>
      <td>authenticatesAs
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪②">Agent</a> or <code>interop:Pilot</code>
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪③">Agent</a> or mode the <a data-link-type="dfn" href="#application" id="ref-for-application⑨⓪">Application</a> authenticates as
     <tr>
      <td>hasAccessNeedDecoratorIndex
      <td>-
      <td>Index of <a data-link-type="dfn">Acccess Decorator Resources</a> to describe <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②⑤">Access Need Group</a> and <a data-link-type="dfn" href="#access-need" id="ref-for-access-need⑦">Access Needs</a>
   </table>
   <p>The <a href="#shexAccessNeedGroup">AccessNeedGroupShape</a> is used to validate an
instance of the <a href="#classAccessNeedGroup">AccessNeedGroup</a> class.</p>
<pre class="highlight" id="shexAccessNeedGroup"><c- g>&lt;#AccessNeedGroupShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessNeedGroup</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- nn>interop:</c-><c- f>AccessOptional</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessScenario</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>PersonalAccess</c-> <c- nn>interop:</c-><c- f>SharedAccess</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeed</c-> IRI+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedOverride</c-> IRI* <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessDecoratorIndex</c-> IRI
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="7.2.3" id="needs-access-need"><span class="secno">7.2.3. </span><span class="content">Access Need</span><a class="self-link" href="#needs-access-need"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-need">Access Need</dfn> represents the requirement of one specific type
of data represented by a <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②⓪">shape tree</a>, as part of an <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②⑥">Access Need Group</a>.</p>
   <p>Each <a data-link-type="dfn" href="#access-need" id="ref-for-access-need⑧">Access Need</a> represents a request to access, create, or manage
all or a subset of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③③">Registered Data Instances</a> associated with a single <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤③">Data Registration</a> for a given <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②①">shape tree</a>.</p>
   <p>Specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③④">Registered Data Instances</a> may be requested by explicitly
associating them with the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need⑨">Access Need</a> via <a href="#classAccessNeed">hasRegisteredDataInstance</a>.</p>
   <p>Each <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①⓪">Access Need</a> has one or more <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode④">access modes</a>, and a property that
indicates the necessity of the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①①">Access Need</a>; <em>required</em> or <em>optional</em>. For example, an <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①②">Access Need</a> for read access to <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②②">shape tree</a> <code>N</code> can be identified as a required item in the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②⑦">Access Need Group</a>.</p>
   <p><a data-link-type="dfn" href="#access-need" id="ref-for-access-need①③">Access Needs</a> are described using language-specific <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator">Access Need Decorators</a>.</p>
   <table align="left" class="classinfo data" id="classAccessNeed">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessNeed">AccessNeed</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>inAccessNeedGroup
      <td><a href="#classAccessNeedGroup">AccessNeedGroup</a>
      <td><a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②⑧">Access Need Group</a> that the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①④">Access Need</a> is part of
     <tr>
      <td>registeredShapeTree
      <td><code>st:ShapeTree</code>
      <td>The <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②③">shape tree</a> requested by the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①⑤">Access Need</a>
     <tr>
      <td>hasRegisteredDataInstance
      <td>-
      <td>Request specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③⑤">Registered Data Instances</a> of the registered <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②④">shape tree</a>
     <tr>
      <td>recursivelyAuthorize
      <td><code>xsd:boolean</code>
      <td>
       <ul>
        <li><b>true</b> - continue traversing shape tree hierarchy for
          authorization when true
        <li><b>false</b> - stop traversal
       </ul>
     <tr>
      <td>accessMode
      <td><code>acl:Read, acl:Write, acl:Control, acl:Append</code>
      <td>Requested modes of access for the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①⑥">Access Need</a>
     <tr>
      <td>accessNecessity
      <td><code>interop:AccessRequired</code>, <code>interop:AccessOptional</code>
      <td>Necessity of the access to the requesting party
   </table>
   <p>The <a href="#shexAccessNeed">AccessNeedShape</a> is used to validate an
instance of the <a href="#classAccessNeed">AccessNeed</a> class.</p>
<pre class="highlight" id="shexAccessNeed"><c- g>&lt;#AccessNeedShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessNeed</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>inAccessNeedGroup</c-> IRI+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> IRI* <c- p>;</c->
  <c- nn>interop:</c-><c- f>recursivelyAuthorize</c-> <c- p>[</c-> <c- l>true</c-> <c- l>false</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- p>[</c-> <c- nn>acl:</c-><c- f>Read</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- nn>acl:</c-><c- f>Append</c-> <c- nn>acl:</c-><c- f>Control</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- nn>interop:</c-><c- f>AccessOptional</c-> <c- p>]</c-> <c- p>;</c->
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="7.2.4" id="needs-compiled-access-group"><span class="secno">7.2.4. </span><span class="content">Compiled Access Group</span><a class="self-link" href="#needs-compiled-access-group"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compiled-access-group">Compiled Access Group</dfn> is output by the <a href="#compile-group">§ 7.3.1 Compile Access Need Group</a> operation when given an <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group②⑨">Access Need Group</a> as input.</p>
   <p>Compiling an <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③⓪">Access Need Group</a> includes:</p>
   <ul>
    <li data-md>
     <p>Getting an <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator①">Access Need Group Decorator</a> via <a href="#get-group-dec">§ 7.3.5 Get Access Need Group Decorator</a></p>
    <li data-md>
     <p>Recursing through the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②⑤">shape tree</a> hierarchy of each <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need④">Root Access Need</a> in the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③①">Access Need Group</a>, and creating a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑥">Compiled Access</a> for
every <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②⑥">shape tree</a> encountered, applying <a data-link-type="dfn" href="#access-need-override" id="ref-for-access-need-override③">Access Need Overrides</a> when
available.</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="root-compiled-access">Root Compiled Access</dfn> is the compiled version of the
corresponding <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need⑤">Root Access Need</a> in the source <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③②">Access Need Group</a>.</p>
   <table align="left" class="classinfo data" id="classCompiledAccessGroup">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#CompiledAccessGroup">CompiledAccessGroup</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>fromAccessNeedGroup
      <td><a href="#classAccessNeedGroup">AccessNeedGroup</a>
      <td>The <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③③">Access Need Group</a> used to generate the <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group④">Compiled Access Group</a>
     <tr>
      <td>hasAccessNeedGroupDecorator
      <td><a href="#classAccessNeedGroupDecorator">AccessNeedGroupDecorator</a>
      <td>An <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator②">Access Need Group Decorator</a> that describes this <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group⑤">Compiled Access Group</a>
     <tr>
      <td>authenticatesAs
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪④">Agent</a> or <code>interop:Pilot</code>
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪⑤">Agent</a> or mode the <a data-link-type="dfn" href="#application" id="ref-for-application⑨①">Application</a> authenticates as
     <tr>
      <td>accessScenario
      <td><code>interop:PersonalAccess</code>, <code>interop:SharedAccess</code>
      <td>Context in which the access group should be presented
     <tr>
      <td>accessNecessity
      <td><code>interop:AccessRequired</code>, <code>interop:AccessOptional</code>
      <td>Necessity of the access to the requesting party
     <tr>
      <td>hasCompiledAccess
      <td><a href="#classCompiledAccess">CompiledAccess</a>
      <td>Link to a <a data-link-type="dfn" href="#root-compiled-access" id="ref-for-root-compiled-access②">Root Compiled Access</a>
   </table>
   <p>The <a href="#shexCompiledAccessGroup">CompiledAccessGroupShape</a> is used to
validate an instance of the <a href="#classCompiledAccessGroup">CompiledAccessGroup</a> class.</p>
<pre class="highlight" id="shexCompiledAccessGroup"><c- g>&lt;#CompiledAccessGroupShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>CompiledAccessGroup</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAccessNeedGroup</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroupDecorator</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- nn>interop:</c-><c- f>AccessOptional</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessScenario</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>PersonalAccess</c-> <c- nn>interop:</c-><c- f>SharedAccess</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccess</c-> IRI+ <c- p>;</c->
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="7.2.5" id="needs-compiled-access"><span class="secno">7.2.5. </span><span class="content">Compiled Access</span><a class="self-link" href="#needs-compiled-access"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compiled-access">Compiled Access</dfn> is generated by the <a href="#compile-group">§ 7.3.1 Compile Access Need Group</a> operation as it processes an input <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③④">Access Need Group</a>. A <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑦">Compiled Access</a> is added to the <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group⑥">Compiled Access Group</a> for every unique <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②⑦">shape tree</a> encountered as the operation traverses the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②⑧">shape tree</a> hierarchy.</p>
   <table align="left" class="classinfo data" id="classCompiledAccess">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#CompiledAccess">CompiledAccess</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>inCompiledAccessGroup
      <td><a href="#classCompiledAccessGroup">CompiledAccessGroup</a>
      <td><a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group⑦">Compiled Access Group</a> the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑧">Compiled Access</a> belongs to
     <tr>
      <td>hasShapeTreeDecorator
      <td><code>st:ShapeTreeDecorator</code>
      <td>Decorator associated with the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree②⑨">shape tree</a> that describes the
      name of the shape-tree and what data it represents in the preferred
      language of the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪⑥">Agent</a>
     <tr>
      <td>hasAccessNeedDecorator
      <td><a href="#classAccessNeedDecorator">AccessNeedDecorator</a>
      <td>Decorator that explains the reason for the access need in the
      preferred language of the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪⑦">Agent</a>
     <tr>
      <td>hasDataGrant
      <td><a href="#classDataGrant">DataGrant</a>
      <td><a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant">Data Grant</a> associated with the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑨">Compiled Access</a>,
      established when the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①②">Access Grant</a> is created
     <tr>
      <td>hasRegisteredDataInstance
      <td><a href="#">RegisteredDataInstance</a>
      <td>Links to any specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③⑥">Registered Data Instances</a> that were
      included in the original request
     <tr>
      <td>registeredShapeTree
      <td><code>st:ShapeTree</code>
      <td><a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③⓪">Shape tree</a> associated with the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①⓪">Compiled Access</a>
     <tr>
      <td>accessMode
      <td><code>acl:Read, acl:Write, acl:Control, acl:Append</code>
      <td>Requested modes of access for the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①①">Compiled Access</a>
     <tr>
      <td>accessNecessity
      <td><code>interop:AccessRequired</code>, <code>interop:AccessOptional</code>
      <td>Necessity of the access to the requesting party
     <tr>
      <td>supportedBy
      <td><a href="#classCompiledAccess">CompiledAccess</a>
      <td>A <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①②">Compiled Access</a> whose <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③①">shape tree</a> <code>st:supports</code> the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③②">shape tree</a> of this <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①③">Compiled Access</a>
     <tr>
      <td>supports
      <td><a href="#classCompiledAccess">CompiledAccess</a>
      <td>A <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①④">Compiled Access</a> that <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③③">shape tree</a> of this <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①⑤">Compiled Access</a> <code>st:supports</code>
     <tr>
      <td>referencesCompiledAccess
      <td><a href="#classCompiledAccess">CompiledAccess</a>
      <td>The next <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①⑥">Compiled Access</a> in a virtual hierarchy
     <tr>
      <td>skos:narrower
      <td><a href="#classCompiledAccess">CompiledAccess</a>
      <td>The next <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①⑦">Compiled Access</a> in a virtual hierarchy where
      the regular <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③④">shape tree</a> hierarchy has been extended to include
      a skos hierarchy.
   </table>
   <p>The <a href="#shexCompiledAccess">CompiledAccessShape</a> is used to
validate an instance of the <a href="#classCompiledAccess">CompiledAccess</a> class.</p>
<pre class="highlight" id="shexCompiledAccess"><c- g>&lt;#CompiledAccessShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>inCompiledAccessGroup</c-> IRI+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataGrant</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> IRI* <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- p>[</c-> <c- nn>acl:</c-><c- f>Read</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- nn>acl:</c-><c- f>Append</c-> <c- nn>acl:</c-><c- f>Control</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- nn>interop:</c-><c- f>AccessOptional</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>supportedBy</c-> IRI* <c- p>;</c->
  <c- nn>interop:</c-><c- f>supports</c-> IRI
  <c- nn>interop:</c-><c- f>referencesCompiledAccess</c-> IRI* <c- p>;</c->
  <c- nn>skos:</c-><c- f>narrower</c-> IRI* <c- p>;</c->
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="7.2.6" id="needs-access-request"><span class="secno">7.2.6. </span><span class="content">Access Request</span><a class="self-link" href="#needs-access-request"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-request">Access Request</dfn> is used to send <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③⑤">Access Need Groups</a> from
one <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪⑧">Agent</a> to another.</p>
   <table align="left" class="classinfo data" id="classAccessRequest">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessRequest">AccessRequest</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>fromAgent
      <td>Agent
      <td>The <a data-link-type="dfn" href="#agent" id="ref-for-agent①⓪⑨">Agent</a> who sent the <a data-link-type="dfn" href="#access-request" id="ref-for-access-request④">Access Request</a>
     <tr>
      <td>toAgent
      <td>Agent
      <td>The <a data-link-type="dfn" href="#agent" id="ref-for-agent①①⓪">Agent</a> the <a data-link-type="dfn" href="#access-request" id="ref-for-access-request⑤">Access Request</a> is meant for
    <tbody>
     <tr>
      <td>hasAccessNeedGroup
      <td><a href="#classAccessNeedGroup">AccessNeedGroup</a>
      <td>One or more <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③⑥">Access Need Groups</a> detailing the access requested
   </table>
   <p>The <a href="#shexAccessRequest">AccessRequestShape</a> is used to
validate an instance of the <a href="#classAccessRequest">AccessRequest</a> class.</p>
<pre class="highlight" id="shexAccessRequest"><c- g>&lt;#AccessRequestShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-><c- nn>interop:</c-><c- f>AccessRequest</c-><c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAgent</c-> IRI <c- p>;</c->             <c- c># Agent who sent the receipt</c->
  <c- nn>interop:</c-><c- f>toAgent</c-> IRI <c- p>;</c->               <c- c># Recipient of the receipt</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> @<c- g>&lt;#:AccessNeedGroupShape></c->+
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="7.2.7" id="needs-access-decorator-index"><span class="secno">7.2.7. </span><span class="content">Access Decorator Index</span><a class="self-link" href="#needs-access-decorator-index"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-decorator-index">Access Decorator Index</dfn> is a listing of one or more <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series②">Access Decorator Series</a>.</p>
   <table align="left" class="classinfo data" id="classAccessDecoratorIndex">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessDecoratorIndex">AccessDecoratorIndex</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>defaultLanguage
      <td><code>xsd:language</code>
      <td>Default language to select if not provided as input
     <tr>
      <td>hasSeries
      <td><a href="#classAccessDecoratorSeries">AccessDecoratorSeries</a>
      <td>Link to an <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series③">Access Decorator Series</a>
   </table>
   <p>The <a href="#shexAccessDecoratorIndex">AccessDecoratorIndexShape</a> is used to
validate an instance of the <a href="#classAccessDecoratorIndex">AccessDecoratorIndex</a> class.</p>
<pre class="highlight" id="shexAccessDecoratorIndex"><c- g>&lt;#AccessDecoratorIndexShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessDecoratorIndex</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>defaultLanguage</c-> <c- nn>xsd:</c-><c- f>language</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasSeries</c-> @AccessDecoratorSeries+ <c- p>;</c->
<c- p>}</c->
</pre>
   <h5 class="heading settled" data-level="7.2.7.1" id="needs-access-decorator-series"><span class="secno">7.2.7.1. </span><span class="content">Access Decorator Series</span><a class="self-link" href="#needs-access-decorator-series"></a></h5>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-decorator-series">Access Decorator Series</dfn> has one or
more <a data-link-type="dfn" href="#access-decorator-version" id="ref-for-access-decorator-version①">Access Decorator Versions</a> in a given language.</p>
   <table align="left" class="classinfo data" id="classAccessDecoratorSeries">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessDecoratorSeries">AccessDecoratorSeries</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>usesLanguage
      <td>xsd:language
      <td>Language code associated with the <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series④">Access Decorator Series</a>
     <tr>
      <td>hasVersion
      <td><a href="#classAccessDecoratorVersion">AccessDecoratorVersion</a>
      <td>Links to an <a data-link-type="dfn" href="#access-decorator-version" id="ref-for-access-decorator-version②">Access Decorator Version</a> in the series
   </table>
   <p>The <a href="#shexAccessDecoratorSeries">AccessDecoratorSeriesShape</a> is used to
validate an instance of the <a href="#classAccessDecoratorSeries">AccessDecoratorSeries</a> class.</p>
<pre class="highlight" id="shexAccessDecoratorSeries"><c- g>&lt;#AccessDecoratorSeriesShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessDecoratorSeries</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>usesLanguage</c-> <c- nn>xsd:</c-><c- f>language</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasVersion</c-> @AccessDecoratorVersion+ <c- p>;</c->
<c- p>}</c->
</pre>
   <h5 class="heading settled" data-level="7.2.7.2" id="needs-access-decorator-version"><span class="secno">7.2.7.2. </span><span class="content">Access Decorator Version</span><a class="self-link" href="#needs-access-decorator-version"></a></h5>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-decorator-version">Access Decorator Version</dfn> is a versioned instance of
a given <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource②">Access Decorator Resource</a>.</p>
   <table align="left" class="classinfo data" id="classAccessDecoratorVersion">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#CompiledAccessGroup">CompiledAccessGroup</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>isVersion
      <td>xsd:string
      <td>Semantic version of the <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource③">Access Decorator Resource</a> (e.g. "1.1.0")
     <tr>
      <td>hasSHA256
      <td>xsd:string
      <td>SHA-256 hash of the linked <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource④">Access Decorator Resource</a>
     <tr>
      <td>hasAccessDecoratorResource
      <td><a href="#classAccessDecoratorResource">AccessDecoratorResource</a>
      <td>Links to the actual <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource⑤">Access Decorator Resource</a> document
   </table>
   <p>The <a href="#shexAccessDecoratorVersion">AccessDecoratorVersionShape</a> is used to
validate an instance of the <a href="#classAccessDecoratorVersion">AccessDecoratorVersion</a> class.</p>
<pre class="highlight" id="shexAccessDecoratorVersion"><c- g>&lt;#AccessDecoratorVersionShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessDecoratorVersion</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>isVersion</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasSHA256</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessDecoratorResource</c-> IRI <c- p>;</c->
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="7.2.8" id="needs-access-decorator-resource"><span class="secno">7.2.8. </span><span class="content">Access Decorator Resource</span><a class="self-link" href="#needs-access-decorator-resource"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-decorator-resource">Access Decorator Resource</dfn> is a document that contains <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator③">Access Need Group Decorators</a> and <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator①">Access Need Decorators</a> in a
given language.</p>
   <table align="left" class="classinfo data" id="classAccessDecoratorResource">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessDecoratorResource">AccessDecoratorResource</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td><i>No properties</i>
      <td>-
      <td>-
   </table>
   <h5 class="heading settled" data-level="7.2.8.1" id="needs-access-need-group-decorator"><span class="secno">7.2.8.1. </span><span class="content">Access Need Group Decorator</span><a class="self-link" href="#needs-access-need-group-decorator"></a></h5>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-need-group-decorator">Access Need Group Decorator</dfn> provides a subject name and
more in depth description that explains why a given <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③⑦">Access Need Group</a> is being requested of an <a data-link-type="dfn" href="#agent" id="ref-for-agent①①①">Agent</a>.</p>
   <table align="left" class="classinfo data" id="classAccessNeedGroupDecorator">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessNeedGroupDecorator">AccessNeedGroupDecorator</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasAccessNeedGroup
      <td><a href="#classAccessNeedGroup">AccessNeedGroup</a>
      <td><a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③⑧">Access Need Group</a> the decorator applies to
     <tr>
      <td>skos:preflabel
      <td><code>xsd:string</code>
      <td>Short label (title) for the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group③⑨">Access Need Group</a>
     <tr>
      <td>skos:definition
      <td><code>xsd:string</code>
      <td>Description of why the <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④⓪">Access Need Group</a> requires the
      access it is requesting.
   </table>
   <p>The <a href="#shexAccessNeedGroupDecorator">AccessNeedGroupDecoratorShape</a> is used to
validate an instance of the <a href="#classAccessNeedGroupDecorator">AccessNeedGroupDecorator</a> class.</p>
<pre class="highlight" id="shexAccessNeedGroupDecorator"><c- g>&lt;#AccessNeedGroupDecoratorShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessNeedGroupDecorator</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> IRI <c- p>;</c->
  <c- nn>skos:</c-><c- f>prefLabel</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
  <c- nn>skos:</c-><c- f>definition</c-> <c- nn>xsd:</c-><c- f>string</c->
<c- p>}</c->
</pre>
   <h5 class="heading settled" data-level="7.2.8.2" id="needs-access-need-decorator"><span class="secno">7.2.8.2. </span><span class="content">Access Need Decorator</span><a class="self-link" href="#needs-access-need-decorator"></a></h5>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-need-decorator">Access Need Decorator</dfn> provides a specific
explanation of why that data type is being requested.</p>
   <table align="left" class="classinfo data" id="classAccessNeedDecorator">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessNeedDecorator">AccessNeedDecorator</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasAccessNeedGroup
      <td><a href="#classAccessNeedGroup">AccessNeedGroup</a>
      <td><a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④①">Access Need Group</a> the decorator applies to
     <tr>
      <td>registeredShapeTree
      <td><code>st:ShapeTree</code>
      <td><a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③⑤">Shape tree</a> associated with the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①⑦">Access Need</a> the decorator
      should apply to
     <tr>
      <td>skos:prefLabel
      <td><code>xsd:string</code>
      <td>Specific explanation of why that data type is being requested
   </table>
   <p>The <a href="#shexAccessNeedDecorator">AccessNeedDecoratorShape</a> is used to
validate an instance of the <a href="#classAccessNeedDecorator">AccessNeedDecorator</a> class.</p>
<pre class="highlight" id="shexAccessNeedDecorator"><c- g>&lt;#AccessNeedDecoratorShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessNeedDecorator</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroup</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->
  <c- nn>skos:</c-><c- f>prefLabel</c-> <c- nn>xsd:</c-><c- f>string</c->
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="7.3" id="needs-operations"><span class="secno">7.3. </span><span class="content">Operations</span><a class="self-link" href="#needs-operations"></a></h3>
   <p>The following operations explain how to process <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④②">Access Need Groups</a> so they can be presented to an <a data-link-type="dfn" href="#agent" id="ref-for-agent①①②">Agent</a> in <a href="#grants-operations">Access Grant Operations</a></p>
   <ul>
    <li data-md>
     <p><a href="#compile-group">§ 7.3.1 Compile Access Need Group</a></p>
    <li data-md>
     <p><a href="#compile-need">§ 7.3.2 Compile Access Need</a></p>
    <li data-md>
     <p><a href="#get-group-dec">§ 7.3.5 Get Access Need Group Decorator</a></p>
    <li data-md>
     <p><a href="#get-need-dec">§ 7.3.6 Get Access Need Decorator</a></p>
   </ul>
   <h4 class="heading settled" data-level="7.3.1" id="compile-group"><span class="secno">7.3.1. </span><span class="content">Compile Access Need Group</span><a class="self-link" href="#compile-group"></a></h4>
   <p>This operation takes a given <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④③">Access Need Group</a> with a number of associated <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①⑧">Access Needs</a> and processes them to produce a <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group⑧">Compiled Access Group</a> that is ready to present to a given <a data-link-type="dfn" href="#agent" id="ref-for-agent①①③">Agent</a> via the <a href="#grants-present">§ 8.4.10 Present Grant</a> operation.</p>
   <ol>
    <li data-md>
     <p>The <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③⑥">shape tree</a> associated with each <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need⑥">Root Access Need</a> is
traversed to the desired level of recursion, including across references.
A <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①⑧">Compiled Access</a> is added in a linked hierarchy
starting with the <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need⑦">Root Access Need</a>, representing every unique <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③⑦">shape tree</a> that was traversed.</p>
    <li data-md>
     <p>Decorators are looked up and linked to the <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group⑨">Compiled Access Group</a> and where available for every <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access①⑨">Compiled Access</a></p>
    <li data-md>
     <p>Any <a data-link-type="dfn">Supporting Access Needs</a> are associated with <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②⓪">Compiled Accesses</a>.</p>
   </ol>
   <h5 class="heading settled" data-level="7.3.1.1" id="compile-group-inputs"><span class="secno">7.3.1.1. </span><span class="content">Inputs</span><a class="self-link" href="#compile-group-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GROUP</code> be an <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④④">Access Need Group</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①①④">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.1.2" id="compile-group-outputs"><span class="secno">7.3.1.2. </span><span class="content">Outputs</span><a class="self-link" href="#compile-group-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①⓪">Compiled Access Group</a> generated from the input <code>GROUP</code>, with
an associated set of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②①">Compiled Accesses</a>.</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.1.3" id="compile-group-details"><span class="secno">7.3.1.3. </span><span class="content">Operation Details</span><a class="self-link" href="#compile-group-details"></a></h5>
   <ol>
    <li data-md>
     <p>Perform a validation of the RDF graph of <code>GROUP</code> against <a href="interop.shex#AccessNeedGroupShape">interop:AccessNeedGroupShape</a>. <em class="rfc2119">MUST</em> return a status code of 400 if
validation fails.</p>
    <li data-md>
     <p>Let <code>ALLNEEDS</code> be the combined set of <a data-link-type="dfn" href="#access-need" id="ref-for-access-need①⑨">Access Needs</a> linked via <code>GROUP hasAccessNeed</code> and <code>GROUP hasAccessNeedOverride</code></p>
    <li data-md>
     <p>Let <code>OVERRIDES</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②⓪">Access Needs</a> linked via <code>GROUP hasAccessNeedOverride</code></p>
    <li data-md>
     <p>Let <code>TREEDECS</code> represent all <a data-link-type="dfn">Shape Tree Decorators</a> associated with <code>ALLNEEDS</code></p>
    <li data-md>
     <p>Let <code>ALLDECS</code> represent all <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator②">Access Need Decorators</a> associated with <code>ALLNEEDS</code></p>
    <li data-md>
     <p>Let <code>CAGROUP</code> be a <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①①">Compiled Access Group</a></p>
    <li data-md>
     <p>Let <code>CAGROUP hasAccessNeedDecorator</code> be the <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator④">Access Need Group Decorator</a> returned from <a href="#get-group-dec">§ 7.3.5 Get Access Need Group Decorator</a> with inputs: <code>GROUP</code>, <code>LANG</code></p>
    <li data-md>
     <p>Let <code>CAGROUP fromAccessNeedGroup</code> be <code>GROUP</code></p>
    <li data-md>
     <p>Let <code>CAGROUP accessNecessity</code> be <code>GROUP accessNecessity</code></p>
    <li data-md>
     <p>Let <code>CAGROUP authenticatesAs</code> be <code>GROUP authenticatesAs</code></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#root-access-need" id="ref-for-root-access-need⑧">Root Access Need</a> <code>ROOT</code> linked via <code>GROUP hasAccessNeed</code></p>
     <ol>
      <li data-md>
       <p>Let <code>CAGROUP hasCompiledAccess</code> be linked to the <a data-link-type="dfn" href="#root-compiled-access" id="ref-for-root-compiled-access③">Root Compiled Access</a> returned by <a href="#compile-need">§ 7.3.2 Compile Access Need</a> with inputs: <code>ROOT registeredShapeTree</code>, <code>ROOT</code>, <code>ALLNEEDS</code>, <code>OVERRIDES</code>, <code>TREEDECS</code>, <code>ALLDECS</code>, <code>LANG</code></p>
     </ol>
    <li data-md>
     <p>Let <code>ALLCOMPILED</code> represent all <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②②">Compiled Accesses</a> linked via <code>CAGROUP hasCompiledAccess</code>, as well as all <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②③">Compiled Accesses</a> linked to them via <code>referencesCompiledAccess</code> or <code>skos:narrower</code>.</p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#root-compiled-access" id="ref-for-root-compiled-access④">Root Compiled Access</a> <code>PROOT</code> linked via <code>CAGROUP hasCompiledAccess</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#link-supported">§ 7.3.3 Link Supported Compiled Accesses</a> with inputs: <code>PROOT</code>, <code>ALLCOMPILED</code></p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="7.3.2" id="compile-need"><span class="secno">7.3.2. </span><span class="content">Compile Access Need</span><a class="self-link" href="#compile-need"></a></h4>
   <p>This operation is called recursively to build up a linked hierarchy of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②④">Compiled Accesses</a> in concert with the <a href="#compile-need-walk">§ 7.3.2.4 _walkDecorators</a> operation.</p>
   <h5 class="heading settled" data-level="7.3.2.1" id="compile-need-inputs"><span class="secno">7.3.2.1. </span><span class="content">Inputs</span><a class="self-link" href="#compile-need-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>TREE</code> be the current <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③⑧">shape tree</a> in context</p>
    <li data-md>
     <p>Let <code>LASTNEED</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②①">Access Need</a> in context</p>
    <li data-md>
     <p>Let <code>ALLNEEDS</code> be the combined set of <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②②">Access Needs</a> linked via <code>GROUP hasAccessNeed</code> and <code>GROUP hasAccessNeedOverride</code></p>
    <li data-md>
     <p>Let <code>OVERRIDES</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②③">Access Needs</a> linked via <code>GROUP hasAccessNeedOverride</code></p>
    <li data-md>
     <p>Let <code>TREEDECS</code> represent all <a data-link-type="dfn">Shape Tree Decorators</a> associated with <code>ALLNEEDS</code></p>
    <li data-md>
     <p>Let <code>ALLDECS</code> represent all <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator③">Access Need Decorators</a> associated with <code>ALLNEEDS</code></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①①⑤">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.2.2" id="compile-need-outputs"><span class="secno">7.3.2.2. </span><span class="content">Outputs</span><a class="self-link" href="#compile-need-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②⑤">Compiled Access</a> with a linked hierarchy of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②⑥">Compiled Accesses</a> associated with it</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.2.3" id="compile-need-details"><span class="secno">7.3.2.3. </span><span class="content">Operation Details</span><a class="self-link" href="#compile-need-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>TOPTREEDEC</code> be the <a data-link-type="dfn">Shape Tree Decorator</a> returned from the <a href="#">Get Shape Tree Decorator</a> operation with
inputs: <code>TREE</code>, <code>LANG</code></p>
    <li data-md>
     <p>Let <code>SPECIFICNEED</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②④">Access Need</a> returned from the <a href="#compile-need-getspecific">§ 7.3.2.5 _getSpecificAccessNeed</a> operation with inputs: <code>TREE</code>, <code>OVERRIDES</code>, <code>LASTNEED</code></p>
    <li data-md>
     <p>return the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②⑦">Compiled Access</a> returned by calling <a href="#compile-need-walk">§ 7.3.2.4 _walkDecorators</a> with inputs: <code>TREE</code>, <code>TOPTREEDEC</code>, <code>SPECIFICNEED</code>, <code>ALLDECS</code>, <code>ALLNEEDS</code>, <code>OVERRIDES</code>, <code>TREEDECS</code>, <code>LANG</code></p>
   </ol>
   <h5 class="heading settled" data-level="7.3.2.4" id="compile-need-walk"><span class="secno">7.3.2.4. </span><span class="content">_walkDecorators</span><a class="self-link" href="#compile-need-walk"></a></h5>
   <p>This operation is called recursively to build up a linked hierarchy of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②⑧">Compiled Accesses</a> in concert with the <a href="#compile-need">§ 7.3.2 Compile Access Need</a> operation.</p>
   <h6 class="heading settled" data-level="7.3.2.4.1" id="walk-inputs"><span class="secno">7.3.2.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#walk-inputs"></a></h6>
   <ul>
    <li data-md>
     <p>Let <code>TREE</code> be the current <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree③⑨">shape tree</a> in context</p>
    <li data-md>
     <p>Let <code>TREEDEC</code> be the current <a data-link-type="dfn">Shape Tree Decorator</a> in context</p>
    <li data-md>
     <p>Let <code>NEED</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②⑤">Access Need</a> in context</p>
    <li data-md>
     <p>Let <code>ALLDECS</code> represent all <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator④">Access Need Decorators</a> associated with <code>ALLNEEDS</code></p>
    <li data-md>
     <p>Let <code>ALLNEEDS</code> be the combined set of <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②⑥">Access Needs</a> linked via <code>GROUP hasAccessNeed</code> and <code>GROUP hasAccessNeedOverride</code></p>
    <li data-md>
     <p>Let <code>OVERRIDES</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②⑦">Access Needs</a> linked via <code>GROUP hasAccessNeedOverride</code></p>
    <li data-md>
     <p>Let <code>TREEDECS</code> represent all <a data-link-type="dfn">Shape Tree Decorators</a> associated with <code>ALLNEEDS</code></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①①⑥">Agent’s</a> preferred language</p>
   </ul>
   <h6 class="heading settled" data-level="7.3.2.4.2" id="walk-outputs"><span class="secno">7.3.2.4.2. </span><span class="content">Outputs</span><a class="self-link" href="#walk-outputs"></a></h6>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access②⑨">Compiled Access</a> with a linked hierarchy of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③⓪">Compiled Accesses</a> associated with it</p>
   </ul>
   <h6 class="heading settled" data-level="7.3.2.4.3" id="walk-details"><span class="secno">7.3.2.4.3. </span><span class="content">Operation Details</span><a class="self-link" href="#walk-details"></a></h6>
   <ol>
    <li data-md>
     <p>Let <code>COMPILED</code> be a new <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③①">Compiled Access</a></p>
    <li data-md>
     <p>Let <code>COMPILED registeredShapeTree</code> be <code>TREE</code></p>
    <li data-md>
     <p>Let <code>COMPILED accessNecessity</code> be set to <code>NEED</code>'s <code>accessNecessity</code></p>
    <li data-md>
     <p>Let <code>COMPILED accessMode</code> be all of <code>NEED</code>'s <code>accessMode</code>s</p>
    <li data-md>
     <p>Let <code>COMPILED fromAccessNeed</code> be <code>NEED</code></p>
    <li data-md>
     <p>Let <code>COMPILED hasAccessNeedDecorator</code> be the <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator⑤">Access Need Decorator</a> returned from <a href="#get-need-dec">§ 7.3.6 Get Access Need Decorator</a> with inputs: <code>NEED</code>, <code>LANG</code></p>
    <li data-md>
     <p>Let <code>COMPILED hasShapeTreeDecorator</code> be <code>TREEDEC</code></p>
    <li data-md>
     <p>If <code>TREEDEC skos:narrower</code></p>
     <ol>
      <li data-md>
       <p>Let <code>NARROWERDEC</code> be <code>TREEDEC skos:narrower</code></p>
      <li data-md>
       <p>Let <code>NARROWERTREE</code> be <code>NARROWERDEC hasShapeTree</code></p>
      <li data-md>
       <p>Let <code>NARROWERCA</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②⑧">Access Need</a> returned from the <a href="#compile-need-getspecific">§ 7.3.2.5 _getSpecificAccessNeed</a> operation with inputs: <code>NARROWERTREE</code>, <code>OVERRIDES</code>, <code>NEED</code></p>
      <li data-md>
       <p>Let <code>COMPILED skos:narrower</code> be the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③②">Compiled Access</a> returned
from calling <a href="#compile-need-walk">§ 7.3.2.4 _walkDecorators</a> with inputs: <code>NARROWERTREE</code>, <code>NARROWERDEC</code>, <code>NARROWERCA</code>, <code>ALLDECS</code>, <code>ALLNEEDS</code>, <code>OVERRIDES</code>, <code>TREEDECS</code>, <code>LANG</code></p>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④⓪">shape tree</a> <code>REFTREE</code> linked via <code>TREE st:references</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#compile-need">§ 7.3.2 Compile Access Need</a> with inputs <code>REFTREE</code>, <code>NEED</code>, <code>ALLNEEDS</code>, <code>OVERRIDES</code>, <code>TREEDECS</code>, <code>ALLDECS</code>, <code>LANG</code></p>
     </ol>
   </ol>
   <h5 class="heading settled" data-level="7.3.2.5" id="compile-need-getspecific"><span class="secno">7.3.2.5. </span><span class="content">_getSpecificAccessNeed</span><a class="self-link" href="#compile-need-getspecific"></a></h5>
   <p>This operation looks through all of the <a data-link-type="dfn" href="#access-need-override" id="ref-for-access-need-override④">Access Need Overrides</a> associated
with a given <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④⑤">Access Need Group</a> to see if there is an <a data-link-type="dfn" href="#access-need-override" id="ref-for-access-need-override⑤">Access Need Override</a> for the input <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④①">shape tree</a>. If there is not,
it will effective inherit its defaults from the last <a data-link-type="dfn" href="#access-need" id="ref-for-access-need②⑨">Access Need</a> instead.</p>
   <h6 class="heading settled" data-level="7.3.2.5.1" id="getspecific-inputs"><span class="secno">7.3.2.5.1. </span><span class="content">Inputs</span><a class="self-link" href="#getspecific-inputs"></a></h6>
   <ul>
    <li data-md>
     <p>Let <code>TREE</code> be the current <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④②">shape tree</a> in context</p>
    <li data-md>
     <p>Let <code>DEFAULTNEED</code> be the default <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③⓪">Access Need</a> to return</p>
    <li data-md>
     <p>Let <code>OVERRIDES</code> be the <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③①">Access Needs</a> linked via <code>GROUP hasAccessNeedOverride</code></p>
   </ul>
   <h6 class="heading settled" data-level="7.3.2.5.2" id="getspecific-outputs"><span class="secno">7.3.2.5.2. </span><span class="content">Outputs</span><a class="self-link" href="#getspecific-outputs"></a></h6>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③②">Access Need</a></p>
   </ul>
   <h6 class="heading settled" data-level="7.3.2.5.3" id="getspecific-details"><span class="secno">7.3.2.5.3. </span><span class="content">Operation Details</span><a class="self-link" href="#getspecific-details"></a></h6>
   <ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③③">Access Need</a> <code>NEED</code> in <code>OVERRIDES</code></p>
     <ol>
      <li data-md>
       <p>return <code>NEED</code> if <code>NEED registeredShapeTree</code> is <code>TREE</code></p>
     </ol>
    <li data-md>
     <p>return <code>DEFAULTNEED</code></p>
   </ol>
   <h4 class="heading settled" data-level="7.3.3" id="link-supported"><span class="secno">7.3.3. </span><span class="content">Link Supported Compiled Accesses</span><a class="self-link" href="#link-supported"></a></h4>
   <p>This is a recursive operation that iterates through all of the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③③">Compiled Accesses</a> associated with a <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①②">Compiled Access Group</a> and links together any that have a support relationship.</p>
   <p>A support relationship exists when the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④③">shape tree</a> associated with one <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③④">Compiled Access</a> has an <code>st:supports</code> predicate that links
to the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④④">shape tree</a> of another <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③⑤">Compiled Access</a>. They are
linked bi-directionally through the <code>interop:supports</code> and <code>interop:supportedBy</code> properties.</p>
   <h5 class="heading settled" data-level="7.3.3.1" id="link-supported-inputs"><span class="secno">7.3.3.1. </span><span class="content">Inputs</span><a class="self-link" href="#link-supported-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>CACCESS</code> be a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③⑥">Compiled Access</a></p>
    <li data-md>
     <p>Let <code>ALLCOMPILED</code> be all <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③⑦">Compiled Accesses</a> associated with a
given <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①③">Compiled Access Group</a></p>
   </ul>
   <h5 class="heading settled" data-level="7.3.3.2" id="link-supported-outputs"><span class="secno">7.3.3.2. </span><span class="content">Outputs</span><a class="self-link" href="#link-supported-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>None</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.3.3" id="link-supported-details"><span class="secno">7.3.3.3. </span><span class="content">Operation Details</span><a class="self-link" href="#link-supported-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>TREE</code> be <code>CACCESS registeredShapeTree</code></p>
    <li data-md>
     <p>If <code>TREE st:supports</code></p>
     <ol>
      <li data-md>
       <p>Let <code>SUPPORTEDTREE</code> be the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④⑤">shape tree</a> linked by <code>TREE st:supports</code></p>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③⑧">Compiled Access</a> <code>COMPILED</code> in <code>ALLCOMPILED</code></p>
       <ol>
        <li data-md>
         <p>Let <code>SUPPORTEDCA</code> be the return of <a href="#iterate-supported">§ 7.3.3.4 Iterate for Supported Compiled Accesses</a> with
inputs: <code>ALLCOMPILED</code>, <code>TREE</code></p>
        <li data-md>
         <p>Let <code>CACCESS supports</code> be <code>SUPPORTEDCA</code></p>
        <li data-md>
         <p>Let <code>SUPPORTEDCA supportedBy</code> be <code>CACCESS</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access③⑨">Compiled Access</a> <code>REFCA</code> linked by <code>CACCESS referencesCompiledAccess</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#link-supported">§ 7.3.3 Link Supported Compiled Accesses</a> with inputs: <code>REFCA</code>, <code>ALLCOMPILED</code></p>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④⓪">Compiled Access</a> <code>NARROWERCA</code> linked by <code>CACCESS skos:narrower</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#link-supported">§ 7.3.3 Link Supported Compiled Accesses</a> with inputs: <code>NARROWERCA</code>, <code>ALLCOMPILED</code></p>
     </ol>
   </ol>
   <h5 class="heading settled" data-level="7.3.3.4" id="iterate-supported"><span class="secno">7.3.3.4. </span><span class="content">Iterate for Supported Compiled Accesses</span><a class="self-link" href="#iterate-supported"></a></h5>
   <p>This is a recursive function that iterates through a linked hierarchy of <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④①">Compiled Accesses</a> looking for a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④②">Compiled Access</a> with a
matching <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④⑥">shape tree</a>.</p>
   <h6 class="heading settled" data-level="7.3.3.4.1" id="iterate-inputs"><span class="secno">7.3.3.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#iterate-inputs"></a></h6>
   <ul>
    <li data-md>
     <p>Let <code>CACCESS</code> be a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④③">Compiled Access</a></p>
    <li data-md>
     <p>Let <code>TREE</code> be a [=shape tree]</p>
   </ul>
   <h6 class="heading settled" data-level="7.3.3.4.2" id="iterate-outputs"><span class="secno">7.3.3.4.2. </span><span class="content">Outputs</span><a class="self-link" href="#iterate-outputs"></a></h6>
   <ul>
    <li data-md>
     <p>Returns a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④④">Compiled Access</a></p>
   </ul>
   <h6 class="heading settled" data-level="7.3.3.4.3" id="iterate-details"><span class="secno">7.3.3.4.3. </span><span class="content">Operation Details</span><a class="self-link" href="#iterate-details"></a></h6>
   <ol>
    <li data-md>
     <p>Return <code>CACCESS</code> if <code>CACCESS registeredShapeTree</code> is <code>TREE</code></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④⑤">Compiled Access</a> <code>REFCA</code> linked by <code>CACCESS referencesCompiledAccess</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#iterate-supported">§ 7.3.3.4 Iterate for Supported Compiled Accesses</a> with inputs: <code>REFCA</code>, <code>TREE</code></p>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④⑥">Compiled Access</a> <code>NARROWERCA</code> linked by <code>CACCESS skos:narrower</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#iterate-supported">§ 7.3.3.4 Iterate for Supported Compiled Accesses</a> with inputs: <code>NARROWERCA</code>, <code>TREE</code></p>
     </ol>
    <li data-md>
     <p>Return <code>NULL</code></p>
   </ol>
   <h4 class="heading settled" data-level="7.3.4" id="get-access-dec"><span class="secno">7.3.4. </span><span class="content">Get Access Decorator Resource</span><a class="self-link" href="#get-access-dec"></a></h4>
   <p>This operation returns the appropriate <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource⑥">Access Decorator Resource</a> from an input <a data-link-type="dfn" href="#access-decorator-index" id="ref-for-access-decorator-index②">Access Decorator Index</a> for the provided language.
If the provided language is not available, a default language is used instead.</p>
   <h5 class="heading settled" data-level="7.3.4.1" id="get-access-dec-inputs"><span class="secno">7.3.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#get-access-dec-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>INDEX</code> be an <a data-link-type="dfn" href="#access-decorator-index" id="ref-for-access-decorator-index③">Access Decorator Index</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①①⑦">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.4.2" id="get-access-dec-outputs"><span class="secno">7.3.4.2. </span><span class="content">Outputs</span><a class="self-link" href="#get-access-dec-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>DECR</code> be an <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource⑦">Access Decorator Resource</a> from <code>INDEX</code></p>
   </ul>
   <h5 class="heading settled" data-level="7.3.4.3" id="get-access-dec-details"><span class="secno">7.3.4.3. </span><span class="content">Operation Details</span><a class="self-link" href="#get-access-dec-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>USESERIES</code> be <code>INDEX defaultSeries</code></p>
    <li data-md>
     <p>Let <code>USEVERSION</code> be an unassigned <a data-link-type="dfn" href="#access-decorator-version" id="ref-for-access-decorator-version③">Access Decorator Version</a></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series⑤">Access Decorator Series</a> <code>SERIES</code> in <code>INDEX</code></p>
     <ol>
      <li data-md>
       <p>Let <code>USESERIES</code> be <code>SERIES</code> if <code>SERIES usesLanguage</code> == <code>LANG</code></p>
     </ol>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code
of 404 if no <a data-link-type="dfn" href="#access-decorator-series" id="ref-for-access-decorator-series⑥">Access Decorator Series</a> are found.</p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-decorator-version" id="ref-for-access-decorator-version④">Access Decorator Version</a> <code>VERSION</code> in <code>USESERIES hasVersion</code></p>
     <ol>
      <li data-md>
       <p>Let <code>USEVERSION</code> be <code>VERSION</code> if <code>VERSION</code> is a more recent <a href="https://semver.org/">semantic version</a> than <code>USEVERSION</code> or if <code>USEVERSION</code> is unassigned.</p>
     </ol>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code
of 404 if no <a data-link-type="dfn" href="#access-decorator-version" id="ref-for-access-decorator-version⑤">Access Decorator Versions</a> are found.</p>
    <li data-md>
     <p>Let <code>DECR</code> be the <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource⑧">Access Decorator Resource</a> linked
from <code>USEVERSION hasAccessDecoratorResource</code></p>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code
of 404 if <code>DECR</code> is unassigned.</p>
    <li data-md>
     <p>return <code>DECR</code></p>
   </ol>
   <h4 class="heading settled" data-level="7.3.5" id="get-group-dec"><span class="secno">7.3.5. </span><span class="content">Get Access Need Group Decorator</span><a class="self-link" href="#get-group-dec"></a></h4>
   <p>This operation returns the appropriate <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator⑤">Access Need Group Decorator</a> for an input <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④⑥">Access Need Group</a> in the provided language. If the
provided language is not available, a default language is used instead.</p>
   <h5 class="heading settled" data-level="7.3.5.1" id="get-group-dec-inputs"><span class="secno">7.3.5.1. </span><span class="content">Inputs</span><a class="self-link" href="#get-group-dec-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GROUP</code> be an <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④⑦">Access Need Group</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①①⑧">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.5.2" id="get-group-dec-outputs"><span class="secno">7.3.5.2. </span><span class="content">Outputs</span><a class="self-link" href="#get-group-dec-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GDEC</code> be an <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator⑥">Access Need Group Decorator</a> associated with <code>GROUP</code></p>
   </ul>
   <h5 class="heading settled" data-level="7.3.5.3" id="get-group-dec-details"><span class="secno">7.3.5.3. </span><span class="content">Operation Details</span><a class="self-link" href="#get-group-dec-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>DECR</code> be the <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource⑨">Access Decorator Resource</a> returned by <a href="#get-group-dec">§ 7.3.5 Get Access Need Group Decorator</a> with inputs: <code>GROUP hasAccessDecoratorIndex</code>, <code>LANG</code></p>
    <li data-md>
     <p>Let <code>USEGDEC</code> be an unassigned <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator⑦">Access Need Group Decorator</a></p>
    <li data-md>
     <p>Let <code>GDECS</code> be all <a data-link-type="dfn">Acess Need Group Decorators</a> in <code>DECR</code></p>
    <li data-md>
     <p>For each [=Acces Need Group Decorator] <code>GDEC</code> in <code>GDECS</code></p>
    <li data-md>
     <p>Let <code>USEGDEC</code> be <code>GDEC</code> if <code>GDEC hasAccessNeedGroup</code> is <code>GROUP</code></p>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code
of 404 if <code>USEGDEC</code> is unassigned</p>
    <li data-md>
     <p>return <code>USEGDEC</code></p>
   </ol>
   <h4 class="heading settled" data-level="7.3.6" id="get-need-dec"><span class="secno">7.3.6. </span><span class="content">Get Access Need Decorator</span><a class="self-link" href="#get-need-dec"></a></h4>
   <p>This operation returns the appropriate <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator⑥">Access Need Decorator</a> for an input <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③④">Access Need</a> in the provided language. If the
provided language is not available, a default language is used instead.</p>
   <h5 class="heading settled" data-level="7.3.6.1" id="get-need-dec-inputs"><span class="secno">7.3.6.1. </span><span class="content">Inputs</span><a class="self-link" href="#get-need-dec-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>NEED</code> be an <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③⑤">Access Need</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①①⑨">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="7.3.6.2" id="get-need-dec-outputs"><span class="secno">7.3.6.2. </span><span class="content">Outputs</span><a class="self-link" href="#get-need-dec-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>NDEC</code> be an <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator⑦">Access Need Decorator</a> associated with <code>NEED</code></p>
   </ul>
   <h5 class="heading settled" data-level="7.3.6.3" id="get-need-dec-details"><span class="secno">7.3.6.3. </span><span class="content">Operation Details</span><a class="self-link" href="#get-need-dec-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>GROUP</code> be <code>NEED inAccessNeedGroup</code></p>
    <li data-md>
     <p>Let <code>DECR</code> be the <a data-link-type="dfn" href="#access-decorator-resource" id="ref-for-access-decorator-resource①⓪">Access Decorator Resource</a> returned by <a href="#get-group-dec">§ 7.3.5 Get Access Need Group Decorator</a> with inputs: <code>GROUP hasAccessDecoratorIndex</code>, <code>LANG</code></p>
    <li data-md>
     <p>Let <code>USENDEC</code> be an unassigned <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator⑧">Access Need Decorator</a></p>
    <li data-md>
     <p>Let <code>NDECS</code> be all <a data-link-type="dfn">Acess Need Decorators</a> in <code>DECR</code></p>
    <li data-md>
     <p>For each [=Acces Need Decorator] <code>NDEC</code> in <code>NDECS</code></p>
    <li data-md>
     <p>Let <code>USENDEC</code> be <code>NDEC</code> if <code>NDEC hasAccessNeedGroup</code> is <code>GROUP</code> and <code>NDEC registeredShapeTree</code> is <code>NEED registeredShapeTree</code></p>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code
of 404 if <code>USENDEC</code> is unassigned</p>
    <li data-md>
     <p>return <code>USENDEC</code></p>
   </ol>
   <h2 class="heading settled" data-level="8" id="grants"><span class="secno">8. </span><span class="content">Access Grants</span><a class="self-link" href="#grants"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="grants-overview"><span class="secno">8.1. </span><span class="content">Overview</span><a class="self-link" href="#grants-overview"></a></h3>
   <p class="issue" id="issue-a3c650f4"><a class="self-link" href="#issue-a3c650f4"></a> Write overview for Access Grants</p>
   <h3 class="heading settled" data-level="8.2" id="grants-datamodel"><span class="secno">8.2. </span><span class="content">Data Model</span><a class="self-link" href="#grants-datamodel"></a></h3>
   <h4 class="heading settled" data-level="8.2.1" id="grants-datamodel-summary"><span class="secno">8.2.1. </span><span class="content">Summary</span><a class="self-link" href="#grants-datamodel-summary"></a></h4>
   <figure id="fig-grants-model">
     <img src="diagrams/grants-model.svg" width="100%/"> 
    <figcaption>Data model for the access registry</figcaption>
   </figure>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①②⓪">Agent</a> links to <a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set①">Access Grant Registry Sets</a> via the <a href="interop.ttl#hasAccessGrantRegistrySet">interop:hasAccessGrantRegistrySet</a> property.</p>
   <p>An <a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set②">Access Grant Registry Set</a> links to any number of <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry⑤">Access Grant Registries</a> via the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property.</p>
   <p>An <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry⑥">Access Grant Registry</a> links to any number of registered <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①③">Access Grants</a> and <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑤">Access Invitations</a> via the <a href="interop.ttl#hasRegistration">interop:hasRegistration</a> property.</p>
   <figure id="fig-grants-agent">
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent①②①">Agent</a> at https://alice.pod.example/profile/id#me
  linking to an <a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set③">Access Grant Registry Set</a></figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessGrantRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/grant#set></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-grants-registry-set">
    <figcaption>An <a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set④">Access Grant Registry Set</a> at
   https://alice.pod.example/profile/grant#set linking to two different <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry⑦">Access Grant Registries</a></figcaption>
<pre class="highlight"><c- g>&lt;#set></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessGrantRegistrySet</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> <c- g>&lt;https://alice.pod.example/grants/#registry></c-> <c- p>,</c->
                  <c- g>&lt;https://alice.otherpod.example/grants/#registry></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-grants-registry">
    <figcaption>An <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry⑧">Access Grant Registry</a> at https://alice.pod.example/grants/#registry
  linking to several registered <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①④">Access Grants</a> or <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑥">Access Invitations</a></figcaption>
<pre class="highlight"><c- g>&lt;#registry></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessGrantRegistry</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- g>&lt;ab3d0023-3860-4358-ae33-8d3af1097b9d#grant></c-> <c- p>,</c->
                      <c- g>&lt;ad7b935f-ced9-4ce6-835f-5c6abc046228#grant></c-> <c- p>,</c->
                      <c- g>&lt;5ed73c65-ce77-4c8a-8f7e-9715b90307e6#grant></c-> <c- p>,</c->
                      <c- g>&lt;2d575cba-3f6c-4c58-bccd-0e6266ba56cf#invitation></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-grants-grant">
    <figcaption>An <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①⑤">Access Grant</a> at
  https://alice.pod.example/grants/ab3d0023-3860-4358-ae33-8d3af1097b9d#grant </figcaption>
<pre class="highlight"><c- g>&lt;#grant></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessGrant</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> https<c- p>:</c->//trusted<c- p>.</c->example/id<c- c>#agent ;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessGrantSubject</c-> <c- g>&lt;#grant-subject></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccessGroup</c-> <c- g>&lt;#cag-notebook-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataGrant</c-> <c- g>&lt;#notebook-grant></c-><c- p>,</c-> <c- g>&lt;#note-grant></c-> <c- p>.</c->

<c- g>&lt;#grant-subject></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessGrantSubject</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessByAgent</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>accessByApplication</c-> https<c- p>:</c->//nevernote<c- p>.</c->example/id<c- c>#agent .</c->

<c- g>&lt;#notebook-grant></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataGrant</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- nn>data:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>satisfiesCompiledAccess</c-> <c- g>&lt;#ca-notebook></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>AllInstances</c-> <c- p>;</c->

<c- g>&lt;#note-grant></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataGrant</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- nn>data:</c-><c- f>note-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>note-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>satisfiesCompiledAccess</c-> <c- g>&lt;#ca-note></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>AllInstances</c-> <c- p>;</c->

<c- g>&lt;#cag-notebook-group></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccessGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAccessNeedGroup</c-> <c- nn>ex:</c-><c- f>accessNotebookGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroupDecorator</c-> <c- nn>ex:</c-><c- f>accessNotebookGroupDecorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> <c- nn>interop:</c-><c- f>Pilot</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccess</c-> <c- g>&lt;#ca-notebook></c-> <c- p>.</c->

<c- g>&lt;#ca-notebook></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> <c- nn>ex:</c-><c- f>notebookAccessDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> <c- nn>note:</c-><c- f>notebookDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>referencesCompiledAccess</c-> <c- g>&lt;#ca-notes></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasDataGrant</c-> <c- g>&lt;#notebook-grant></c-> <c- p>.</c->

<c- g>&lt;#ca-note></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>note-tree</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> <c- nn>ex:</c-><c- f>noteAccessDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> <c- nn>note:</c-><c- f>noteDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasDataGrant</c-> <c- g>&lt;#note-grant></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-grants-invitation">
    <figcaption>An <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑦">Access Invitation</a> at
  https://alice.pod.example/grants/2d575cba-3f6c-4c58-bccd-0e6266ba56cf/#invitation </figcaption>
<pre class="highlight"><c- g>&lt;#invitation></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessInvitation</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> https<c- p>:</c->//trusted<c- p>.</c->example/id<c- c>#agent ;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-09-13T19:32:52Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- s>"2020-09-13T19:32:52Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>expiresAt</c-> <c- s>"2020-09-20T19:32:52Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccessGroup</c-> <c- g>&lt;#cag-notebook-group></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataGrant</c-> <c- g>&lt;#notebook-grant></c-><c- p>,</c-> <c- g>&lt;#note-grant></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessInvitationChannel</c-> <c- g>&lt;#phone-channel></c-><c- p>,</c-> <c- g>&lt;#email-channel></c-> <c- p>.</c->

<c- g>&lt;#phone-channel></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>PhoneInvitationChannel</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>channelTarget</c-> <c- s>"(555) 555-1212"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>channelCode</c-> <c- s>"654345"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>isValidated</c-> <c- l>false</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>remainingAttempts</c-> <c- mi>3</c-> <c- p>.</c->

<c- g>&lt;#email-channel></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>EmailInvitationChannel</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>channelTarget</c-> <c- s>"bob@example.com"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>channelCode</c-> <c- s>"434567"</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>isValidated</c-> <c- l>true</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>remainingAttempts</c-> <c- mi>3</c-> <c- p>.</c->

<c- g>&lt;#notebook-grant></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataGrant</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- nn>data:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>satisfiesCompiledAccess</c-> <c- g>&lt;#ca-notebook></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>AllInstances</c-> <c- p>;</c->

<c- g>&lt;#note-grant></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataGrant</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- nn>data:</c-><c- f>note-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>note-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>satisfiesCompiledAccess</c-> <c- g>&lt;#ca-note></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>AllInstances</c-> <c- p>;</c->

<c- g>&lt;#cag-notebook-group></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccessGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAccessNeedGroup</c-> <c- nn>ex:</c-><c- f>accessNotebookGroup</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessNeedGroupDecorator</c-> <c- nn>ex:</c-><c- f>accessNotebookGroupDecorator</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>authenticatesAs</c-> <c- nn>interop:</c-><c- f>Pilot</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccess</c-> <c- g>&lt;#ca-notebook></c-> <c- p>.</c->

<c- g>&lt;#ca-notebook></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> <c- nn>ex:</c-><c- f>notebookAccessDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> <c- nn>note:</c-><c- f>notebookDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>referencesCompiledAccess</c-> <c- g>&lt;#ca-notes></c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasDataGrant</c-> <c- g>&lt;#notebook-grant></c-> <c- p>.</c->

<c- g>&lt;#ca-note></c->
    <c- b>a</c-> <c- nn>interop:</c-><c- f>CompiledAccess</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>note-tree</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>accessNecessity</c-> <c- nn>interop:</c-><c- f>AccessRequired</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasAccessNeedDecorator</c-> <c- nn>ex:</c-><c- f>noteAccessDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasShapeTreeDecorator</c-> <c- nn>note:</c-><c- f>noteDecorator</c-> <c- p>;</c->
    <c- nn>interop:</c-><c- f>hasDataGrant</c-> <c- g>&lt;#note-grant></c-> <c- p>.</c->
</pre>
   </figure>
   <h4 class="heading settled" data-level="8.2.2" id="datamodel-access-registry-set"><span class="secno">8.2.2. </span><span class="content">Access Grant Registry Set</span><a class="self-link" href="#datamodel-access-registry-set"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-grant-registry-set">Access Grant Registry Set</dfn> is a <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set④">Registry Set</a> specifically
made up of <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry⑨">Access Grant Registries</a>.</p>
   <table align="left" class="classinfo data" id="classAccessGrantRegistrySet">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3" text-align="left"> <a href="interop.ttl#AccessGrantRegistrySet">AccessGrantRegistrySet</a> a rdfs:subClassOf <a href="#datamodel-agent">RegistrySet</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistry
      <td>Registry
      <td>Link to associated <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①⓪">Access Grant Registries</a>
   </table>
   <p>The <a href="#shexAccessGrantRegistrySet">AccessGrantRegistrySetShape</a> is used to validate
an instance of the <a href="#classAccessGrantRegistrySet">AccessGrantRegistrySet</a> class.</p>
<pre class="highlight" id="shexAccessGrantRegistrySet"><c- g>&lt;#AccessGrantRegistrySetShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessGrantRegistrySet</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> IRI+
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessGrantRegistrySetTree">AccessGrantRegistrySetTree</a> is assigned to a resource to ensure it will validate against the <a href="#shexAccessGrantRegistrySet">AccessGrantRegistrySetShape</a>.</p>
<pre class="highlight" id="treeAccessGrantRegistrySet"><c- g>&lt;#AccessGrantRegistrySetTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessGrantRegistrySetShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"access"</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="8.2.3" id="datamodel-access-registry"><span class="secno">8.2.3. </span><span class="content">Access Grant Registry</span><a class="self-link" href="#datamodel-access-registry"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-grant-registry">Access Grant Registry</dfn> is a collection of <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①⑥">Access Grants</a> stored in a specific location in a <a data-link-type="dfn" href="#pod" id="ref-for-pod③">pod</a>.</p>
   <table align="left" class="classinfo data" id="classAccessGrantRegistry">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessGrantRegistry">AccessGrantRegistry</a> a rdfs:subClassOf <a href="#datamodel-agent">Registry</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistration
      <td>Registration
      <td>Link to associated <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①⑦">Access Grants</a>
   </table>
   <p>The <a href="#shexAccessGrantRegistry">AccessGrantRegistryShape</a> is used to validate an
instance of the <a href="#classAccessGrantRegistry">AccessGrantRegistry</a> class.</p>
<pre class="highlight" id="shexAccessGrantRegistry"><c- g>&lt;#AccessGrantRegistryShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessGrantRegistry</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> IRI*
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessGrantRegistryTree">AccessGrantRegistryTree</a> is assigned
to a container resource to ensure that it will validate against the <a href="#shexAccessGrantRegistry">AccessGrantRegistryShape</a>, and contain only
conformant instances of the <a href="#treeAccessGrant">AccessGrantTree</a>.</p>
<pre class="highlight" id="treeAccessGrantRegistry"><c- g>&lt;#AccessGrantRegistryTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessGrantRegistryShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>contains</c-> <c- g>&lt;#AccessGrantTree></c-> <c- p>,</c->
              <c- g>&lt;#AccessInvitationTree></c-> <c- p>,</c->
              <c- nn>st:</c-><c- f>AllowNone</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="8.2.4" id="datamodel-access-grant"><span class="secno">8.2.4. </span><span class="content">Access Grant</span><a class="self-link" href="#datamodel-access-grant"></a></h4>
   <p>Each <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-grant">Access Grant</dfn> represents access granted to one recipient; the <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject">Access Grant Subject</a>, based on access criteria detailed in one or more <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①④">Compiled Access Groups</a>. Access is granted to registered data in <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②④">Data Registries</a>, identified by <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①">Data Grants</a> linked to the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①⑧">Access Grant</a>.</p>
   <table align="left" class="classinfo data" id="classAccessGrant">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessGrant">AccessGrant</a> a rdfs:subClassOf <a href="#datamodel-agent">Registration</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>registeredBy
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①②②">Agent</a> that registered the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant①⑨">Access Grant</a>
     <tr>
      <td>registeredWith
      <td>Application
      <td><a data-link-type="dfn" href="#application" id="ref-for-application⑨②">Application</a> used to create the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②⓪">Access Grant</a>
     <tr>
      <td>registeredAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②①">Access Grant</a> was created
     <tr>
      <td>updatedAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②②">Access Grant</a> was updated
     <tr>
      <td>hasAccessGrantSubject
      <td>AccessGrantSubject
      <td>Links to one <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject①">Access Grant Subject</a> who was granted access.
     <tr>
      <td>hasCompiledAccessGroup
      <td>CompiledAccessGroup
      <td>Links to a <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①⑤">Compiled Access Group</a> associated with the Access Grant.
     <tr>
      <td>hasDataGrant
      <td>DataGrant
      <td>Links to a <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②">Data Grant</a> associated with the Access Grant.
   </table>
   <p>The <a href="#shexAccessGrant">AccessGrantShape</a> is used to validate an instance
of the <a href="#classAccessGrant">AccessGrant</a> class.</p>
<pre class="highlight" id="shexAccessGrant"><c- g>&lt;#AccessGrantShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessGrant</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessGrantSubject</c-> @AccessGrantSubject <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccessGroup</c-> @CompiledAccessGroupShape+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataGrant</c-> @DataGrantShape+
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessGrantTree">AccessGrantTree</a> is assigned to a
resource via the <a href="#treeAccessGrantRegistry">AccessGrantRegistryTree</a>, and ensure
that the assigned resource will validate against the <a href="#shexAccessGrant">AccessGrantShape</a>.</p>
<pre class="highlight" id="treeAccessGrant"><c- g>&lt;#AccessGrantTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessGrantShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="8.2.5" id="datamodel-access-grant-subject"><span class="secno">8.2.5. </span><span class="content">Access Grant Subject</span><a class="self-link" href="#datamodel-access-grant-subject"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-grant-subject">Access Grant Subject</dfn> represents a unique combination of
who and what is being granted access. For example, it allows a single <a data-link-type="dfn" href="#agent" id="ref-for-agent①②③">Agent</a> to be specified, or a given <a data-link-type="dfn" href="#agent" id="ref-for-agent①②④">Agent</a> using a given <a data-link-type="dfn" href="#application" id="ref-for-application⑨③">Application</a>.</p>
   <table align="left" class="classinfo data" id="classAccessGrantSubject">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"><a href="interop.ttl#AccessGrant">AccessGrantSubject</a>
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>accessByAgent
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①②⑤">Agent</a> being granted access
     <tr>
      <td>accessByApplication
      <td>Application
      <td><a data-link-type="dfn" href="#application" id="ref-for-application⑨④">Application</a> being granted access
   </table>
   <p>The <a href="#shexAccessGrantSubject">AccessGrantSubjectShape</a> is used to validate
an instance of the <a href="#classAccessGrantSubject">AccessGrantSubject</a> class.</p>
<pre class="highlight" id="shexAccessGrantSubject"><c- g>&lt;#AccessGrantSubjectShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessGrantSubject</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessGrantSubjectAgent</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessGrantSubjectApplication</c-> IRI?
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="8.2.6" id="datamodel-data-grant"><span class="secno">8.2.6. </span><span class="content">Data Grant</span><a class="self-link" href="#datamodel-data-grant"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="data-grant">Data Grant</dfn> records a decision made by a
given <a data-link-type="dfn" href="#agent" id="ref-for-agent①②⑥">Agent</a> based upon <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④⑦">Compiled Accesses</a> presented to them
for a given <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤④">Data Registration</a>.</p>
   <table align="left" class="classinfo data" id="classDataGrant">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#DataGrant">DataGrant</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistration
      <td>DataRegistration
      <td><a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤⑤">Data Registration</a> the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant③">Data Grant</a> applies to
     <tr>
      <td>registeredShapeTree
      <td>st:ShapeTree
      <td>The <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④⑦">shape tree</a> registered at the target <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤⑥">Data Registration</a>
     <tr>
      <td>satisfiesCompiledAccess
      <td>CompiledAccess
      <td>Links to a <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④⑧">Compiled Access</a> satisfied by the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant④">Data Grant</a>
     <tr>
      <td>accessMode
      <td>acl:Read, acl:Write, acl:Control, acl:Append
      <td>Union of access modes from <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access④⑨">Compiled Accesses</a> linked by
      satisfiesCompiledAccess
     <tr>
      <td>scopeOfDataGrant
      <td> interop:AllInstances, interop:InheritInstances,
      interop:SelectedInstances, interop:NoAccess
      <td>
       Identifies the access scope of the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant⑤">Data Grant</a> 
       <ul>
        <li>interop:AllInstances - Scope includes
              access to all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③⑦">Registered Data Instances</a> of the associated <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤⑦">Data Registration</a>
        <li>interop:InheritInstances - Scope includes
              access to <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③⑧">Registered Data Instances</a> inherited by
              instances selected in the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant⑥">Data Grant</a> linked via
              interop:inheritsFrom
        <li>interop:SelectedInstances - Scope includes
              access only to those <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance③⑨">Registered Data Instances</a> specifically
              selected by the <a data-link-type="dfn" href="#agent" id="ref-for-agent①②⑦">Agent</a>
        <li>interop:NoAccess
         - No access is granted 
       </ul>
     <tr>
      <td>inheritsFrom
      <td><a href="#classDataGrant">DataGrant</a>
      <td>Identifies a <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant⑦">Data Grant</a> whose selected <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④⓪">Registered Data Instances</a> narrow the scope of instances to be
      presented by this grant.
     <tr>
      <td>hasRegisteredDataInstance
      <td>Instance of registeredShapeTree
      <td>Links to a <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④①">Registered Data Instance</a> of registeredShapeTree.
   </table>
   <p>The <a href="#shexDataGrant">DataGrantShape</a> is used to
validate an instance of the <a href="#classDataGrant">DataGrant</a> class.</p>
<pre class="highlight" id="shexDataGrant"><c- g>&lt;#DataGrantShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>DataGrant</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>satisfiesCompiledAccess</c-> @CompiledAccessShape+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- p>[</c-> <c- nn>acl:</c-><c- f>Read</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- nn>acl:</c-><c- f>Append</c-> <c- nn>acl:</c-><c- f>Control</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>SelectedInstances</c-> <c- nn>interop:</c-><c- f>AllInstances</c-> <c- nn>interop:</c-><c- f>InheritInstances</c-> <c- nn>interop:</c-><c- f>NoAccess</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>inheritsFrom</c-> @DataGrantShape*
<c- p>}</c->
</pre>
   <h4 class="heading settled" data-level="8.2.7" id="datamodel-access-invitation"><span class="secno">8.2.7. </span><span class="content">Access Invitation</span><a class="self-link" href="#datamodel-access-invitation"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-invitation">Access Invitation</dfn> is a subclass of <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②③">Access Grant</a> used when
an <a data-link-type="dfn" href="#agent" id="ref-for-agent①②⑧">Agent</a> wishes to grant access to another <a data-link-type="dfn" href="#agent" id="ref-for-agent①②⑨">Agent</a> whose
decentralized <a data-link-type="dfn" href="#identity" id="ref-for-identity①⑧">identity</a> is unknown to them, or may not exist yet, so they
must be first invited through another channel (such as phone or email).</p>
   <p>Like an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②④">Access Grant</a>, an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑧">Access Invitation</a> links to access
criteria detailed in one or more <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①⑥">Compiled Access Groups</a>, with
associated <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant⑧">Data Grants</a> indicating the intended access to be granted.</p>
   <p>However, instead of linking to an <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject②">Access Grant Subject</a>, an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation⑨">Access Invitation</a> links to one or more <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑥">Access Invitation Channels</a>.</p>
   <p>Each channel represents a mechanism through which the invitation can
be delivered and validated. The mechanism is designed so that multiple
channels may be validated before an invitation is confirmed and
converted to an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②⑤">Access Grant</a>.</p>
   <table align="left" class="classinfo data" id="classAccessInvitation">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessInvitation">AccessInvitation</a> a rdfs:subClassOf <a href="#datamodel-access-grant">AccessGrant</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>registeredBy
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①③⓪">Agent</a> that registered the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⓪">Access Invitation</a>
     <tr>
      <td>registeredWith
      <td>Application
      <td><a data-link-type="dfn" href="#application" id="ref-for-application⑨⑤">Application</a> used to create the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①①">Access Invitation</a>
     <tr>
      <td>registeredAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①②">Access Invitation</a> was created
     <tr>
      <td>updatedAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①③">Access Invitation</a> was updated
     <tr>
      <td>expiresAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①④">Access Invitation</a> expires
     <tr>
      <td>hasAccessInvitationChannel
      <td>AccessInvitationChannel
      <td>Links to an <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑦">Access Invitation Channel</a>
     <tr>
      <td>hasCompiledAccessGroup
      <td>CompiledAccessGroup
      <td>Links to a <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①⑦">Compiled Access Group</a> associated with the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑤">Access Invitation</a>.
     <tr>
      <td>hasDataGrant
      <td>DataGrant
      <td>Links to a <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant⑨">Data Grant</a> associated with the <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑥">Access Invitation</a>.
   </table>
   <p>The <a href="#shexAccessInvitation">AccessInvitationShape</a> is used to validate an
instance of the <a href="#classAccessInvitation">AccessInvitation</a> class.</p>
<pre class="highlight" id="shexAccessInvitation"><c- g>&lt;#AccessInvitationShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessInvitation</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>expiresAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c->? <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasCompiledAccessGroup</c-> @<c- g>&lt;#:CompiledAccessGroupShape></c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataGrant</c-> @<c- g>&lt;#:DataGrantShape></c->+
  <c- nn>interop:</c-><c- f>hasAccessInvitationChannel</c-> @<c- g>&lt;#:AccessInvitationChannelShape></c->+ <c- p>;</c->
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessInvitationTree">AccessInvitationTree</a> is assigned
to a resource via the <a href="#treeAccessGrantRegistry">AccessGrantRegistryTree</a>, and ensures
that the assigned resource will validate against the <a href="#shexAccessInvitation">AccessInvitationShape</a>.</p>
<pre class="highlight" id="treeAccessInvitation"><c- g>&lt;#AccessInvitationTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessInvitationShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="8.2.8" id="datamodel-access-invitation-channel"><span class="secno">8.2.8. </span><span class="content">Access Invitation Channel</span><a class="self-link" href="#datamodel-access-invitation-channel"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-invitation-channel">Access Invitation Channel</dfn> represents a mechanism through
which an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑦">Access Invitation</a> can be delivered and validated.</p>
   <table align="left" class="classinfo data" id="classAccessInvitationChannel">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessInvitationChannel">AccessInvitationChannel</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>rdf:type
      <td>interop:PhoneInvitationChannel,
      interop:EmailInvitationChannel,
      interop:SMSInvitationChannel,
      interop:OfflineInvitationChannel,
      interop:LDNInvitationChannel
      <td>Each channel is represented by a subClassOf
      AccessInvitationChannel
     <tr>
      <td>channelTarget
      <td>xsd:string
      <td>Target used when validating the channel
     <tr>
      <td>channelCode
      <td>xsd:string
      <td>Code used for channel validation
     <tr>
      <td>isValidated
      <td>xsd:boolean
      <td>Indicates whether the channel has been validated
     <tr>
      <td>remainingAttempts
      <td>xsd:integer
      <td>Number of allowed validation attempts remaining
   </table>
   <p>The <a href="#shexAccessInvitationChannel">AccessInvitationChannelShape</a> is used to
validate an instance of the <a href="#classAccessInvitation">AccessInvitationChannel</a> class.</p>
<pre class="highlight" id="shexAccessInvitationChannel"><c- g>&lt;#AccessInvitationChannelShape></c-> <c- p>{</c->
   <c- b>a</c-> @<c- g>&lt;#ChannelTypes></c-> <c- p>;</c->
   <c- nn>interop:</c-><c- f>channelTarget</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
   <c- nn>interop:</c-><c- f>channelCode</c-> <c- nn>xsd:</c-><c- f>string</c-> <c- p>;</c->
   <c- nn>interop:</c-><c- f>isValidated</c-> <c- nn>xsd:</c-><c- f>boolean</c-> <c- p>;</c->
   <c- nn>interop:</c-><c- f>remainingAttempts</c-> <c- nn>xsd:</c-><c- f>integer</c->
<c- p>}</c->

<c- g>&lt;#ChannelTypes></c-> <c- p>[</c->
  <c- nn>:</c-><c- f>PhoneInvitationChannel</c->   <c- c># Telephone</c->
  <c- nn>:</c-><c- f>EmailInvitationChannel</c->   <c- c># E-mail</c->
  <c- nn>:</c-><c- f>SMSInvitationChannel</c->     <c- c># SMS (Simple Messaging Service)</c->
  <c- nn>:</c-><c- f>OfflineInvitationChannel</c-> <c- c># Other communication, e.g. verbal, shared note</c->
  <c- nn>:</c-><c- f>LDNInvitationChannel</c->     <c- c># Linked Data Notification</c->
<c- p>]</c->
</pre>
   <h3 class="heading settled" data-level="8.3" id="grants-hierarchy"><span class="secno">8.3. </span><span class="content">Resource Hierarchy</span><a class="self-link" href="#grants-hierarchy"></a></h3>
   <table align="left" class="data tree">
    <colgroup>
     <col>
     <col>
     <col>
     <col>
    <thead>
     <tr>
      <th>Resource
      <th>Class
      <th>Shape
      <th>Shape Tree
    <tbody>
     <tr>
      <td><code>/profile/</code>
      <td>-
      <td>-
      <td><a href="#treeAgent">ProfileTree</a>
     <tr>
      <td><code>-- grant#set</code>
      <td><a href="#classAccessGrantRegistrySet">AccessGrantRegistrySet</a>
      <td><a href="#shexAccessGrantRegistrySet">AccessGrantRegistrySetShape</a>
      <td><a href="#treeAccessGrantRegistrySet">AccessGrantRegistrySetTree</a>
     <tr>
      <td><code>/grants/#registry</code>
      <td><a href="#classAccessGrantRegistry">AccessGrantRegistry</a>
      <td><a href="#shexAccessGrantRegistry">AccessGrantRegistryShape</a>
      <td><a href="#treeAccessGrantRegistry">AccessGrantRegistryTree</a>
     <tr>
      <td><code>-- c482f931...630e5ab0#grant</code>
      <td><a href="#classAccessGrant">AccessGrant</a>
      <td><a href="#shexAccessGrant">AccessGrantShape</a>
      <td><a href="#treeAccessGrant">AccessGrantTree</a>
     <tr>
      <td><code>-- e0983a7e...88c387ea#grant</code>
      <td><a href="#classAccessGrant">AccessGrant</a>
      <td><a href="#shexAccessGrant">AccessGrantShape</a>
      <td><a href="#treeAccessGrant">AccessGrantTree</a>
     <tr>
      <td><code>-- eddf13d6...7f4962c5#grant</code>
      <td><a href="#classAccessGrant">AccessGrant</a>
      <td><a href="#shexAccessGrant">AccessGrantShape</a>
      <td><a href="#treeAccessGrant">AccessGrantTree</a>
     <tr>
      <td><code>-- a990c1b9...c041eb74#grant</code>
      <td><a href="#classAccessGrant">AccessGrant</a>
      <td><a href="#shexAccessGrant">AccessGrantShape</a>
      <td><a href="#treeAccessGrant">AccessGrantTree</a>
     <tr>
      <td><code>-- 265ef957...6689aee7#grant</code>
      <td><a href="#classAccessGrant">AccessGrant</a>
      <td><a href="#shexAccessGrant">AccessGrantShape</a>
      <td><a href="#treeAccessGrant">AccessGrantTree</a>
   </table>
   <p>The <a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set⑤">Access Grant Registry Set</a> and the <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①①">Access Grant Registry</a> MAY or MAY NOT
be on the same <a data-link-type="dfn" href="#pod" id="ref-for-pod④">pod</a>.</p>
   <p><a data-link-type="dfn" href="#access-grant-registry-set" id="ref-for-access-grant-registry-set⑥">Access Grant Registry Set</a> and <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①②">Access Grant Registry</a> resources MAY use any
resource or subject names.</p>
   <p><a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②⑥">Access Grants</a> MUST use <a href="https://www.ietf.org/rfc/rfc4122.txt">UUIDs</a> for resource names.</p>
   <h3 class="heading settled" data-level="8.4" id="grants-operations"><span class="secno">8.4. </span><span class="content">Operations</span><a class="self-link" href="#grants-operations"></a></h3>
   <ul>
    <li data-md>
     <p><a href="#grants-initializegrant">§ 8.4.1 Initialize Grant</a> - Initializes a new <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②⑦">Access Grant</a> for a given <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject③">Access Grant Subject</a> or an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑧">Access Invitation</a> for one or more <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑧">Access Invitation Channels</a> with one or more [=Access Need Groups</p>
    <li data-md>
     <p><a href="#grants-loadgrant">§ 8.4.2 Load Grant</a> - Load an existing <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②⑧">Access Grant</a> from an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①③">Access Grant Registry</a></p>
    <li data-md>
     <p><a href="#grants-loadinvitation">§ 8.4.3 Load Invitation</a> - Load an existing <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation①⑨">Access Invitation</a> from an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①④">Access Grant Registry</a></p>
    <li data-md>
     <p><a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> - Store a new or updated <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant②⑨">Access Grant</a> in an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①⑤">Access Grant Registry</a></p>
    <li data-md>
     <p><a href="#grants-recordinvitation">§ 8.4.6 Record Invitation</a> - Store a new or updated <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⓪">Access Invitation</a> in an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①⑥">Access Grant Registry</a></p>
    <li data-md>
     <p><a href="#grants-applyperms">§ 8.4.9 Apply Permissions</a> - Apply permissions to <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource①">acl resources</a> based
on <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③⓪">Access Grant</a> decisions.</p>
   </ul>
   <p>The <a href="#grants-present">§ 8.4.10 Present Grant</a> operation is non-normative, and meant to instruct
a developer in how to load and initialize an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③①">Access Grant</a>, present it
to an <a data-link-type="dfn" href="#agent" id="ref-for-agent①③①">Agent</a>, invoke the appropriate operations to manipulate <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①⓪">Data Grants</a> in accordance with the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③②">Agent’s</a> decisions, and then
record those decisions, which will also apply the permission changes.</p>
   <h4 class="heading settled" data-level="8.4.1" id="grants-initializegrant"><span class="secno">8.4.1. </span><span class="content">Initialize Grant</span><a class="self-link" href="#grants-initializegrant"></a></h4>
   <p>Initialize an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③②">Access Grant</a> or <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②①">Access Invitation</a> by processing
the input <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④⑧">Access Need Groups</a> into <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①⑧">Compiled Access Groups</a>, then initializing <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①①">Data Grants</a> with
no access (yet) for the corresponding <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤⓪">Compiled Accesses</a> in each group.</p>
   <h5 class="heading settled" data-level="8.4.1.1" id="initialize-inputs"><span class="secno">8.4.1.1. </span><span class="content">Inputs</span><a class="self-link" href="#initialize-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>SUBJECT</code> be an <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject④">Access Grant Subject</a></p>
    <li data-md>
     <p>Let <code>ICHANNELS</code> be a set of <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel⑨">Access Invitation Channels</a></p>
    <li data-md>
     <p>Let <code>GROUPS</code> be <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group④⑨">Access Need Groups</a> to associate with the <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③③">Access Grant</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③③">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="8.4.1.2" id="initialize-outputs"><span class="secno">8.4.1.2. </span><span class="content">Outputs</span><a class="self-link" href="#initialize-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A newly initialized <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③④">Access Grant</a> or <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②②">Access Invitation</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.1.3" id="initialize-details"><span class="secno">8.4.1.3. </span><span class="content">Operation Details</span><a class="self-link" href="#initialize-details"></a></h5>
   <ol>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code of 400 if both <code>SUBJECT</code> and <code>ICHANNELS</code> are provided</p>
    <li data-md>
     <p>If <code>SUBJECT</code> is provided</p>
     <ol>
      <li data-md>
       <p>Let <code>NEW</code> be a newly initialized <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③⑤">Access Grant</a></p>
      <li data-md>
       <p>Let <code>NEW hasAccessGrantSubject</code> be <code>SUBJECT</code></p>
     </ol>
    <li data-md>
     <p>If <code>ICHANNELS</code> is provided</p>
     <ol>
      <li data-md>
       <p>Let <code>NEW</code> be a newly initialized <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②③">Access Invitation</a></p>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①⓪">Access Invitation Channel</a> <code>ICHANNEL</code> in <code>ICHANNELS</code></p>
       <ol>
        <li data-md>
         <p>Let <code>ICHANNEL</code> be linked to <code>NEW</code> via <code>NEW hasAccessInvitationChannel</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑤⓪">Access Need Group</a> <code>GROUP</code> in <code>GROUPS</code></p>
     <ol>
      <li data-md>
       <p>Let <code>CAGROUP</code> be the <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group①⑨">Compiled Access Group</a> returned from <a href="#compile-group">§ 7.3.1 Compile Access Need Group</a> with inputs <code>GROUP</code>, <code>LANG</code></p>
      <li data-md>
       <p>Link <code>CAGROUP</code> to <code>NEW</code> via <code>NEW hasCompiledAccessGroup</code></p>
     </ol>
    <li data-md>
     <p>Let <code>CAGROUPS</code> be all <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②⓪">Compiled Access Groups</a> linked to <code>NEW</code> via <code>hasCompiledAccessGroup</code></p>
    <li data-md>
     <p>Let <code>DATAGRANTS</code> be an empty set of <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①②">Data Grants</a></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②①">Compiled Access Group</a> <code>CAGROUP</code> in <code>CAGROUPS</code></p>
     <ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤①">Compiled Access</a> <code>CACCESS</code> in <code>CAGROUP</code></p>
       <ol>
        <li data-md>
         <p>Let <code>MATCHING</code> be a <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①③">Data Grant</a> in <code>DATAGRANTS</code> where <code>CACCESS registeredShapeTree</code> == <code>MATCHING registeredShapeTree</code></p>
        <li data-md>
         <p>If <code>MATCHING</code> let <code>CACCESS hasDataGrant</code> be <code>MATCHING</code></p>
        <li data-md>
         <p>If <code>MATCHING</code> is missing</p>
         <ol>
          <li data-md>
           <p>Let <code>NEWDATAGRANT</code> be a newly initialized <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①④">Data Grant</a></p>
          <li data-md>
           <p>Let <code>NEWDATAGRANT registeredShapeTree</code> be <code>CACCESS registeredShapeTree</code></p>
          <li data-md>
           <p>Let <code>NEWDATAGRANT hasRegistration</code> be a <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤⑧">Data Registration</a> <code>DR</code> where <code>DR registeredShapeTree</code> == <code>NEWDATAGRANT registeredShapeTree</code></p>
          <li data-md>
           <p>Let <code>NEWDATAGRANT scopeOfDataGrant</code> be <code>interop:NoAccess</code></p>
          <li data-md>
           <p>Let <code>CACCESS hasDataGrant</code> be <code>NEWDATAGRANT</code></p>
          <li data-md>
           <p>Add <code>CACCESS hasDataGrant</code> to <code>DATAGRANTS</code></p>
         </ol>
        <li data-md>
         <p>Let <code>DATAGRANT</code> be <code>CACCESS hasDataGrant</code></p>
        <li data-md>
         <p>Let <code>DATAGRANT satisfiesCompiledAccess</code> include <code>CACCESS</code></p>
        <li data-md>
         <p>Let <code>DATAGRANT accessmode</code>s include <code>CACCESS accessmode</code>s</p>
       </ol>
     </ol>
    <li data-md>
     <p>Return <code>NEW</code></p>
   </ol>
   <h4 class="heading settled" data-level="8.4.2" id="grants-loadgrant"><span class="secno">8.4.2. </span><span class="content">Load Grant</span><a class="self-link" href="#grants-loadgrant"></a></h4>
   <p>This operation will load an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③⑥">Access Grant</a> from a given <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①⑦">Access Grant Registry</a></p>
   <h5 class="heading settled" data-level="8.4.2.1" id="loadgrant-inputs"><span class="secno">8.4.2.1. </span><span class="content">Inputs</span><a class="self-link" href="#loadgrant-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>SUBJECT</code> be an <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject⑤">Access Grant Subject</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①⑧">Access Grant Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.2.2" id="loadgrant-outputs"><span class="secno">8.4.2.2. </span><span class="content">Outputs</span><a class="self-link" href="#loadgrant-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③⑦">Access Grant</a> corresponding to <code>SUBJECT</code></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.2.3" id="loadgrant-details"><span class="secno">8.4.2.3. </span><span class="content">Operation Details</span><a class="self-link" href="#loadgrant-details"></a></h5>
   <ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③⑧">Access Grant</a> <code>GRANT</code> included in <code>REGISTRY hasRegistration</code></p>
     <ol>
      <li data-md>
       <p>return <code>GRANT</code> if <code>GRANT hasAccessGrantSubject</code> == <code>SUBJECT</code></p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="8.4.3" id="grants-loadinvitation"><span class="secno">8.4.3. </span><span class="content">Load Invitation</span><a class="self-link" href="#grants-loadinvitation"></a></h4>
   <p>This operation will load an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②④">Access Invitation</a> from a given <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry①⑨">Access Grant Registry</a></p>
   <h5 class="heading settled" data-level="8.4.3.1" id="loadinvitation-inputs"><span class="secno">8.4.3.1. </span><span class="content">Inputs</span><a class="self-link" href="#loadinvitation-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>TARGET</code> be a <code>interop:ChannelTarget</code> to match</p>
    <li data-md>
     <p>Let <code>CODE</code> be an optional <code>interop:channelCode</code> to match</p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②⓪">Access Grant Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.3.2" id="loadinvitation-outputs"><span class="secno">8.4.3.2. </span><span class="content">Outputs</span><a class="self-link" href="#loadinvitation-outputs"></a></h5>
   <ul>
    <li data-md>
     <p><a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑤">Access Invitations</a> matching <code>TARGET</code> and (if provided) <code>CODE</code></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.3.3" id="loadinvitation-details"><span class="secno">8.4.3.3. </span><span class="content">Operation Details</span><a class="self-link" href="#loadinvitation-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>INVITATIONS</code> be an empty set of <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑥">Access Invitations</a></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑦">Access Invitation</a> <code>INVITATION</code> linked via <code>REGISTRY hasRegistration</code></p>
     <ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①①">Access Invitation Channel</a> <code>ICHANNEL</code> linked via <code>INVITATION hasAccessInvitationChannel</code></p>
       <ol>
        <li data-md>
         <p>Next if <code>ICHANNEL channelTarget</code> != <code>TARGET</code></p>
        <li data-md>
         <p>Next if <code>CODE</code> is not empty and <code>ICHANNEL channelCode</code> != <code>CODE</code></p>
        <li data-md>
         <p>Add <code>INVITATION</code> to <code>INVITATIONS</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>Return <code>INVITATIONS</code></p>
   </ol>
   <h4 class="heading settled" data-level="8.4.4" id="grants-validategrant"><span class="secno">8.4.4. </span><span class="content">Validate Grant</span><a class="self-link" href="#grants-validategrant"></a></h4>
   <p>This operation is used to validate an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant③⑨">Access Grant</a> or <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑧">Access Invitation</a> before it is stored in an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②①">Access Grant Registry</a></p>
   <h5 class="heading settled" data-level="8.4.4.1" id="validategrant-inputs"><span class="secno">8.4.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#validategrant-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④⓪">Access Grant</a> or <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation②⑨">Access Invitation</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.4.2" id="validategrant-outputs"><span class="secno">8.4.4.2. </span><span class="content">Outputs</span><a class="self-link" href="#validategrant-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>Success or Failure Code</p>
   </ul>
   <h5 class="heading settled" data-level="8.4.4.3" id="validategrant-details"><span class="secno">8.4.4.3. </span><span class="content">Operation Details</span><a class="self-link" href="#validategrant-details"></a></h5>
   <ol>
    <li data-md>
     <p>If <code>GRANT</code> is an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⓪">Access Invitation</a></p>
     <ol>
      <li data-md>
       <p>Perform a validation of the RDF graph of <code>GRANT</code> against <a href="interop.shex#AccessInvitationShape">interop:AccessInvitationShape</a>. <em class="rfc2119">MUST</em> return a status code of 400 if
validation fails.</p>
     </ol>
    <li data-md>
     <p>If <code>GRANT</code> is an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④①">Access Grant</a></p>
     <ol>
      <li data-md>
       <p>Perform a validation of the RDF graph of <code>GRANT</code> against <a href="interop.shex#AccessGrantShape">interop:AccessGrantShape</a>. <em class="rfc2119">MUST</em> return a status code of 400 if
validation fails.</p>
     </ol>
    <li data-md>
     <p>Let <code>CAGROUPS</code> be the <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②②">Compiled Access Groups</a> linked to <code>GRANT</code> via <code>GRANT hasCompiledAccessGroup</code></p>
    <li data-md>
     <p>Let <code>DGRANTS</code> be the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①⑤">Data Grants</a> linked to <code>GRANT</code> via <code>GRANT hasDataGrant</code></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②③">Compiled Access Group</a> <code>CAGROUP</code> in <code>CAGROUPS</code>:</p>
     <ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤②">Compiled Access</a> <code>CACCESS</code> in <code>CAGROUP</code> traversed via <code>CACCESS skos:narrower</code> or <code>CACCESS referencesCompiledAccess</code>:</p>
       <ol>
        <li data-md>
         <p>Let <code>NDGRANT</code> be the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①⑥">Data Grant</a> associated with <code>CACCESS</code> via <code>CACCESS hasDataGrant</code></p>
         <ol>
          <li data-md>
           <p>Error if <code>NDGRANT</code> is missing</p>
          <li data-md>
           <p>Error if <code>NDGRANT satisfiesCompiledAccess</code> doesn’t link to <code>CACCESS</code></p>
          <li data-md>
           <p>Error if <code>interop:RegisteredShapeTree</code> is not the same in <code>NDGRANT</code> and <code>CACCESS</code></p>
         </ol>
       </ol>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①⑦">Data Grant</a> <code>DGRANT</code> in <code>DGRANTS</code></p>
     <ol>
      <li data-md>
       <p>Let <code>CA</code> be all <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤③">Compiled Accesses</a> across <code>CAGROUPS</code></p>
      <li data-md>
       <p>Let <code>DGCA</code> be all <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤④">Compiled Accesses</a> linked to <code>DGRANT</code> via <code>DGRANT satisfiesCompiledAccess</code></p>
      <li data-md>
       <p>Error if <code>DGCA</code> is not in <code>CA</code></p>
      <li data-md>
       <p>Error if <code>DGCA</code> is empty</p>
      <li data-md>
       <p>Error if <code>DGRANT</code> access modes are not an exact union of <code>DGCA accessMode</code> values when <code>DGRANT scopeOfDataGrant</code> is not <code>interop:NoAccess</code></p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="8.4.5" id="grants-recordgrant"><span class="secno">8.4.5. </span><span class="content">Record Grant</span><a class="self-link" href="#grants-recordgrant"></a></h4>
   <p>This operation stores a new or updated <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④②">Access Grant</a> in
an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②②">Access Grant Registry</a>, applies permissions accordingly, and
calls for an access receipt to be provided.</p>
   <h5 class="heading settled" data-level="8.4.5.1" id="recordgrant-inputs"><span class="secno">8.4.5.1. </span><span class="content">Inputs</span><a class="self-link" href="#recordgrant-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④③">Access Grant</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②③">Access Grant Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.5.2" id="recordgrant-outputs"><span class="secno">8.4.5.2. </span><span class="content">Outputs</span><a class="self-link" href="#recordgrant-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④④">Access Grant</a> stored in <code>REGISTRY</code> with permissions applied and <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①⑧">Access Receipt</a> provided</p>
   </ul>
   <h5 class="heading settled" data-level="8.4.5.3" id="recordgrant-details"><span class="secno">8.4.5.3. </span><span class="content">Operation Details</span><a class="self-link" href="#recordgrant-details"></a></h5>
   <ol>
    <li data-md>
     <p>Call <a href="#grants-validategrant">§ 8.4.4 Validate Grant</a> with inputs: <code>GRANT</code>. <em class="rfc2119">MUST</em> return a status code of 400 if
validation fails.</p>
    <li data-md>
     <p>Add or Update <code>GRANT</code> resource in the <code>REGISTRY</code> container, conforming to
the assigned <a href="interop.tree#AccessGrantTree">interopt:AccessGrantTree</a>.</p>
    <li data-md>
     <p>Link <code>GRANT</code> to the <code>REGISTRY</code> via <code>ACCESS hasRegistration</code> if
    it has not already been added</p>
    <li data-md>
     <p>Call <a href="#grants-applyperms">§ 8.4.9 Apply Permissions</a> with inputs: <code>GRANT</code></p>
    <li data-md>
     <p>TODO - CALL TO PROVIDE ACCESS RECEIPT GOES HERE</p>
    <li data-md>
     <p>Return <code>GRANT</code></p>
   </ol>
   <p class="issue" id="issue-4a203aca"><a class="self-link" href="#issue-4a203aca"></a> Need to properly factor in multi-pod scenarios. Must identify the
proper access registry to store things in based on the data registration, which
means pods will also need to be registered.</p>
   <h4 class="heading settled" data-level="8.4.6" id="grants-recordinvitation"><span class="secno">8.4.6. </span><span class="content">Record Invitation</span><a class="self-link" href="#grants-recordinvitation"></a></h4>
   <p>This operation stores a new or updated <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③①">Access Invitation</a> in
an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②④">Access Grant Registry</a>.</p>
   <h5 class="heading settled" data-level="8.4.6.1" id="recordinvitation-inputs"><span class="secno">8.4.6.1. </span><span class="content">Inputs</span><a class="self-link" href="#recordinvitation-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>INVITATION</code> be an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③②">Access Invitation</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②⑤">Access Grant Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.6.2" id="recordinvitation-outputs"><span class="secno">8.4.6.2. </span><span class="content">Outputs</span><a class="self-link" href="#recordinvitation-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③③">Access Invitation</a> stored in <code>REGISTRY</code></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.6.3" id="recordinvitation-details"><span class="secno">8.4.6.3. </span><span class="content">Operation Details</span><a class="self-link" href="#recordinvitation-details"></a></h5>
   <ol>
    <li data-md>
     <p>Call <a href="#grants-validategrant">§ 8.4.4 Validate Grant</a> with inputs: <code>INVITATION</code>. <em class="rfc2119">MUST</em> return a status code of 400 if
validation fails.</p>
    <li data-md>
     <p>Add or Update <code>INVITATION</code> resource in the <code>REGISTRY</code> container, conforming to
the assigned <a href="interop.tree#AccessInvitationTree">interopt:AccessInvitationTree</a></p>
    <li data-md>
     <p>Link <code>INVITATION</code> to the <code>REGISTRY</code> via <code>ACCESS hasRegistration</code> if
    it has not already been added</p>
    <li data-md>
     <p>TODO - CALL TO DELIVER INVITATION VIA CHANNEL GOES HERE</p>
    <li data-md>
     <p>Return <code>INVITATION</code></p>
   </ol>
   <h4 class="heading settled" data-level="8.4.7" id="grants-deliverinvitation"><span class="secno">8.4.7. </span><span class="content">Deliver Invitation</span><a class="self-link" href="#grants-deliverinvitation"></a></h4>
   <p class="issue" id="issue-2800f864"><a class="self-link" href="#issue-2800f864"></a> Write standard operation for invitation delivery</p>
   <h4 class="heading settled" data-level="8.4.8" id="grants-validateinvitation"><span class="secno">8.4.8. </span><span class="content">Validate Invitation</span><a class="self-link" href="#grants-validateinvitation"></a></h4>
   <p class="issue" id="issue-00444ef2"><a class="self-link" href="#issue-00444ef2"></a> Write standard operation for validating an invitation</p>
   <h4 class="heading settled" data-level="8.4.9" id="grants-applyperms"><span class="secno">8.4.9. </span><span class="content">Apply Permissions</span><a class="self-link" href="#grants-applyperms"></a></h4>
   <h5 class="heading settled" data-level="8.4.9.1" id="applyperms-inputs"><span class="secno">8.4.9.1. </span><span class="content">Inputs</span><a class="self-link" href="#applyperms-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④⑤">Access Grant</a> linked to any new or updated <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②④">Compiled Access Groups</a> and <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①⑧">Data Grants</a> for a given <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject⑥">Authorization Subject</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.9.2" id="applyperms-outputs"><span class="secno">8.4.9.2. </span><span class="content">Outputs</span><a class="self-link" href="#applyperms-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④⑥">Access Grant</a> that has had the relevant permissions applied.</p>
   </ul>
   <h5 class="heading settled" data-level="8.4.9.3" id="applyperms-details"><span class="secno">8.4.9.3. </span><span class="content">Operation Details</span><a class="self-link" href="#applyperms-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>DGRANTS</code> be the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant①⑨">Data Grants</a> linked to <code>GRANT</code> via <code>GRANT hasDataGrant</code></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②⓪">Data Grant</a> <code>DGRANT</code> in <code>GRANTS</code></p>
     <ol>
      <li data-md>
       <p>Let the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑤⑨">Data Registration</a> linked via <code>DGRANT hasRegistration</code> be <code>DREG</code></p>
      <li data-md>
       <p>If <code>DGRANT scopeOfDataGrant</code> includes <code>interop:NoAccess</code></p>
       <ol>
        <li data-md>
         <p>Ignore any other scopes linked via <code>DGRANT scopeOfDataGrant</code></p>
        <li data-md>
         <p>Let <code>ACL</code> be the <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource②">ACL Resource</a> directly associated with <code>DREG</code></p>
        <li data-md>
         <p>Let <code>STATEMENTS</code> be any <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement">Authorization Statements</a> in <code>ACL</code> directly
associated with <code>GRANT accessGrantSubject</code>.</p>
        <li data-md>
         <p>For each <code>STATEMENT</code> in <code>STATEMENTS</code></p>
         <ol>
          <li data-md>
           <p>Remove <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject⑦">Authorization Subject</a> from <code>STATEMENT</code></p>
          <li data-md>
           <p>Remove <code>STATEMENT</code> if there are no remaining <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject⑧">Authorization Subjects</a></p>
         </ol>
       </ol>
      <li data-md>
       <p>If <code>DGRANT scopeOfDataGrant</code> includes <code>interop:AllInstances</code></p>
       <ol>
        <li data-md>
         <p>Error if <code>interop:AllInstances</code> is not the only scope associated via <code>DGRANT scopeOfDataGrant</code></p>
        <li data-md>
         <p>Let <code>ACL</code> be the <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource③">ACL Resource</a> directly associated with <code>DREG</code></p>
        <li data-md>
         <p>Let <code>STATEMENTS</code> be any <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement①">Authorization Statements</a> in <code>ACL</code> directly
associated with <code>GRANT accessGrantSubject</code>.</p>
        <li data-md>
         <p>For each <code>STATEMENT</code> in <code>STATEMENTS</code></p>
         <ol>
          <li data-md>
           <p>Remove <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject⑨">Authorization Subject</a> from <code>STATEMENT</code></p>
          <li data-md>
           <p>Remove <code>STATEMENT</code> from <code>ACL</code> if there are no
remaining <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①⓪">Authorization Subjects</a> in <code>STATEMENT</code></p>
         </ol>
        <li data-md>
         <p>Add a new <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement②">Authorization Statement</a> <code>NEWSTATEMENT</code> to <code>ACL</code></p>
         <ol>
          <li data-md>
           <p>Set <code>NEWSTATEMENT</code> <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①①">Authorization Subject</a> to <code>GRANT accessGrantSubject</code>.</p>
          <li data-md>
           <p>Set the <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode⑤">access modes</a> for <code>NEWSTATEMENT</code> to
the <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode⑥">access modes</a> linked via <code>DGRANT accessMode</code> such that all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④②">Registered Data Instances</a> in <code>REG</code> inherit
those <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode⑦">access modes</a></p>
         </ol>
       </ol>
      <li data-md>
       <p>If <code>DGRANT scopeOfDataGrant</code> includes ONLY <code>interop:InheritInstances</code></p>
       <ol>
        <li data-md>
         <p>Let <code>IDGRANT</code> be the inherited <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②①">Data Grant</a></p>
        <li data-md>
         <p>Error if <code>DGRANT inheritsFrom</code> is missing</p>
        <li data-md>
         <p>Error if <code>IDGRANT interop:RegisteredShapeTree</code> does not have a reference
to <code>DGRANT interop:registeredShapeTree</code> via <code>st:references</code></p>
        <li data-md>
         <p>Let <code>ACL</code> be the <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource④">ACL Resource</a> directly associated with <code>DREG</code></p>
        <li data-md>
         <p>Let <code>STATEMENTS</code> be any <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement③">Authorization Statements</a> in <code>ACL</code> directly
associated with <code>GRANT accessGrantSubject</code>.</p>
        <li data-md>
         <p>For each <code>STATEMENT</code> in <code>STATEMENTS</code></p>
         <ol>
          <li data-md>
           <p>Remove <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①②">Authorization Subject</a> from <code>STATEMENT</code></p>
          <li data-md>
           <p>Remove <code>STATEMENT</code> from <code>ACL</code> if there are no
remaining <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①③">Authorization Subjects</a> in <code>STATEMENT</code></p>
         </ol>
        <li data-md>
         <p>Add a new <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement④">Authorization Statement</a> <code>NEWSTATEMENT</code> to <code>ACL</code></p>
         <ol>
          <li data-md>
           <p>Set <code>NEWSTATEMENT</code> <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①④">Authorization Subject</a> to <code>GRANT accessGrantSubject</code>.</p>
          <li data-md>
           <p>Set the <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode⑧">access modes</a> for <code>NEWSTATEMENT</code> to
the <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode⑨">access modes</a> linked via <code>DGRANT accessMode</code> such that all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④③">Registered Data Instances</a> in <code>REG</code> inherit
those <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode①⓪">access modes</a>, with the following condition:</p>
           <ol>
            <li data-md>
             <p>Access will only be granted to <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④④">Registered Data Instances</a> when a link exists between <code>IDGRANT interop:registeredShapeTree</code> and <code>DGRANT interop:registeredShapeTree</code>.</p>
            <li data-md>
             <p>The predicate of the link must be the same as the
property detailed in <code>st:traverseViaShapePath</code>, in the <code>st:references</code> from <code>IDGRANT interop:registeredShapeTree</code></p>
           </ol>
         </ol>
       </ol>
      <li data-md>
       <p>If <code>DGRANT scopeOfDataGrant</code> includes <code>interop:InheritInstances</code> AND <code>interop:SelectedInstances</code></p>
       <ol>
        <li data-md>
         <p>Error if any other scopes are associated via <code>DGRANT scopeOfDataGrant</code></p>
        <li data-md>
         <p>Error if <code>DGRANT inheritsFrom</code> is missing</p>
        <li data-md>
         <p>Error if <code>IDGRANT interop:RegisteredShapeTree</code> does not have a reference
to <code>DGRANT interop:registeredShapeTree</code> via <code>st:references</code></p>
        <li data-md>
         <p>Use instructions for <code>interop:SelectInstances</code></p>
       </ol>
      <li data-md>
       <p>If <code>DGRANT scopeOfDataGrant</code> includes <code>interop:SelectedInstances</code></p>
       <ol>
        <li data-md>
         <p>Let <code>INSTANCES</code> be the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④⑤">Registered Data Instances</a> linked via <code>DGRANT interop:hasRegisteredDataInstance</code></p>
        <li data-md>
         <p>Error if there are no <code>INSTANCES</code></p>
        <li data-md>
         <p>For each <code>INSTANCE</code> in <code>INSTANCES</code></p>
        <li data-md>
         <p>Error if <code>INSTANCE</code> is missing</p>
        <li data-md>
         <p>Let <code>ACL</code> be the <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource⑤">ACL Resource</a> directly associated with <code>INSTANCE</code></p>
        <li data-md>
         <p>Let <code>STATEMENTS</code> be any <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement⑤">Authorization Statements</a> in <code>ACL</code> directly
  associated with <code>GRANT accessGrantSubject</code></p>
        <li data-md>
         <p>For each <code>STATEMENT</code> in <code>STATEMENTS</code></p>
         <ol>
          <li data-md>
           <p>Remove <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①⑤">Authorization Subject</a> from <code>STATEMENT</code></p>
          <li data-md>
           <p>Remove <code>STATEMENT</code> from <code>ACL</code> if there are no
  remaining <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①⑥">Authorization Subjects</a> in <code>STATEMENT</code></p>
         </ol>
        <li data-md>
         <p>Add a new <a data-link-type="dfn" href="#authorization-statement" id="ref-for-authorization-statement⑥">Authorization Statement</a> <code>NEWSTATEMENT</code> to <code>ACL</code></p>
         <ol>
          <li data-md>
           <p>Set <code>NEWSTATEMENT</code> <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①⑦">Authorization Subject</a> to <code>GRANT accessGrantSubject</code>.</p>
          <li data-md>
           <p>Set the <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode①①">access modes</a> for <code>NEWSTATEMENT</code> to
  the <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode①②">access modes</a> linked via <code>DGRANT accessMode</code></p>
          <li data-md>
           <p>If <code>INSTANCE</code> is a container, ensure all <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#violation-resource" id="ref-for-violation-resource">resources</a> in the
  container are set to inherit those <a data-link-type="dfn" href="#access-mode" id="ref-for-access-mode①③">access modes</a></p>
         </ol>
       </ol>
     </ol>
   </ol>
   <p class="issue" id="issue-e3aa414f"><a class="self-link" href="#issue-e3aa414f"></a> Deal with cases when the data registration doesn’t exist yet</p>
   <p class="issue" id="issue-307c0631"><a class="self-link" href="#issue-307c0631"></a> Append mode for AllInstances needs to be specially handled, and may
require an additional attribute specified in the requested <a data-link-type="dfn" href="#access-need" id="ref-for-access-need③⑥">Access Needs</a></p>
   <h4 class="heading settled" data-level="8.4.10" id="grants-present"><span class="secno">8.4.10. </span><span class="content">Present Grant</span><a class="self-link" href="#grants-present"></a></h4>
   <p>This operation is non-normative, and meant to instruct
a developer in how to load and initialize an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④⑦">Access Grant</a> or <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③④">Access Invitation</a>, present it to an <a data-link-type="dfn" href="#agent" id="ref-for-agent①③④">Agent</a>, invoke the appropriate
operations to manipulate <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②②">Data Grants</a> in accordance with the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③⑤">Agent’s</a> decisions, and then record and act upon those decisions.</p>
   <h5 class="heading settled" data-level="8.4.10.1" id="present-inputs"><span class="secno">8.4.10.1. </span><span class="content">Inputs</span><a class="self-link" href="#present-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>SUBJECT</code> be an <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject⑥">Access Grant Subject</a></p>
    <li data-md>
     <p>Let <code>TARGET</code> be the <code>interop:channelTarget</code> of an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⑤">Access Invitation</a></p>
    <li data-md>
     <p>Let <code>ICHANNELS</code> be a set of <a data-link-type="dfn" href="#access-invitation-channel" id="ref-for-access-invitation-channel①②">Access Invitation Channels</a> for a new <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⑥">Access Invitation</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②⑥">Access Grant Registry</a></p>
    <li data-md>
     <p>Let <code>GROUPS</code> be an optional set of <a data-link-type="dfn" href="#access-need-group" id="ref-for-access-need-group⑤①">Access Need Groups</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③⑥">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="8.4.10.2" id="present-details"><span class="secno">8.4.10.2. </span><span class="content">Operation Details</span><a class="self-link" href="#present-details"></a></h5>
   <ol>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return a status code of 400 if both <code>SUBJECT</code> and <code>TARGET</code> are provided</p>
    <li data-md>
     <p>If <code>SUBJECT</code> is provided</p>
     <ol>
      <li data-md>
       <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④⑧">Access Grant</a> returned by <a href="#grants-loadgrant">§ 8.4.2 Load Grant</a> with
inputs: <code>SUBJECT</code>, <code>REGISTRY</code></p>
       <ol>
        <li data-md>
         <p>If <code>GRANT</code> is missing, let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant④⑨">Access Grant</a> returned
by <a href="#grants-initializegrant">§ 8.4.1 Initialize Grant</a> with inputs: <code>SUBJECT</code>, <code>REGISTRY</code>, <code>GROUPS</code>, <code>LANG</code>.</p>
       </ol>
      <li data-md>
       <p>Present the <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject⑦">Access Grant Subject</a></p>
     </ol>
    <li data-md>
     <p>If <code>TARGET</code> is provided</p>
     <ol>
      <li data-md>
       <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⑦">Access Invitation</a> returned by <a href="#grants-loadinvitation">§ 8.4.3 Load Invitation</a> with inputs: <code>TARGET</code>, <code>REGISTRY</code></p>
       <ol>
        <li data-md>
         <p>If <code>GRANT</code> is missing, let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⑧">Access Invitation</a> returned by <a href="#grants-initializegrant">§ 8.4.1 Initialize Grant</a> with inputs: <code>ICHANNELS</code>, <code>REGISTRY</code>, <code>GROUPS</code>, <code>LANG</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>If available, present the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③⑦">Agent</a> who granted access via <code>registeredBy</code></p>
    <li data-md>
     <p>If available, present the <a data-link-type="dfn" href="#application" id="ref-for-application⑨⑥">Application</a> used by the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③⑧">Agent</a> to grant
access via <code>registeredWith</code></p>
    <li data-md>
     <p>If available, present the timestamp of creation via <code>registeredAt</code>,
and update via <code>updatedAt</code></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②⑤">Compiled Access Group</a> <code>CAGROUP</code> linked via <code>GRANT hasCompiledAccessGroup</code></p>
     <ol>
      <li data-md>
       <p>Let <code>GDEC</code> be the <a data-link-type="dfn" href="#access-need-group-decorator" id="ref-for-access-need-group-decorator⑧">Access Need Group Decorator</a> linked via <code>CAGROUP hasAccessNeedGroupDecorator</code></p>
      <li data-md>
       <p>Present the group name via <code>GDEC skos:prefLabel</code></p>
      <li data-md>
       <p>Present the group description via <code>GDEC skos:definition</code></p>
      <li data-md>
       <p>Identify the <a data-link-type="dfn" href="#agent" id="ref-for-agent①③⑨">Agent</a> that will be granted access via <code>authenticatesAs</code>. <code>interop:Pilot</code> indicates a piloted application.</p>
      <li data-md>
       <p>If <code>CAGROUP accessNecessity</code> is <code>AccessOptional</code> and <code>CAGROUP isEnabled</code> is <code>true</code>, allow the group to be disabled by invoking the <a href="#grants-denygroup">§ 8.4.11 Deny Compiled Access Group</a> operation with inputs: <code>GRANT</code>, <code>CAGROUP</code></p>
      <li data-md>
       <p>If <code>CAGROUP accessNecessity</code> is <code>AccessOptional</code> and <code>CAGROUP isEnabled</code> is false, allow the group to be enabled by setting <code>CAGROUP isEnabled</code> to <code>true</code>.</p>
      <li data-md>
       <p>If (<code>CAGROUP accessNecessity</code> is <code>AccessOptional</code> and <code>CAGROUP isEnabled</code>),
or if <code>CAGROUP accessNecessity</code> is <code>AccessRequired</code></p>
       <ol>
        <li data-md>
         <p>For each <a data-link-type="dfn" href="#root-compiled-access" id="ref-for-root-compiled-access⑤">Root Compiled Access</a> <code>ROOT</code> linked via <code>CAGROUP hasCompiledAccess</code></p>
         <ol>
          <li data-md>
           <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤⑤">Compiled Access</a> <code>CACCESS</code> starting with <code>ROOT</code> and traversed via <code>CACCESS skos:narrower</code> or <code>CACCESS referencesCompiledAccess</code>:</p>
           <ol>
            <li data-md>
             <p>Let <code>DATAGRANT</code> be <code>CACCESS hasDataGrant</code></p>
            <li data-md>
             <p>Let <code>NDEC</code> be <code>CACCESS hasAccessNeedDecorator</code></p>
            <li data-md>
             <p>Let <code>STDEC</code> be <code>CACCESS hasShapeTreeDecorator</code></p>
            <li data-md>
             <p>If <code>CACCESS accessNecessity</code> is <code>AccessOptional</code>,
  and <code>DATAGRANT scopeOfDataGrant</code> is <code>interop:NoAccess</code></p>
             <ol>
              <li data-md>
               <p>Allow access selection to be enabled and managed as detailed
  in the remainder of this operation.</p>
             </ol>
            <li data-md>
             <p>Present the name of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④⑧">shape tree</a> via <code>STDEC skos:prefLabel</code></p>
            <li data-md>
             <p>Present the reason access to this data is needed via <code>NDEC skos:prefLabel</code></p>
            <li data-md>
             <p>Present the access modes requested via <code>CACCESS accessMode</code>s</p>
            <li data-md>
             <p>For each <a data-link-type="dfn">Supporting Access Need</a> <code>SUPPORTING</code> linked
  via <code>CACCESS supportedBy</code></p>
             <ol>
              <li data-md>
               <p>Present the name of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree④⑨">shape tree</a> via the
  associated <a data-link-type="dfn">Shape Tree Decorator</a></p>
              <li data-md>
               <p>Present the reason access to this data is needed via the
  associated <a data-link-type="dfn" href="#access-need-decorator" id="ref-for-access-need-decorator⑨">Access Need Decorator</a></p>
              <li data-md>
               <p>Present the access modes requested via <code>SUPPORTING accessMode</code>s</p>
             </ol>
            <li data-md>
             <p>If <code>DATAGRANT scopeOfDataGrant</code> is <code>interop:NoAccess</code></p>
             <ol>
              <li data-md>
               <p>Allow <code>interop:AllInstances</code> to be selected, which invokes
  the <a href="#grants-selectall">§ 8.4.13 Select All Instances for Access</a> operation with inputs: <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code></p>
              <li data-md>
               <p>Allow a subset of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④⑥">Registered Data Instances</a> be selected,
  and let <code>INSTANCES</code> be that subset, invoking
  the <a href="#grants-select">§ 8.4.12 Select Specific Instances for Access</a> operation with inputs: <code>INSTANCES</code>, <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code></p>
             </ol>
            <li data-md>
             <p>If <code>DATAGRANT scopeOfDataGrant</code> is <code>interop:AllInstances</code>, then
  present the user with summary details, and the ability to
  see specific instances.</p>
             <ol>
              <li data-md>
               <p>Let <code>INSTANCES</code> be a selected set of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④⑦">Registered Data Instances</a></p>
              <li data-md>
               <p>If the user chooses to select
  specific instances from this list, invoke the <a href="#grants-select">§ 8.4.12 Select Specific Instances for Access</a> operation with inputs: <code>INSTANCES</code>, <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code>.</p>
             </ol>
            <li data-md>
             <p>If <code>DATAGRANT scopeOfDataGrant</code> is <code>interop:SelectedInstances</code>, then
  present the user with the specific instances they have selected,
  and:</p>
             <ol>
              <li data-md>
               <p>Let <code>INSTANCES</code> be a selected set of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④⑧">Registered Data Instances</a></p>
              <li data-md>
               <p>Allow the selected <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance④⑨">Registered Data Instances</a> to be
  adjusted, and invoke the <a href="#grants-select">§ 8.4.12 Select Specific Instances for Access</a> operation with
  inputs: <code>INSTANCES</code>, <code>DATAGRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code>.</p>
              <li data-md>
               <p>Allow all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤⓪">Registered Data Instances</a> to be selected,
  invoking the <a href="#grants-selectall">§ 8.4.13 Select All Instances for Access</a> operation with inputs: <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code>.</p>
             </ol>
            <li data-md>
             <p>If <code>DATAGRANT scopeOfDataGrant</code> is <code>interop:InheritInstances</code>, present
  the inherited <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤①">Registered Data Instances</a> and:</p>
             <ol>
              <li data-md>
               <p>Let <code>INSTANCES</code> be a selected set of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤②">Registered Data Instances</a></p>
              <li data-md>
               <p>Allow a subset to be selected, invoking
  the <a href="#grants-select">§ 8.4.12 Select Specific Instances for Access</a> operation with inputs: <code>INSTANCES</code>, <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code></p>
              <li data-md>
               <p>Identify the <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤⑥">Compiled Access</a> / <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②③">Data Grant</a> and selected <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤③">Registered Data Instances</a> that were inherited
  from.</p>
             </ol>
            <li data-md>
             <p>If <code>DATAGRANT scopeOfDataGrant</code> includes <code>interop:SelectedInstances</code> and <code>interop:InheritInstances</code></p>
             <ol>
              <li data-md>
               <p>Let <code>INSTANCES</code> be a selected set of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤④">Registered Data Instances</a></p>
              <li data-md>
               <p>Give the ability to adjust the selected instances, invoking
  the <a href="#grants-select">§ 8.4.12 Select Specific Instances for Access</a> operation with inputs: <code>INSTANCES</code>, <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code>.</p>
              <li data-md>
               <p>Give the ability to revert to all inherited instances,
  invoking the <a href="#grants-selectall">§ 8.4.13 Select All Instances for Access</a> operation with inputs: <code>GRANT</code>, <code>CAGROUP</code>, <code>CACCESS</code></p>
             </ol>
           </ol>
         </ol>
       </ol>
      <li data-md>
       <p>Call <a href="#grants-recordgrant">§ 8.4.5 Record Grant</a> if <code>GRANT</code> is an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑤⓪">Access Grant</a> to save.</p>
      <li data-md>
       <p>Call <a href="#grants-recordinvitation">§ 8.4.6 Record Invitation</a> if <code>GRANT</code> is an <a data-link-type="dfn" href="#access-invitation" id="ref-for-access-invitation③⑨">Access Invitation</a> to
save.</p>
     </ol>
   </ol>
   <p class="issue" id="issue-9e6a825b"><a class="self-link" href="#issue-9e6a825b"></a> Consider when an existing Access Need Group is expanded or contracted</p>
   <p class="issue" id="issue-996107f3"><a class="self-link" href="#issue-996107f3"></a> Consider when there are new Groups being requested from a given Agent</p>
   <h4 class="heading settled" data-level="8.4.11" id="grants-denygroup"><span class="secno">8.4.11. </span><span class="content">Deny Compiled Access Group</span><a class="self-link" href="#grants-denygroup"></a></h4>
   <p>This operation is used when a given <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②⑥">Compiled Access Group</a> with optional
necessity has been denied.</p>
   <h5 class="heading settled" data-level="8.4.11.1" id="denygroup-inputs"><span class="secno">8.4.11.1. </span><span class="content">Inputs</span><a class="self-link" href="#denygroup-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑤①">Access Grant</a></p>
    <li data-md>
     <p>Let <code>CAGROUP</code> be a <a data-link-type="dfn" href="#compiled-access-group" id="ref-for-compiled-access-group②⑦">Compiled Access Group</a></p>
   </ul>
   <h5 class="heading settled" data-level="8.4.11.2" id="denygroup-details"><span class="secno">8.4.11.2. </span><span class="content">Operation Details</span><a class="self-link" href="#denygroup-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>CAGROUP isEnabled</code> be <code>false</code> if <code>CAGROUP accessNecessity</code> is <code>interop:AccessOptional</code></p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#compiled-access" id="ref-for-compiled-access⑤⑦">Compiled Access</a> <code>CACCESS</code> in <code>CAGROUP</code></p>
     <ol>
      <li data-md>
       <p>Let <code>DATAGRANT</code> be <code>CACCESS hasDataGrant</code></p>
      <li data-md>
       <p>Let <code>DATAGRANT scopeOfDataGrant</code> be <code>interop:NoAccess</code></p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="8.4.12" id="grants-select"><span class="secno">8.4.12. </span><span class="content">Select Specific Instances for Access</span><a class="self-link" href="#grants-select"></a></h4>
   <p>Used to select specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤⑤">Registered Data Instances</a> for a given <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②④">Data Grant</a>, which has a recursive application down the hierachy,
with subordinate <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②⑤">Data Grants</a> reducing their associated scope of <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤⑥">Registered Data Instances</a> to only those related to the instances above them.</p>
   <p class="issue" id="issue-e2737901"><a class="self-link" href="#issue-e2737901"></a> Write operation for selecting specific registered data instances
for a given Data Registration within an Access Grant</p>
   <h4 class="heading settled" data-level="8.4.13" id="grants-selectall"><span class="secno">8.4.13. </span><span class="content">Select All Instances for Access</span><a class="self-link" href="#grants-selectall"></a></h4>
   <p>Used to select all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤⑦">Registered Data Instances</a> for a given <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②⑥">Data Grant</a>.
In the event where this is moving from a subset of inherited instances,
this will expand to only include all inherited instances.</p>
   <p class="issue" id="issue-9ab190ed"><a class="self-link" href="#issue-9ab190ed"></a> Write operation for selecting all registered data instances
for a given Data Registration within an Access Grant</p>
   <h2 class="heading settled" data-level="9" id="receipts"><span class="secno">9. </span><span class="content">Access Receipts</span><a class="self-link" href="#receipts"></a></h2>
   <h3 class="heading settled" data-level="9.1" id="receipts-overview"><span class="secno">9.1. </span><span class="content">Overview</span><a class="self-link" href="#receipts-overview"></a></h3>
   <p class="issue" id="issue-bc8f1079"><a class="self-link" href="#issue-bc8f1079"></a> Write overview for Access Receipts</p>
   <h3 class="heading settled" data-level="9.2" id="receipts-datamodel"><span class="secno">9.2. </span><span class="content">Data Model</span><a class="self-link" href="#receipts-datamodel"></a></h3>
   <h4 class="heading settled" data-level="9.2.1" id="receipts-datamodel-summary"><span class="secno">9.2.1. </span><span class="content">Summary</span><a class="self-link" href="#receipts-datamodel-summary"></a></h4>
   <figure id="fig-receipt-model">
     <img src="diagrams/receipts-model.svg" width="100%/"> 
    <figcaption>Data model for the <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry②">Access Receipt Registry</a></figcaption>
   </figure>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①④⓪">Agent</a> links to <a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set①">Access Receipt Registry Sets</a> via the <a href="interop.ttl#hasAccessReceiptRegistrySet">interop:hasAccessReceiptRegistrySet</a> property.</p>
   <p>An <a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set②">Access Receipt Registry Set</a> links to any number of <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry③">Access Receipt Registries</a> via
the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property.</p>
   <p>An <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry④">Access Receipt Registry</a> links to any number of registered <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt①⑨">Access Receipts</a> via the <a href="interop.ttl#hasRegistration">interop:hasRegistration</a> property.</p>
   <figure id="fig-receipts-agent">
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent①④①">Agent</a> at https://alice.pod.example/profile/id#me
  linking to an <a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set③">Access Receipt Registry Set</a></figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasAccessReceiptRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/receipt#set></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-receipt-registry-set">
    <figcaption>An <a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set④">Access Receipt Registry Set</a> at
   https://bob.pod.example/profile/receipt#set linking to two different <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry⑤">Access Receipt Registries</a></figcaption>
<pre class="highlight"><c- g>&lt;#set></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessReceiptRegistrySet</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> <c- g>&lt;https://bob.pod.example/receipts/#registry></c-> <c- p>,</c->
                  <c- g>&lt;https://bob.otherpod.example/receipts/#registry></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-receipt-registry">
    <figcaption>An <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry⑥">Access Receipt Registry</a> at
  https://bob.pod.example/receipts/#registry
  linking to several registered <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②⓪">Access Receipts</a> </figcaption>
<pre class="highlight"><c- g>&lt;#registry></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessReceiptRegistry</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- g>&lt;fa6d6553-0308-4abd-bce6-888df653695a#receipt></c-> <c- p>,</c->
                      <c- g>&lt;d49eae8c-e138-4153-86ed-63832deadc6b#receipt></c-> <c- p>,</c->
                      <c- g>&lt;506a0cee-1dc9-4720-a768-294aa0284502#receipt></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-access-receipt">
    <figcaption>An <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②①">Access Receipt</a> at
  https://bob.pod.example/receipts/fa6d6553-0308-4abd-bce6-888df653695a#receipt </figcaption>
<pre class="highlight"><c- g>&lt;#receipt></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>AccessReceipt</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> https<c- p>:</c->//bob<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> https<c- p>:</c->//trusted<c- p>.</c->example/id<c- c>#agent ;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>providedAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAgent</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>toAgent</c-> https<c- p>:</c->//bob<c- p>.</c->pod<c- p>.</c->example/profile/id<c- c>#me ;</c->
  <c- nn>interop:</c-><c- f>hasDataReceipt</c-> <c- g>&lt;#notebook-receipt></c-><c- p>,</c-> <c- g>&lt;#note-receipt></c-> <c- p>.</c->

<c- g>&lt;#notebook-receipt></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataReceipt</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/notebook/<c- c>#registration ;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>SelectedInstances</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/notebook/notebook<c- mi>-1</c->/<c- c>#notebook ,</c->
                                https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/notebook/notebook<c- mi>-2</c->/<c- c>#notebook .</c->

<c- g>&lt;#note-receipt></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>DataReceipt</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/note/<c- c>#registration ;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>note-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>inheritInstances</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>inheritsFrom</c-> <c- g>&lt;#notebook-receipt></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/note/not<c- mf>e-1</c->/<c- c>#note ,</c->
                                https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/note/not<c- mf>e-2</c->/<c- c>#note ,</c->
                                https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/note/not<c- mf>e-3</c->/<c- c>#note ,</c->
                                https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/note/not<c- mf>e-4</c->/<c- c>#note ,</c->
                                https<c- p>:</c->//alice<c- p>.</c->pod<c- p>.</c->example/data/note/not<c- mf>e-5</c->/<c- c>#note .</c->
</pre>
   </figure>
   <h4 class="heading settled" data-level="9.2.2" id="datamodel-receipt-registry-set"><span class="secno">9.2.2. </span><span class="content">Access Receipt Registry Set</span><a class="self-link" href="#datamodel-receipt-registry-set"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-receipt-registry-set">Access Receipt Registry Set</dfn> is a <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set⑤">Registry Set</a> specifically
made up of <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry⑦">Access Receipt Registries</a>.</p>
   <table align="left" class="classinfo data" id="classAccessReceiptRegistrySet">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3" text-align="left"> <a href="interop.ttl#AccessReceiptRegistrySet">AccessReceiptRegistrySet</a> a rdfs:subClassOf <a href="#datamodel-agent">RegistrySet</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistry
      <td>Registry
      <td>Link to associated <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry⑧">Access Receipt Registries</a>
   </table>
   <p>The <a href="#shexAccessReceiptRegistrySet">AccessReceiptRegistrySetShape</a> is used to
validate an instance of the <a href="#classAccessReceiptRegistrySet">AccessReceiptRegistrySet</a> class.</p>
<pre class="highlight" id="shexAccessReceiptRegistrySet"><c- g>&lt;#AccessReceiptRegistrySetShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessReceiptRegistrySet</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> IRI+
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessReceiptRegistrySetTree">AccessReceiptRegistrySetTree</a> is assigned to a resource to ensure it will validate against the <a href="#shexAccessReceiptRegistrySet">AccessReceiptRegistrySetShape</a>.</p>
<pre class="highlight" id="treeAccessReceiptRegistrySet"><c- g>&lt;#AccessReceiptRegistrySetTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessReceiptRegistrySetShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"receipt"</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="9.2.3" id="datamodel-access-receipt-registry"><span class="secno">9.2.3. </span><span class="content">Access Receipt Registry</span><a class="self-link" href="#datamodel-access-receipt-registry"></a></h4>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-receipt-registry">Access Receipt Registry</dfn> is a collection of <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②②">Access Receipts</a> stored in a specific location in a <a data-link-type="dfn" href="#pod" id="ref-for-pod⑤">pod</a>.</p>
   <table align="left" class="classinfo data" id="classAccessReceiptRegistry">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessReceiptRegistry">AccessReceiptRegistry</a> a rdfs:subClassOf <a href="#datamodel-agent">Registry</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistration
      <td>Registration
      <td>Link to associated <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②③">Access Receipts</a>
   </table>
   <p>The <a href="#shexAccessReceiptRegistry">AccessReceiptRegistryShape</a> is used to
validate an instance of the <a href="#classAccessReceiptRegistry">AccessReceiptRegistry</a> class.</p>
<pre class="highlight" id="shexAccessReceiptRegistry"><c- g>&lt;#AccessReceiptRegistryShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>AccessReceiptRegistry</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> IRI*
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessReceiptRegistryTree">AccessReceiptRegistryTree</a> is assigned to a container resource to ensure that it will validate against the <a href="#shexAccessReceiptRegistry">AccessReceiptRegistryShape</a>, and contain only
conformant instances of the <a href="#treeAccessReceipt">AccessReceiptTree</a>.</p>
<pre class="highlight" id="treeAccessReceiptRegistry"><c- g>&lt;#AccessReceiptRegistryTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessReceiptRegistryShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>contains</c-> <c- g>&lt;#AccessReceiptTree></c-> <c- p>,</c->
              <c- nn>st:</c-><c- f>AllowNone</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="9.2.4" id="datamodel-access-receipt"><span class="secno">9.2.4. </span><span class="content">Access Receipt</span><a class="self-link" href="#datamodel-access-receipt"></a></h4>
   <p>Each <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-receipt">Access Receipt</dfn> ...</p>
   <p class="issue" id="issue-b8eb1e10"><a class="self-link" href="#issue-b8eb1e10"></a> Write definition for Access Receipt class</p>
   <table align="left" class="classinfo data" id="classAccessReceipt">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#AccessReceipt">AccessReceipt</a> a rdfs:subClassOf <a href="#datamodel-agent">Registration</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>registeredBy
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①④②">Agent</a> that registered the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②④">Access Receipt</a>
     <tr>
      <td>registeredWith
      <td>Application
      <td><a data-link-type="dfn" href="#application" id="ref-for-application⑨⑦">Application</a> used to create the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②⑤">Access Receipt</a>
     <tr>
      <td>registeredAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②⑥">Access Receipt</a> was created
     <tr>
      <td>updatedAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②⑦">Access Receipt</a> was updated
     <tr>
      <td>providedAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②⑧">Access Receipt</a> was shared
     <tr>
      <td>fromAgent
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①④③">Agent</a> that granted access and sent the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt②⑨">Access Receipt</a>
     <tr>
      <td>toAgent
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①④④">Agent</a> who was granted access and received the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③⓪">Access Receipt</a>
     <tr>
      <td>hasDataReceipt
      <td><a href="#classDataReceipt">DataReceipt</a>
      <td><a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt">Data Receipt</a> for a shared <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥⓪">Data Registration</a> and any shared <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤⑧">Registered Data Instances</a>
   </table>
   <p>The <a href="#shexAccessReceipt">AccessReceiptShape</a> is used to validate an instance
of the <a href="#classAccessReceipt">AccessReceipt</a> class.</p>
<pre class="highlight" id="shexAccessReceipt"><c- g>&lt;#AccessReceiptShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-><c- nn>interop:</c-><c- f>AccessReceipt</c-><c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>fromAgent</c-> IRI <c- p>;</c->             <c- c># Agent who sent the receipt</c->
  <c- nn>interop:</c-><c- f>toAgent</c-> IRI <c- p>;</c->               <c- c># Recipient of the receipt</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> IRI? <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>providedAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataReceipt</c-> @<c- g>&lt;#:DataReceiptShape></c-> <c- p>;</c->
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#AccessReceiptTree">AccessReceiptTree</a> is assigned to a
resource via the <a href="#treeAccessGrantRegistry">AccessGrantRegistryTree</a>, and ensures
that the assigned resource will validate against the <a href="#shexAccessReceipt">AccessReceiptShape</a>.</p>
<pre class="highlight" id="treeAccessReceipt"><c- g>&lt;#AccessReceiptTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#AccessReceiptShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="9.2.5" id="datamodel-data-receipt"><span class="secno">9.2.5. </span><span class="content">Data Receipt</span><a class="self-link" href="#datamodel-data-receipt"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="data-receipt">Data Receipt</dfn> ...</p>
   <p class="issue" id="issue-e441a39e"><a class="self-link" href="#issue-e441a39e"></a> Write definition for Data Receipt class</p>
   <table align="left" class="classinfo data" id="classDataReceipt">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#DataReceipt">DataReceipt</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistration
      <td>DataRegistration
      <td>Remote <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥①">Data Registration</a> the <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①">Data Receipt</a> applies to
     <tr>
      <td>registeredShapeTree
      <td>st:ShapeTree
      <td>The <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑤⓪">shape tree</a> registered at the target <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥②">Data Registration</a>
     <tr>
      <td>accessMode
      <td>acl:Read, acl:Write, acl:Control, acl:Append
      <td>Access modes granted
     <tr>
      <td>scopeOfDataGrant
      <td> interop:AllInstances, interop:InheritInstances,
      interop:SelectedInstances, interop:NoAccess
      <td>
       Identifies the access scope of the <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②⑦">Data Grant</a> 
       <ul>
        <li>interop:AllInstances - Scope includes
              access to all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑤⑨">Registered Data Instances</a> of the associated <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥③">Data Registration</a>
        <li>interop:InheritInstances - Scope includes
              access to <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥⓪">Registered Data Instances</a> inherited by
              instances selected in the <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt②">Data Receipt</a> linked via
              interop:inheritsFrom
        <li>interop:SelectedInstances - Scope includes
              access only to those <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥①">Registered Data Instances</a> specifically
              selected by the <a data-link-type="dfn" href="#agent" id="ref-for-agent①④⑤">Agent</a>
        <li>interop:NoAccess
         - No access is granted 
       </ul>
     <tr>
      <td>inheritsFrom
      <td><a href="#classDataReceipt">DataReceipt</a>
      <td>Identifies a <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt③">Data Receipt</a> whose selected <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥②">Registered Data Instances</a> narrow the scope of instances to be
      presented by this receipt.
     <tr>
      <td>hasRegisteredDataInstance
      <td>Instance of registeredShapeTree
      <td>Links to a <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥③">Registered Data Instance</a> of registeredShapeTree.
     <tr>
      <td>replacedBy
      <td><a href="#classDataReceipt">DataReceipt</a>
      <td>Another <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt④">Data Receipt</a> that replaces this one
   </table>
   <p>The <a href="#shexDataReceipt">DataReceiptShape</a> is used to
validate an instance of the <a href="#classDataReceipt">DataReceipt</a> class.</p>
<pre class="highlight" id="shexDataReceipt"><c- g>&lt;#DataReceiptShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-><c- nn>interop:</c-><c- f>DataReceipt</c-><c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> IRI <c- p>;</c->       <c- c># Remote data registration</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->   <c- c># Associated shape tree</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- p>[</c-> <c- nn>acl:</c-><c- f>Read</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- nn>acl:</c-><c- f>Append</c-> <c- nn>acl:</c-><c- f>Control</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>SelectedInstances</c-> <c- nn>interop:</c-><c- f>AllInstances</c-> <c- nn>interop:</c-><c- f>InheritInstances</c-> <c- nn>interop:</c-><c- f>NoAccess</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> IRI* <c- p>;</c->     <c- c># if specific instances are selected or inherited</c->
  <c- nn>interop:</c-><c- f>inheritsFrom</c-> @<c- g>&lt;#:DataReceiptShape></c->* <c- p>;</c->
  <c- nn>interop:</c-><c- f>replacedBy</c-> IRI?
<c- p>}</c->
</pre>
   <h3 class="heading settled" data-level="9.3" id="receipts-hierarchy"><span class="secno">9.3. </span><span class="content">Resource Hierarchy</span><a class="self-link" href="#receipts-hierarchy"></a></h3>
   <table align="left" class="data tree">
    <colgroup>
     <col>
     <col>
     <col>
     <col>
    <thead>
     <tr>
      <th>Resource
      <th>Class
      <th>Shape
      <th>Shape Tree
    <tbody>
     <tr>
      <td><code>/profile/</code>
      <td>-
      <td>-
      <td><a href="#treeAgent">ProfileTree</a>
     <tr>
      <td><code>-- receipt#set</code>
      <td><a href="#classAccessReceiptRegistrySet">AccessReceiptRegistrySet</a>
      <td><a href="#shexAccessReceiptRegistrySet">AccessReceiptRegistrySetShape</a>
      <td><a href="#treeAccessReceiptRegistrySet">AccessReceiptRegistrySetTree</a>
     <tr>
      <td><code>/receipts/#registry</code>
      <td><a href="#classAccessReceiptRegistry">AccessReceiptRegistry</a>
      <td><a href="#shexAccessReceiptRegistry">AccessReceiptRegistryShape</a>
      <td><a href="#treeAccessReceiptRegistry">AccessReceiptRegistryTree</a>
     <tr>
      <td><code>-- fa6d6553...5a#receipt</code>
      <td><a href="#classAccessReceipt">AccessReceipt</a>
      <td><a href="#shexAccessReceipt">AccessReceiptShape</a>
      <td><a href="#treeAccessReceipt">AccessReceiptTree</a>
     <tr>
      <td><code>-- d49eae8c...6b#receipt</code>
      <td><a href="#classAccessReceipt">AccessReceipt</a>
      <td><a href="#shexAccessReceipt">AccessReceiptShape</a>
      <td><a href="#treeAccessReceipt">AccessReceiptTree</a>
     <tr>
      <td><code>-- 506a0cee...02#receipt</code>
      <td><a href="#classAccessReceipt">AccessReceipt</a>
      <td><a href="#shexAccessReceipt">AccessReceiptShape</a>
      <td><a href="#treeAccessReceipt">AccessReceiptTree</a>
   </table>
   <p>The <a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set⑤">Access Receipt Registry Set</a> and the <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry⑨">Access Receipt Registry</a> <em class="rfc2119">MAY</em> or <em class="rfc2119">MAY NOT</em> be on the same <a data-link-type="dfn" href="#pod" id="ref-for-pod⑥">pod</a>.</p>
   <p><a data-link-type="dfn" href="#access-receipt-registry-set" id="ref-for-access-receipt-registry-set⑥">Access Receipt Registry Set</a> and <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry①⓪">Access Receipt Registry</a> resources <em class="rfc2119">MAY</em> use any resource or subject names.</p>
   <p><a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③①">Access Receipts</a> <em class="rfc2119">MUST</em> use <a href="https://www.ietf.org/rfc/rfc4122.txt">UUIDs</a> for resource names.</p>
   <h3 class="heading settled" data-level="9.4" id="receipts-operations"><span class="secno">9.4. </span><span class="content">Operations</span><a class="self-link" href="#receipts-operations"></a></h3>
   <h4 class="heading settled" data-level="9.4.1" id="receipts-provide"><span class="secno">9.4.1. </span><span class="content">Provide Access Receipt</span><a class="self-link" href="#receipts-provide"></a></h4>
   <h5 class="heading settled" data-level="9.4.1.1" id="provide-inputs"><span class="secno">9.4.1.1. </span><span class="content">Inputs</span><a class="self-link" href="#provide-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑤②">Access Grant</a></p>
    <li data-md>
     <p>Let <code>CONTROLLER</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①④⑥">Agent</a> granting access</p>
   </ul>
   <h5 class="heading settled" data-level="9.4.1.2" id="provide-outputs"><span class="secno">9.4.1.2. </span><span class="content">Outputs</span><a class="self-link" href="#provide-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A provided <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③②">Access Receipt</a></p>
   </ul>
   <h5 class="heading settled" data-level="9.4.1.3" id="provide-details"><span class="secno">9.4.1.3. </span><span class="content">Operation Details</span><a class="self-link" href="#provide-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>REC-SUBJECT</code> be the <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject⑧">Access Grant Subject</a> linked via <code>GRANT hasAccessGrantSubject</code></p>
    <li data-md>
     <p>Let <code>REC-AGENT</code> be <code>REC-SUBJECT accessByAgent</code></p>
    <li data-md>
     <p>Let <code>REC-APP</code> be <code>REC-SUBJECT accessByApplication</code></p>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an empty <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③③">Access Receipt</a></p>
    <li data-md>
     <p>If <code>REC-APP</code> is not empty</p>
     <ol>
      <li data-md>
       <p>If <code>REC-APP interop:receivesAccessReceipt</code> is <code>ReceiptInRegistration</code></p>
       <ol>
        <li data-md>
         <p>Let <code>RECEIPT</code> be result of <a href="#provide-registration">§ 9.4.1.4 Provide Receipt in Application Registration</a> with
inputs: <code>GRANT</code></p>
       </ol>
      <li data-md>
       <p>If <code>REC-APP interop:receivesAccessReceipt</code> is <code>ReceiptInMessage</code></p>
       <ol>
        <li data-md>
         <p>Let <code>RECEIPT</code> be result of <a href="#provide-message">§ 9.4.1.6 Provide Receipt in Message</a> with
inputs: <code>GRANT</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>If <code>REC-APP</code> is empty and <code>REC-AGENT</code> is not empty</p>
     <ol>
      <li data-md>
       <p>Return error if <code>REC-AGENT interop:receivesAccessReceipt</code> is not <code>ReceiptInMessage</code></p>
      <li data-md>
       <p>Let <code>RECEIPT</code> be result of <a href="#provide-message">§ 9.4.1.6 Provide Receipt in Message</a> with inputs: <code>GRANT</code></p>
     </ol>
    <li data-md>
     <p>Return <code>RECEIPT</code></p>
   </ol>
   <h5 class="heading settled" data-level="9.4.1.4" id="provide-registration"><span class="secno">9.4.1.4. </span><span class="content">Provide Receipt in Application Registration</span><a class="self-link" href="#provide-registration"></a></h5>
   <h6 class="heading settled" data-level="9.4.1.4.1" id="provide-registration-inputs"><span class="secno">9.4.1.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#provide-registration-inputs"></a></h6>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑤③">Access Grant</a></p>
    <li data-md>
     <p>Let <code>CONTROLLER</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①④⑦">Agent</a> granting access</p>
   </ul>
   <h6 class="heading settled" data-level="9.4.1.4.2" id="provide-registration-outputs"><span class="secno">9.4.1.4.2. </span><span class="content">Outputs</span><a class="self-link" href="#provide-registration-outputs"></a></h6>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③④">Access Receipt</a> stored in an <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration③③">Application Registration</a></p>
   </ul>
   <h6 class="heading settled" data-level="9.4.1.4.3" id="provide-registration-details"><span class="secno">9.4.1.4.3. </span><span class="content">Operation Details</span><a class="self-link" href="#provide-registration-details"></a></h6>
   <ol>
    <li data-md>
     <p>Let <code>REC-SUBJECT</code> be the <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject⑨">Access Grant Subject</a> linked via <code>GRANT hasAccessGrantSubject</code></p>
    <li data-md>
     <p>Let <code>REC-APP</code> be <code>REC-SUBJECT accessByApplication</code></p>
    <li data-md>
     <ol>
      <li data-md>
       <p>Let <code>RECEIPT</code> be an empty <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③⑤">Access Receipt</a></p>
     </ol>
    <li data-md>
     <p>Let <code>RECEIPT fromAgent</code> be <code>CONTROLLER</code></p>
    <li data-md>
     <p>Let <code>RECEIPT toAgent</code> be <code>REC-APP</code></p>
    <li data-md>
     <p>Let <code>RECEIPT providedAt</code> be the current time</p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②⑧">Data Grant</a> <code>DATAGRANT</code> linked via <code>GRANT hasDataGrant</code></p>
     <ol>
      <li data-md>
       <p>Let <code>RECEIPT hasDataReceipt</code> be linked to the result of <a href="#provide-datareceipt">§ 9.4.1.5 Provide Data Receipt</a> with inputs: <code>DATAGRANT</code></p>
     </ol>
    <li data-md>
     <p>Let <code>APPREG</code> be result of <a href="#appreg-lookup">§ 4.5 Looking up an Application Registration</a> with
inputs: <code>CONTROLLER</code>, <code>REC-APP</code></p>
     <ol>
      <li data-md>
       <p>Call <a href="#appreg-new">§ 4.6 Registering an Application</a> if <code>APPREG</code> is empty</p>
     </ol>
    <li data-md>
     <p>Post <code>RECEIPT</code> to <code>APPREG</code> container</p>
    <li data-md>
     <p>Let <code>CURRENT</code> be <code>APPREG hasAccessReceipt</code></p>
    <li data-md>
     <p>Remove <code>CURRENT</code> if it exists</p>
    <li data-md>
     <p>Let <code>APPREG hasAccessReceipt</code> be <code>CURRENT</code></p>
    <li data-md>
     <p>Return <code>RECEIPT</code></p>
   </ol>
   <h5 class="heading settled" data-level="9.4.1.5" id="provide-datareceipt"><span class="secno">9.4.1.5. </span><span class="content">Provide Data Receipt</span><a class="self-link" href="#provide-datareceipt"></a></h5>
   <h6 class="heading settled" data-level="9.4.1.5.1" id="provide-datareceipt-inputs"><span class="secno">9.4.1.5.1. </span><span class="content">Inputs</span><a class="self-link" href="#provide-datareceipt-inputs"></a></h6>
   <ul>
    <li data-md>
     <p>Let <code>DATAGRANT</code> be a <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant②⑨">Data Grant</a></p>
    <li data-md>
     <p>Let <code>CONTROLLER</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①④⑧">Agent</a> granting access</p>
   </ul>
   <h6 class="heading settled" data-level="9.4.1.5.2" id="provide-datareceipt-outputs"><span class="secno">9.4.1.5.2. </span><span class="content">Outputs</span><a class="self-link" href="#provide-datareceipt-outputs"></a></h6>
   <ul>
    <li data-md>
     <p>A populated <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt⑤">Data Receipt</a></p>
   </ul>
   <h6 class="heading settled" data-level="9.4.1.5.3" id="provide-datareceipt-details"><span class="secno">9.4.1.5.3. </span><span class="content">Operation Details</span><a class="self-link" href="#provide-datareceipt-details"></a></h6>
   <ol>
    <li data-md>
     <p>Let <code>DATARECEIPT</code> be an empty <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt⑥">Data Receipt</a></p>
    <li data-md>
     <p>Let <code>DATARECEIPT hasRegistration</code> be <code>DATAGRANT hasRegistration</code></p>
    <li data-md>
     <p>Let <code>DATARECEIPT registeredShapeTree</code> be <code>DATAGRANT registeredShapeTree</code></p>
    <li data-md>
     <p>Let <code>DATARECEIPT accessMode</code>s be the same as <code>DATAGRANT accessMode</code>s</p>
    <li data-md>
     <p>Let <code>DATARECEIPT scopeOfDataGrant</code>s be the same as <code>DATAGRANT scopeOfDataGrant</code>s</p>
    <li data-md>
     <p>Let <code>DATARECEIPT hasRegisteredDataInstance</code>s be the same as <code>DATAGRANT hasRegisteredDataInstance</code>s</p>
    <li data-md>
     <p>Let <code>DATARECEIPT inheritsFrom</code>s be the same as <code>DATAGRANT inheritsFrom</code>s</p>
    <li data-md>
     <p>Return <code>DATARECEIPT</code></p>
   </ol>
   <h5 class="heading settled" data-level="9.4.1.6" id="provide-message"><span class="secno">9.4.1.6. </span><span class="content">Provide Receipt in Message</span><a class="self-link" href="#provide-message"></a></h5>
   <h6 class="heading settled" data-level="9.4.1.6.1" id="provide-message-inputs"><span class="secno">9.4.1.6.1. </span><span class="content">Inputs</span><a class="self-link" href="#provide-message-inputs"></a></h6>
   <ul>
    <li data-md>
     <p>Let <code>GRANT</code> be an <a data-link-type="dfn" href="#access-grant" id="ref-for-access-grant⑤④">Access Grant</a></p>
    <li data-md>
     <p>Let <code>CONTROLLER</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①④⑨">Agent</a> granting access</p>
   </ul>
   <h6 class="heading settled" data-level="9.4.1.6.2" id="provide-message-outputs"><span class="secno">9.4.1.6.2. </span><span class="content">Outputs</span><a class="self-link" href="#provide-message-outputs"></a></h6>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③⑥">Access Receipt</a> posted to another <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤⓪">Agent’s</a> access inbox</p>
   </ul>
   <h6 class="heading settled" data-level="9.4.1.6.3" id="provide-message-details"><span class="secno">9.4.1.6.3. </span><span class="content">Operation Details</span><a class="self-link" href="#provide-message-details"></a></h6>
   <ol>
    <li data-md>
     <p>Let <code>REC-SUBJECT</code> be the <a data-link-type="dfn" href="#access-grant-subject" id="ref-for-access-grant-subject①⓪">Access Grant Subject</a> linked via <code>GRANT hasAccessGrantSubject</code></p>
    <li data-md>
     <p>Let <code>REC-AGENT</code> be <code>REC-SUBJECT accessByAgent</code></p>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an empty <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③⑦">Access Receipt</a></p>
    <li data-md>
     <p>Let <code>RECEIPT fromAgent</code> be <code>CONTROLLER</code></p>
    <li data-md>
     <p>Let <code>RECEIPT toAgent</code> be <code>REC-AGENT</code></p>
    <li data-md>
     <p>Let <code>RECEIPT providedAt</code> be the current time</p>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#data-grant" id="ref-for-data-grant③⓪">Data Grant</a> <code>DATAGRANT</code> linked via <code>GRANT hasDataGrant</code></p>
     <ol>
      <li data-md>
       <p>Let <code>RECEIPT hasDataReceipt</code> be linked to the result of <a href="#provide-datareceipt">§ 9.4.1.5 Provide Data Receipt</a> with inputs: <code>DATAGRANT</code></p>
     </ol>
    <li data-md>
     <p>Post <code>RECEIPT</code> to <code>REC-AGENT hasAccessInbox</code></p>
    <li data-md>
     <p>Return <code>RECEIPT</code></p>
   </ol>
   <h4 class="heading settled" data-level="9.4.2" id="receipts-record"><span class="secno">9.4.2. </span><span class="content">Record Access Receipt</span><a class="self-link" href="#receipts-record"></a></h4>
   <p>This operation stores a new <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③⑧">Access Receipt</a> in
an <a data-link-type="dfn" href="#access-grant-registry" id="ref-for-access-grant-registry②⑦">Access Grant Registry</a>, which in turn will update <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry②">Remote Data Registries</a> to reflect the access granted in the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt③⑨">Access Receipt</a>.</p>
   <h5 class="heading settled" data-level="9.4.2.1" id="recordreceipt-inputs"><span class="secno">9.4.2.1. </span><span class="content">Inputs</span><a class="self-link" href="#recordreceipt-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④⓪">Access Receipt</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry①①">Access Receipt Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="9.4.2.2" id="recordreceipt-outputs"><span class="secno">9.4.2.2. </span><span class="content">Outputs</span><a class="self-link" href="#recordreceipt-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④①">Access Receipt</a> stored in <code>REGISTRY</code> with permissions applied and <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④②">Access Receipt</a> provided</p>
   </ul>
   <h5 class="heading settled" data-level="9.4.2.3" id="recordreceipt-details"><span class="secno">9.4.2.3. </span><span class="content">Operation Details</span><a class="self-link" href="#recordreceipt-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>CURRENT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④③">Access Receipt</a> returned by <a href="#receipts-load">§ 9.4.3 Load Access Receipt</a> with
inputs: <code>FROMAGENT</code>, <code>REGISTRY</code></p>
    <li data-md>
     <p>If <code>CURRENT</code> is empty</p>
     <ol>
      <li data-md>
       <p>Add <code>RECEIPT</code> to <code>REGISTRY</code></p>
      <li data-md>
       <p>Link <code>RECEIPT</code> to <code>REGISTRY</code> via <code>REGISTRY hasRegistration</code></p>
     </ol>
    <li data-md>
     <p>If <code>CURRENT</code> is not empty</p>
     <ol>
      <li data-md>
       <p>Update <code>CURRENT</code> with <code>RECEIPT</code></p>
     </ol>
    <li data-md>
     <p>Call <a href="#remote-update">§ 10.4.1 Update Remote Data</a> with inputs: <code>RECEIPT</code></p>
    <li data-md>
     <p>Return <code>RECEIPT</code></p>
   </ol>
   <h4 class="heading settled" data-level="9.4.3" id="receipts-load"><span class="secno">9.4.3. </span><span class="content">Load Access Receipt</span><a class="self-link" href="#receipts-load"></a></h4>
   <h5 class="heading settled" data-level="9.4.3.1" id="loadreceipt-inputs"><span class="secno">9.4.3.1. </span><span class="content">Inputs</span><a class="self-link" href="#loadreceipt-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>AGENT</code> be an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤①">Agent</a> to load a receipt for</p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry①②">Access Receipt Registry</a> to load from</p>
   </ul>
   <h5 class="heading settled" data-level="9.4.3.2" id="loadreceipt-outputs"><span class="secno">9.4.3.2. </span><span class="content">Outputs</span><a class="self-link" href="#loadreceipt-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>An <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④④">Access Receipt</a></p>
   </ul>
   <h5 class="heading settled" data-level="9.4.3.3" id="loadreceipt-details"><span class="secno">9.4.3.3. </span><span class="content">Operation Details</span><a class="self-link" href="#loadreceipt-details"></a></h5>
   <ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④⑤">Access Receipt</a> <code>RECEIPT</code> included in <code>REGISTRY hasRegistration</code></p>
     <ol>
      <li data-md>
       <p>return <code>RECEIPT</code> if <code>RECEIPT fromAgent</code> == <code>AGENT</code></p>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="9.4.4" id="receipts-present"><span class="secno">9.4.4. </span><span class="content">Present Access Receipt</span><a class="self-link" href="#receipts-present"></a></h4>
   <p>This operation shows an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤②">Agent</a> an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④⑥">Access Receipt</a> that was
delivered to them from another <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤③">Agent</a> who granted them access to the
data reflected in the receipt.</p>
   <p>It presents them the access that has been granted in the receipt,
and prompts them to accept it. Acceptance will record the receipt in their <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry①③">Access Receipt Registry</a>, and update their <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry③">Remote Data Registry</a> to
reflect it.</p>
   <h5 class="heading settled" data-level="9.4.4.1" id="presentreceipt-inputs"><span class="secno">9.4.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#presentreceipt-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④⑦">Access Receipt</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#access-receipt-registry" id="ref-for-access-receipt-registry①④">Access Receipt Registry</a></p>
    <li data-md>
     <p>Let <code>LANG</code> be the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤④">Agent’s</a> preferred language</p>
   </ul>
   <h5 class="heading settled" data-level="9.4.4.2" id="presentreceipt-details"><span class="secno">9.4.4.2. </span><span class="content">Operation Details</span><a class="self-link" href="#presentreceipt-details"></a></h5>
   <ol>
    <li data-md>
     <p>Present <code>RECEIPT fromAgent</code> as the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤⑤">Agent</a> granting access</p>
    <li data-md>
     <p>Present <code>RECEIPT toAgent</code> as the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤⑥">Agent</a> receiving access</p>
    <li data-md>
     <p>Let <code>CURRENT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④⑧">Access Receipt</a> returned by <a href="#receipts-load">§ 9.4.3 Load Access Receipt</a> with
inputs: <code>RECEIPT fromAgent</code>, <code>REGISTRY</code></p>
    <li data-md>
     <p>If <code>CURRENT</code> is not empty</p>
     <ol>
      <li data-md>
       <p>Present the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤⑦">Agent</a> that accepted it via <code>RECEIPT registeredBy</code></p>
      <li data-md>
       <p>Present the <a data-link-type="dfn" href="#application" id="ref-for-application⑨⑧">Application</a> is was accepted with via <code>RECEIPT registeredWith</code></p>
      <li data-md>
       <p>Present when it was registered via <code>RECEIPT registeredAt</code></p>
      <li data-md>
       <p>Present when it was last updated via <code>RECEIPT updatedAt</code></p>
     </ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt⑦">Data Receipt</a> <code>DATARECEIPT</code> linked via <code>RECEIPT hasDataReceipt</code></p>
     <ol>
      <li data-md>
       <p>Let <code>STDEC</code> be the <a data-link-type="dfn">Shape Tree Decorator</a> returned from the <a href="#">Get Shape Tree Decorator</a> operation with
inputs: <code>RECEIPT registeredShapeTree</code>, <code>LANG</code></p>
      <li data-md>
       <p>Present the name of the <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑤①">shape tree</a> via <code>STDEC skos:prefLabel</code></p>
      <li data-md>
       <p>Present <code>RECEIPT accessMode</code>s</p>
      <li data-md>
       <p>Present <code>RECEIPT scopeOfDataGrant</code></p>
       <ol>
        <li data-md>
         <p>If <code>RECEIPT scopeOfDataGrant</code> is <code>interop:NoAccess</code></p>
         <ol>
          <li data-md>
           <p>Present the user any access that is being rescinded if
they have an existing <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt⑧">Data Receipt</a> from <code>RECEIPT fromAgent</code> for <code>RECEIPT registeredShapeTree</code></p>
         </ol>
        <li data-md>
         <p>If <code>RECEIPT scopeOfDataGrant</code> is <code>interop:AllInstances</code></p>
         <ol>
          <li data-md>
           <p>Present the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤⑧">Agent</a> with summary details, and the ability
to view the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥④">Registered Data Instances</a></p>
         </ol>
        <li data-md>
         <p>If <code>RECEIPT scopeOfDataGrant</code> includes <code>interop:SelectedInstances</code></p>
         <ol>
          <li data-md>
           <p>Present the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑤⑨">Agent</a> with summary details, and the ability
to view the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥⑤">Registered Data Instances</a></p>
         </ol>
        <li data-md>
         <p>If <code>RECEIPT scopeOfDataGrant</code> includes <code>interop:InheritInstances</code></p>
         <ol>
          <li data-md>
           <p>Present the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥⓪">Agent</a> with summary details, and the ability
to view the <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥⑥">Registered Data Instances</a>, along with
pointers to the <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt⑨">Data Receipt</a> they inherit from.</p>
          <li data-md>
           <p>Order this <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①⓪">Data Receipt</a> after the <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①①">Data Receipt</a> they
inherit from.</p>
         </ol>
       </ol>
     </ol>
    <li data-md>
     <p>Discard <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt④⑨">Access Receipt</a> if <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥①">Agent</a> does not accept</p>
    <li data-md>
     <p>Call <a href="#receipts-record">§ 9.4.2 Record Access Receipt</a> with inputs: <code>RECEIPT</code>, <code>REGISTRY</code> if <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥②">Agent</a> accepts the <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤⓪">Access Receipt</a></p>
   </ol>
   <h2 class="heading settled" data-level="10" id="remote"><span class="secno">10. </span><span class="content">Remote Data Registration</span><a class="self-link" href="#remote"></a></h2>
   <h3 class="heading settled" data-level="10.1" id="remote-overview"><span class="secno">10.1. </span><span class="content">Overview</span><a class="self-link" href="#remote-overview"></a></h3>
   <p class="issue" id="issue-49143a90"><a class="self-link" href="#issue-49143a90"></a> Write overview for Remote Data Registration</p>
   <h3 class="heading settled" data-level="10.2" id="remote-datamodel"><span class="secno">10.2. </span><span class="content">Data Model</span><a class="self-link" href="#remote-datamodel"></a></h3>
   <h4 class="heading settled" data-level="10.2.1" id="remote-datamodel-summary"><span class="secno">10.2.1. </span><span class="content">Summary</span><a class="self-link" href="#remote-datamodel-summary"></a></h4>
   <figure id="fig-remote-model">
     <img src="diagrams/remote-model.svg" width="100%/"> 
    <figcaption>Data model for the <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry④">Remote Data Registry</a></figcaption>
   </figure>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥③">Agent</a> links to <a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set①">Remote Data Registry Sets</a> via the <a href="interop.ttl#hasAccessReceiptRegistrySet">interop:hasRemoteDataRegistrySet</a> property.</p>
   <p>A <a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set②">Remote Data Registry Set</a> links to any number of <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry⑤">Remote Data Registries</a> via
the <a href="interop.ttl#hasRegistry">interop:hasRegistry</a> property.</p>
   <p>A <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry⑥">Remote Data Registry</a> links to any number of registered <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration">Remote Data Registrations</a> via the <a href="interop.ttl#hasRegistration">interop:hasRegistration</a> property.</p>
   <p>A <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①">Remote Data Registration</a> may link to one or more <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance">Remote Data Instances</a> via the <a href="interop.ttl#hasRemoteDataInstance">interop:hasRemoteDataInstance</a> property.</p>
   <figure id="fig-remote-agent">
    <figcaption><a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥④">Agent</a> at https://alice.pod.example/profile/id#me
  linking to an <a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set③">Remote Data Registry Set</a></figcaption>
<pre class="highlight"><c- g>&lt;#me></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>Agent</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRemoteDataRegistrySet</c-> <c- g>&lt;https://alice.pod.example/profile/remote#set></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-remote-registry-set">
    <figcaption>A <a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set④">Remote Data Registry Set</a> at
   https://bob.pod.example/profile/remote#set linking to two different <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry⑦">Remote Data Registries</a></figcaption>
<pre class="highlight"><c- g>&lt;#set></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>RemoteDataRegistrySet</c-><c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> <c- g>&lt;https://bob.pod.example/remote/#registry></c-> <c- p>,</c->
                  <c- g>&lt;https://bob.otherpod.example/remote/#registry></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-remote-registry">
    <figcaption>An <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry⑧">Remote Data Registry</a> at
  https://bob.pod.example/remote/#registry
  linking to several registered <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration②">Remote Data Registrations</a> </figcaption>
<pre class="highlight"><c- g>&lt;#registry></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>RemoteDataRegistry</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- g>&lt;f0ebbd29-3a5a-4770-af29-cdb7693066b4/#registration></c-> <c- p>,</c->
                      <c- g>&lt;265dff0c-b199-42d8-95b3-d1eaae91c412/#registration></c-> <c- p>,</c->
                      <c- g>&lt;f68e95eb-a61f-408c-8d83-c4f21dae6115/#registration></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-remote-registration">
    <figcaption>An <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration③">Remote Data Registration</a> at
  https://bob.pod.example/remote/f0ebbd29-3a5a-4770-af29-cdb7693066b4/#registration </figcaption>
<pre class="highlight"><c- g>&lt;#registration></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>RemoteDataRegistration</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> <c- g>&lt;https://bob.pod.example/profile/id#me></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> <c- g>&lt;https://trusted.example/id#agent></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>providedAt</c-> <c- s>"2020-09-05T06:16:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataReceipt</c-> <c- g>&lt;https://bob.pod.example/receipts/fa6d6553-0308-4abd-bce6-888df653695a#notebook-receipt></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> <c- g>&lt;https://alice.pod.example/data/notebook-tree/#registration></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- nn>interop:</c-><c- f>SelectedInstances</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRemoteDataInstance</c-> <c- g>&lt;https://bob.pod.example/remote/f0ebbd29-3a5a-4770-af29-cdb7693066b4/cd04e76b-d64d-4cea-aacf-fb248a295002#instance></c-> <c- p>,</c->
                            <c- g>&lt;https://bob.pod.example/remote/f0ebbd29-3a5a-4770-af29-cdb7693066b4/9506b58f-3c36-4c0c-a698-712baf478deb#instance></c-> <c- p>.</c->
</pre>
   </figure>
   <figure id="fig-remote-data-instance">
    <figcaption>An <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①">Remote Data Instance</a> at
  https://bob.pod.example/remote/f0ebbd29-3a5a-4770-af29-cdb7693066b4/cd04e76b-d64d-4cea-aacf-fb248a295002 </figcaption>
<pre class="highlight"><c- g>&lt;#registration></c->
  <c- b>a</c-> <c- nn>interop:</c-><c- f>RemoteDataInstance</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- s>"2020-09-05T06:15:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>providedAt</c-> <c- s>"2020-09-05T06:16:01Z"</c-><c- o>^^</c->xsd:dateTime <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataReceipt</c-> <c- g>&lt;https://bob.pod.example/receipts/fa6d6553-0308-4abd-bce6-888df653695a#notebook-receipt></c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> <c- nn>note:</c-><c- f>notebook-tree</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- nn>acl:</c-><c- f>Read</c-><c- p>,</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> <c- g>&lt;https://alice.pod.example/data/notebook/notebook-1/#notebook></c-> <c- p>.</c->
</pre>
   </figure>
   <h4 class="heading settled" data-level="10.2.2" id="datamodel-remote-registry-set"><span class="secno">10.2.2. </span><span class="content">Remote Data Registry Set</span><a class="self-link" href="#datamodel-remote-registry-set"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remote-data-registry-set">Remote Data Registry Set</dfn> is a <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set⑥">Registry Set</a> specifically
made up of <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry⑨">Remote Data Registries</a>.</p>
   <table align="left" class="classinfo data" id="classRemoteDataRegistrySet">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3" text-align="left"> <a href="interop.ttl#RemoteDataRegistrySet">RemoteDataRegistrySet</a> a rdfs:subClassOf <a href="#datamodel-agent">RegistrySet</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistry
      <td>Registry
      <td>Link to associated <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①⓪">Remote Data Registries</a>
   </table>
   <p>The <a href="#shexRemoteDataRegistrySet">RemoteDataRegistrySetShape</a> is used to
validate an instance of the <a href="#classRemoteDataRegistrySet">RemoteDataRegistrySet</a> class.</p>
<pre class="highlight" id="shexRemoteDataRegistrySet"><c- g>&lt;#RemoteDataRegistrySetShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>RemoteDataRegistrySet</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistry</c-> IRI+
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#RemoteDataRegistrySetTree">RemoteDataRegistrySetTree</a> is assigned to a resource to ensure it will validate against the <a href="#shexRemoteDataRegistrySet">RemoteDataRegistrySetShape</a>.</p>
<pre class="highlight" id="treeRemoteDataRegistrySet"><c- g>&lt;#RemoteDataRegistrySetTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#RemoteDataRegistrySetShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"receipt"</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="10.2.3" id="datamodel-remote-data-registry"><span class="secno">10.2.3. </span><span class="content">Remote Data Registry</span><a class="self-link" href="#datamodel-remote-data-registry"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remote-data-registry">Remote Data Registry</dfn> is a collection of <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration④">Remote Data Registrations</a> stored in a specific location in a <a data-link-type="dfn" href="#pod" id="ref-for-pod⑦">pod</a>.</p>
   <table align="left" class="classinfo data" id="classRemoteDataRegistry">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#RemoteDataRegistry">RemoteDataRegistry</a> a rdfs:subClassOf <a href="#datamodel-agent">Registry</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>hasRegistration
      <td>Registration
      <td>Link to associated <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration⑤">Remote Data Registrations</a>
   </table>
   <p>The <a href="#shexRemoteDataRegistry">RemoteDataRegistryShape</a> is used to
validate an instance of the <a href="#classRemoteDataRegistry">RemoteDataRegistry</a> class.</p>
<pre class="highlight" id="shexRemoteDataRegistry"><c- g>&lt;#RemoteDataRegistryShape></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>RemoteDataRegistry</c-> <c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> IRI*
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#RemoteDataRegistryTree">RemoteDataRegistryTree</a> is assigned to a container resource to ensure that it will validate against the <a href="#shexRemoteDataRegistry">RemoteDataRegistryShape</a>, and contain only
conformant instances of the <a href="#treeRemoteDataRegistration">RemoteDataRegistrationTree</a>.</p>
<pre class="highlight" id="treeRemoteDataRegistry"><c- g>&lt;#RemoteDataRegistryTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#RemoteDataRegistryShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>contains</c-> <c- g>&lt;#RemoteDataRegistrationTree></c-> <c- p>,</c->
              <c- nn>st:</c-><c- f>AllowNone</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="10.2.4" id="datamodel-remote-data-registration"><span class="secno">10.2.4. </span><span class="content">Remote Data Registration</span><a class="self-link" href="#datamodel-remote-data-registration"></a></h4>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥⑤">Agent</a> maintains a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remote-data-registration">Remote Data Registration</dfn> to represent
a <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥④">Data Registration</a> that another <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥⑥">Agent</a> has shared with them. It
may represent access to the entire <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥⑤">Data Registration</a>, or only to a
select group of <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance②">Remote Data Instances</a> within.</p>
   <p>A <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration⑥">Remote Data Registration</a> is created when an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥⑦">Agent</a> receives an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤①">Access Receipt</a> from another <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥⑧">Agent</a> that includes access to a given <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥⑥">Data Registration</a>.</p>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration⑦">Remote Data Registration</a> MUST be associated with a <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①②">Data Receipt</a></p>
    <li data-md>
     <p>If an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤②">Access Receipt</a> with a corresponding <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①③">Data Receipt</a> is received
that changes the access to a shared <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥⑦">Data Registration</a>, the
corresponding <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration⑧">Remote Data Registration</a> MUST be updated, and
removed altogether if that access is removed.</p>
   </ul>
   <table align="left" class="classinfo data" id="classRemoteDataRegistration">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#RemoteDataRegistration">RemoteDataRegistration</a> a rdfs:subClassOf <a href="#datamodel-agent">Registration</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>registeredBy
      <td>Agent
      <td><a data-link-type="dfn" href="#agent" id="ref-for-agent①⑥⑨">Agent</a> that registered the <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration⑨">Remote Data Registration</a>
     <tr>
      <td>registeredWith
      <td>Application
      <td><a data-link-type="dfn" href="#application" id="ref-for-application⑨⑨">Application</a> used to create the <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①⓪">Remote Data Registration</a>
     <tr>
      <td>registeredAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①①">Remote Data Registration</a> was created
     <tr>
      <td>updatedAt
      <td>xsd:dateTime
      <td>Date and time the <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①②">Remote Data Registration</a> was updated
     <tr>
      <td>providedAt
      <td>xsd:dateTime
      <td>When the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance③">Remote Data Instance</a> was shared by remote <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦⓪">Agent</a>
     <tr>
      <td>hasRegistration
      <td>Data Registration
      <td>Link to the <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥⑧">Data Registration</a> that was shared
     <tr>
      <td>registeredShapeTree
      <td>st:ShapeTree
      <td>Shape tree associated with the shared <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑥⑨">Data Registration</a>
     <tr>
      <td>scopeOfDataGrant
      <td> interop:AllInstances, interop:InheritInstances,
      interop:SelectedInstances, interop:NoAccess
      <td>
       Identifies the scope of access that was granted 
       <ul>
        <li>interop:AllInstances - Scope includes
              access to all <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥⑦">Registered Data Instances</a> of the shared <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑦⓪">Data Registration</a>
        <li>interop:InheritInstances - Scope includes
              access to <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥⑧">Registered Data Instances</a> inherited by
              instances selected in the <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①④">Data Receipt</a> linked via
              interop:inheritsFrom
        <li>interop:SelectedInstances - Scope includes
              access only to those <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑥⑨">Registered Data Instances</a> specifically
              selected by the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦①">Agent</a>
        <li>interop:NoAccess - No access is granted
       </ul>
     <tr>
      <td>accessMode
      <td>acl:Read, acl:Write, acl:Control, acl:Append
      <td>Access modes granted on the shared <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑦①">Data Registration</a>
     <tr>
      <td>hasRemoteDataInstance
      <td><a href="#classRemoteDataInstance">Remote Data Instance</a>
      <td>Link to <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance④">Remote Data Instance</a> associated with the <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①③">Remote Data Registration</a>
     <tr>
      <td>hasDataReceipt
      <td><a href="#classDataReceipt">DataReceipt</a>
      <td>Link to <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①⑤">Data Receipt</a> that granted this shared access
   </table>
   <p>The <a href="#shexRemoteDataRegistration">RemoteDataRegistrationShape</a> is used to
validate an instance of the <a href="#classRemoteDataRegistration">RemoteDataRegistration</a> class.</p>
<pre class="highlight" id="shexRemoteDataRegistration"><c- g>&lt;#RemoteDataRegistration></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-><c- nn>interop:</c-><c- f>RemoteDataRegistration</c-><c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredBy</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredWith</c-> IRI <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>providedAt</c-> <c- nn>xsd:</c-><c- f>dataTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>updatedAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegistration</c-> IRI <c- p>;</c->           <c- c># Remote data registration</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->       <c- c># Associated shape tree</c->
  <c- nn>interop:</c-><c- f>scopeOfDataGrant</c-> <c- p>[</c-> <c- nn>interop:</c-><c- f>SelectedInstances</c->
                         <c- nn>interop:</c-><c- f>AllInstances</c->
                         <c- nn>interop:</c-><c- f>InheritInstances</c->
                         <c- nn>interop:</c-><c- f>NoAccess</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- p>[</c-> <c- nn>acl:</c-><c- f>Read</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- nn>acl:</c-><c- f>Append</c-> <c- nn>acl:</c-><c- f>Control</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRemoteDataInstance</c-> IRI* <c- p>;</c->    <c- c># if specific instances are selected or inherited</c->
  <c- nn>interop:</c-><c- f>hasDataReceipt</c-> IRI+ <c- p>;</c->         <c- c># Associated data receipts</c->
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#RemoteDataRegistrationTree">RemoteDataRegistrationTree</a> is assigned to a resource via the <a href="#treeRemoteDataRegistry">RemoteDataRegistryTree</a>, and ensures
that the assigned resource will validate against the <a href="#shexRemoteDataRegistration">RemoteDataRegistrationShape</a>.</p>
<pre class="highlight" id="treeRemoteDataRegistration"><c- g>&lt;#RemoteDataRegistrationTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeContainer</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#RemoteDataRegistrationShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>contains</c-> <c- g>&lt;#RemoteDataInstanceTree></c-> <c- p>,</c->
              <c- nn>st:</c-><c- f>AllowNone</c-> <c- p>.</c->
</pre>
   <h4 class="heading settled" data-level="10.2.5" id="datamodel-remote-data-instance"><span class="secno">10.2.5. </span><span class="content">Remote Data Instance</span><a class="self-link" href="#datamodel-remote-data-instance"></a></h4>
   <p>An <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦②">Agent</a> maintains a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remote-data-instance">Remote Data Instance</dfn> to represent
a <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦⓪">Registered Data Instance</a> that another <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦③">Agent</a> has shared with them.</p>
   <p>A <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance⑤">Remote Data Instance</a> is created when an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦④">Agent</a> receives an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤③">Access Receipt</a> from another <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦⑤">Agent</a> that includes access to a specific <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦①">Registered Data Instance</a>.</p>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance⑥">Remote Data Instance</a> MUST be associated with a <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①⑥">Data Receipt</a></p>
    <li data-md>
     <p>If an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤④">Access Receipt</a> is received with a corresponding <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①⑦">Data Receipt</a> that changes the access to a shared <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦②">Registered Data Instance</a>, the corresponding <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance⑦">Remote Data Instance</a> MUST be updated, and removed altogether if that access is removed.</p>
   </ul>
   <table align="left" class="classinfo data" id="classRemoteDataInstance">
    <colgroup>
    <colgroup>
    <colgroup>
    <thead>
     <tr>
      <th colspan="3"> <a href="interop.ttl#RemoteDataInstance">RemoteDataInstance</a> 
     <tr>
      <th>Property
      <th>Range
      <th>Description
    <tbody>
     <tr>
      <td>registeredAt
      <td>xsd:dateTime
      <td>When the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance⑧">Remote Data Instance</a> was created
     <tr>
      <td>updatedAt
      <td>xsd:dateTime
      <td>When the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance⑨">Remote Data Instance</a> was last updated
     <tr>
      <td>providedAt
      <td>xsd:dateTime
      <td>When the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①⓪">Remote Data Instance</a> was shared by remote <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦⑥">Agent</a>
     <tr>
      <td>hasRegisteredDataInstance
      <td>RegisteredDataInstance
      <td>Link to <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦③">Registered Data Instance</a> associated with the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①①">Remote Data Instance</a>
     <tr>
      <td>registeredShapeTree
      <td>st:ShapeTree
      <td>Shape tree associated with the shared <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦④">Registered Data Instance</a>
     <tr>
      <td>accessMode
      <td>acl:Read, acl:Write, acl:Control, acl:Append
      <td>Access modes granted on the shared <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦⑤">Registered Data Instance</a>
     <tr>
      <td>hasDataReceipt
      <td><a href="#classDataReceipt">DataReceipt</a>
      <td>Link to <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①⑧">Data Receipt</a> that granted this shared access
   </table>
   <p>The <a href="#shexRemoteDataInstance">RemoteDataInstanceShape</a> is used to
validate an instance of the <a href="#classRemoteDataInstance">RemoteDataInstance</a> class.</p>
<pre class="highlight" id="shexRemoteDataInstance"><c- g>&lt;#RemoteDataInstance></c-> <c- p>{</c->
  <c- b>a</c-> <c- p>[</c-><c- nn>interop:</c-><c- f>RemoteDataInstance</c-><c- p>]</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasRegisteredDataInstance</c-> IRI <c- p>;</c-> <c- c># Remote registered data instance</c->
  <c- nn>interop:</c-><c- f>registeredAt</c-> <c- nn>xsd:</c-><c- f>dateTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>providedAt</c-> <c- nn>xsd:</c-><c- f>dataTime</c-> <c- p>;</c->
  <c- nn>interop:</c-><c- f>registeredShapeTree</c-> IRI <c- p>;</c->       <c- c># Associated shape tree</c->
  <c- nn>interop:</c-><c- f>accessMode</c-> <c- p>[</c-> <c- nn>acl:</c-><c- f>Read</c-> <c- nn>acl:</c-><c- f>Write</c-> <c- nn>acl:</c-><c- f>Append</c-> <c- nn>acl:</c-><c- f>Control</c-> <c- p>]</c->+ <c- p>;</c->
  <c- nn>interop:</c-><c- f>hasDataReceipt</c-> IRI+ <c- p>;</c->         <c- c># Associated data receipts</c->
<c- p>}</c->
</pre>
   <p>The <a href="interop.tree#RemoteDataInstanceTree">RemoteDataInstanceTree</a> is assigned to a resource via the <a href="#treeRemoteDataInstance">RemoteDataInstanceTree</a>, and ensures
that the assigned resource will validate against the <a href="#shexRemoteDataInstance">RemoteDataInstanceShape</a>.</p>
<pre class="highlight" id="treeRemoteDataInstance"><c- g>&lt;#RemoteDataInstanceTree></c->
  <c- b>a</c-> <c- nn>st:</c-><c- f>ShapeTree</c-><c- p>;</c->
  <c- nn>st:</c-><c- f>expectsType</c-> <c- nn>st:</c-><c- f>ShapeTreeResource</c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>validatedBy</c-> <c- g>&lt;interops#RemoteDataInstanceShape></c-> <c- p>;</c->
  <c- nn>st:</c-><c- f>matchesUriTemplate</c-> <c- s>"{id}"</c-> <c- p>.</c->
</pre>
   <h3 class="heading settled" data-level="10.3" id="remote-hierarchy"><span class="secno">10.3. </span><span class="content">Resource Hierarchy</span><a class="self-link" href="#remote-hierarchy"></a></h3>
   <table align="left" class="data tree">
    <colgroup>
     <col>
     <col>
     <col>
     <col>
    <thead>
     <tr>
      <th>Resource
      <th>Class
      <th>Shape
      <th>Shape Tree
    <tbody>
     <tr>
      <td><code>/profile/</code>
      <td>-
      <td>-
      <td><a href="#treeAgent">ProfileTree</a>
     <tr>
      <td><code>-- remote#set</code>
      <td><a href="#classRemoteDataRegistrySet">RemoteDataRegistrySet</a>
      <td><a href="#shexRemoteDataRegistrySet">RemoteDataRegistrySetShape</a>
      <td><a href="#treeRemoteDataRegistrySet">RemoteDataRegistrySetTree</a>
     <tr>
      <td><code>/remote/#registry</code>
      <td><a href="#classRemoteDataRegistry">RemoteDataRegistry</a>
      <td><a href="#shexRemoteDataRegistry">RemoteDataRegistryShape</a>
      <td><a href="#treeRemoteDataRegistry">RemoteDataRegistryTree</a>
     <tr>
      <td><code>-- f0ebbd29...b4/#registration</code>
      <td><a href="#classRemoteDataRegistration">RemoteData</a>
      <td><a href="#shexRemoteDataRegistration">RemoteDataRegistrationShape</a>
      <td><a href="#treeRemoteDataRegistration">RemoteDataRegistrationTree</a>
     <tr>
      <td><code>---- cd04e76b...02#instance</code>
      <td><a href="#classRemoteDataInstance">RemoteDataInstance</a>
      <td><a href="#shexRemoteDataInstance">RemoteDataInstanceShape</a>
      <td><a href="#treeRemoteDataInstance">RemoteDataInstanceTree</a>
     <tr>
      <td><code>---- 9506b58f...eb#instance</code>
      <td><a href="#classRemoteDataInstance">RemoteDataInstance</a>
      <td><a href="#shexRemoteDataInstance">RemoteDataInstanceShape</a>
      <td><a href="#treeRemoteDataInstance">RemoteDataInstanceTree</a>
   </table>
   <p>The <a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set⑤">Remote Data Registry Set</a> and the <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①①">Remote Data Registry</a> <em class="rfc2119">MAY</em> or <em class="rfc2119">MAY NOT</em> be on the same <a data-link-type="dfn" href="#pod" id="ref-for-pod⑧">pod</a>.</p>
   <p><a data-link-type="dfn" href="#remote-data-registry-set" id="ref-for-remote-data-registry-set⑥">Remote Data Registry Set</a> and <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①②">Remote Data Registry</a> resources <em class="rfc2119">MAY</em> use any resource or subject names.</p>
   <p><a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①④">Remote Data Registrations</a> and <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①②">Remote Data Instances</a> <em class="rfc2119">MUST</em> use <a href="https://www.ietf.org/rfc/rfc4122.txt">UUIDs</a> for resource names.</p>
   <h3 class="heading settled" data-level="10.4" id="remote-operations"><span class="secno">10.4. </span><span class="content">Operations</span><a class="self-link" href="#remote-operations"></a></h3>
   <h4 class="heading settled" data-level="10.4.1" id="remote-update"><span class="secno">10.4.1. </span><span class="content">Update Remote Data</span><a class="self-link" href="#remote-update"></a></h4>
   <h5 class="heading settled" data-level="10.4.1.1" id="updateremote-inputs"><span class="secno">10.4.1.1. </span><span class="content">Inputs</span><a class="self-link" href="#updateremote-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤⑤">Access Receipt</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be an <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①③">Remote Data Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.1.2" id="updateremote-outputs"><span class="secno">10.4.1.2. </span><span class="content">Outputs</span><a class="self-link" href="#updateremote-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤⑥">Access Receipt</a> updated with remote data associations</p>
   </ul>
   <h5 class="heading settled" data-level="10.4.1.3" id="updateremote-details"><span class="secno">10.4.1.3. </span><span class="content">Operation Details</span><a class="self-link" href="#updateremote-details"></a></h5>
   <ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt①⑨">Data Receipt</a> <code>DRECEIPT</code> linked via <code>RECEIPT hasDataReceipt</code></p>
     <ol>
      <li data-md>
       <p>Let <code>REMOTEDR</code> be a <a data-link-type="dfn">Remote Data Regisration</a> returned from <a href="#remote-loadremotedr">§ 10.4.5 Load Remote Data Registration</a> with inputs: <code>DRECEIPT hasRegistration</code>, <code>REGISTRY</code></p>
       <ol>
        <li data-md>
         <p>If <code>REMOTEDR</code> is not empty</p>
         <ol>
          <li data-md>
           <p>Call <a href="#remote-updateremotedr">§ 10.4.4 Update Remote Data Registration</a> with inputs: <code>REMOTEDR</code>, <code>DRECEIPT</code>, <code>RECEIPT</code></p>
         </ol>
        <li data-md>
         <p>If <code>REMOTEDR</code> is empty</p>
         <ol>
          <li data-md>
           <p>Next if <code>DRECEIPT scopeOfDataGrant</code> is <code>interop:NoAccess</code></p>
          <li data-md>
           <p>Call <a href="#remote-createremotedr">§ 10.4.2 Create Remote Data Registration</a> with inputs: <code>RECEIPT</code>, <code>DRECEIPT</code>, <code>REGISTRY</code></p>
         </ol>
       </ol>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="10.4.2" id="remote-createremotedr"><span class="secno">10.4.2. </span><span class="content">Create Remote Data Registration</span><a class="self-link" href="#remote-createremotedr"></a></h4>
   <h5 class="heading settled" data-level="10.4.2.1" id="createremotedr-inputs"><span class="secno">10.4.2.1. </span><span class="content">Inputs</span><a class="self-link" href="#createremotedr-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>DRECEIPT</code> be a <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt②⓪">Data Receipt</a></p>
    <li data-md>
     <p>Let <code>RECEIPT</code> be a <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤⑦">Access Receipt</a></p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be a <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①④">Remote Data Registry</a></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.2.2" id="createremotedr-outputs"><span class="secno">10.4.2.2. </span><span class="content">Outputs</span><a class="self-link" href="#createremotedr-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A created <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①⑤">Remote Data Registration</a></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.2.3" id="createremotedr-details"><span class="secno">10.4.2.3. </span><span class="content">Operation Details</span><a class="self-link" href="#createremotedr-details"></a></h5>
   <ol>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return error if <code>DRECEIPT scopeOfDataGrant</code> includes <code>interop:SelectedInstances</code> or <code>interop:inheritInstances</code> and <code>DRECEIPT hasRegisteredDataInstance</code> is empty</p>
    <li data-md>
     <p>Let <code>REMOTEDR</code> be an empty <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①⑥">Remote Data Registration</a></p>
    <li data-md>
     <p>Let <code>REMOTEDR registeredBy</code> be the current <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦⑦">Agent</a></p>
    <li data-md>
     <p>Let <code>REMOTEDR registeredWith</code> be the current <a data-link-type="dfn" href="#application" id="ref-for-application①⓪⓪">Application</a></p>
    <li data-md>
     <p>Let <code>REMOTEDR registeredAt</code> be the current timestamp</p>
    <li data-md>
     <p>Let <code>REMOTEDR updatedAt</code> be the current timestamp</p>
    <li data-md>
     <p>Let <code>REMOTEDR providedAt</code> be <code>RECEIPT providedAt</code></p>
    <li data-md>
     <p>Let <code>REMOTEDR hasDataReceipt</code> be <code>DRECEIPT</code></p>
    <li data-md>
     <p>Let <code>REMOTEDR hasRegistration</code> be <code>DRECEIPT hasRegistration</code></p>
    <li data-md>
     <p>Let <code>REMOTEDR registeredShapeTree</code> be <code>DRECEIPT registeredShape</code></p>
    <li data-md>
     <p>Let <code>REMOTEDR scopeOfDataGrant</code>s be <code>DRECEIPT scopeOfDataGrant</code>s</p>
    <li data-md>
     <p>Let <code>REMOTEDR accessMode</code>s be <code>DRECEIPT accessMode</code>s</p>
    <li data-md>
     <p>If <code>DRECEIPT scopeOfDataGrant</code> is <code>interop:AllInstances</code></p>
     <ol>
      <li data-md>
       <p>Let <code>REMOTEDR scopeOfDataGrant</code> be <code>interop:AllInstances</code></p>
     </ol>
    <li data-md>
     <p>If <code>DRECEIPT scopeOfDataGrant</code> is <code>interop:SelectedInstances</code> AND/OR <code>interop:InheritInstances</code></p>
     <ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦⑥">Registered Data Instance</a> <code>RDI</code> linked via <code>DRECEIPT hasRegisteredDataInstance</code></p>
       <ol>
        <li data-md>
         <p>Let <code>REMOTEDR hasRemoteDataInstance</code> be linked with the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①③">Remote Data Instance</a> returned from <a href="#remote-createremotedi">§ 10.4.3 Create Remote Data Instance</a> with inputs: <code>REMOTEDR</code>, <code>RDI</code>, <code>DRECEIPT</code>, <code>RECEIPT</code></p>
       </ol>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="10.4.3" id="remote-createremotedi"><span class="secno">10.4.3. </span><span class="content">Create Remote Data Instance</span><a class="self-link" href="#remote-createremotedi"></a></h4>
   <h5 class="heading settled" data-level="10.4.3.1" id="createremotedi-inputs"><span class="secno">10.4.3.1. </span><span class="content">Inputs</span><a class="self-link" href="#createremotedi-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>REMOTEDR</code> be a <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①⑦">Remote Data Registration</a></p>
    <li data-md>
     <p>Let <code>RDI</code> be a <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦⑦">Registered Data Instance</a></p>
    <li data-md>
     <p>Let <code>DRECEIPT</code> be a <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt②①">Data Receipt</a></p>
    <li data-md>
     <p>Let <code>RECEIPT</code> be an <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤⑧">Access Receipt</a></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.3.2" id="createremotedi-outputs"><span class="secno">10.4.3.2. </span><span class="content">Outputs</span><a class="self-link" href="#createremotedi-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①④">Remote Data Instance</a> for <code>RDI</code></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.3.3" id="createremotedi-details"><span class="secno">10.4.3.3. </span><span class="content">Operation Details</span><a class="self-link" href="#createremotedi-details"></a></h5>
   <ol>
    <li data-md>
     <p>Let <code>REMOTEDI</code> be an empty <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①⑤">Remote Data Instance</a></p>
    <li data-md>
     <p>Let <code>REMOTEDI registeredAt</code> be the current timestamp</p>
    <li data-md>
     <p>Let <code>REMOTEDI updatedAt</code> be the current timestamp</p>
    <li data-md>
     <p>Let <code>REMOTEDI providedAt</code> be <code>RECEIPT providedAt</code></p>
    <li data-md>
     <p>Let <code>REMOTEDI registeredShapeTree</code> be <code>DRECEIPT registeredShapeTree</code></p>
    <li data-md>
     <p>Let <code>REMOTEDI accessMode</code>s be <code>DRECEIPT accessMode</code>s</p>
    <li data-md>
     <p>Let <code>REMOTEDR hasDataReceipt</code> be <code>DRECEIPT</code></p>
    <li data-md>
     <p>Let <code>REMOTEDR hasRegisteredDataInstance</code> be <code>DRECEIPT hasRegisteredDataInstance</code></p>
   </ol>
   <h4 class="heading settled" data-level="10.4.4" id="remote-updateremotedr"><span class="secno">10.4.4. </span><span class="content">Update Remote Data Registration</span><a class="self-link" href="#remote-updateremotedr"></a></h4>
   <h5 class="heading settled" data-level="10.4.4.1" id="updateremotedr-inputs"><span class="secno">10.4.4.1. </span><span class="content">Inputs</span><a class="self-link" href="#updateremotedr-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>REMOTEDR</code> be a <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①⑧">Remote Data Registration</a> to update</p>
    <li data-md>
     <p>Let <code>DRECEIPT</code> be a <a data-link-type="dfn" href="#data-receipt" id="ref-for-data-receipt②②">Data Receipt</a></p>
    <li data-md>
     <p>Let <code>RECEIPT</code> be a <a data-link-type="dfn" href="#access-receipt" id="ref-for-access-receipt⑤⑨">Access Receipt</a></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.4.2" id="updateremotedr-outputs"><span class="secno">10.4.4.2. </span><span class="content">Outputs</span><a class="self-link" href="#updateremotedr-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>An updated <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration①⑨">Remote Data Registration</a></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.4.3" id="updateremotedr-details"><span class="secno">10.4.4.3. </span><span class="content">Operation Details</span><a class="self-link" href="#updateremotedr-details"></a></h5>
   <ol>
    <li data-md>
     <p><em class="rfc2119">MUST</em> return error if <code>REMOTEDR providedAt</code> is later than <code>RECEIPT providedAt</code></p>
    <li data-md>
     <p>If <code>REMOTEDR hasDataReceipt</code> is not <code>DRECEIPT</code></p>
     <ol>
      <li data-md>
       <p>Let <code>OLDDRECEIPT</code> be <code>REMOTEDR hasDataReceipt</code></p>
      <li data-md>
       <p>Let <code>REMOTEDR hasDataReceipt</code> be <code>DRECEIPT</code></p>
      <li data-md>
       <p>Let <code>OLDRECEIPT replacedBy</code> be <code>DRECEIPT</code></p>
      <li data-md>
       <p>Let <code>OLDRECEIPT updatedAt</code> be the current timestamp</p>
     </ol>
    <li data-md>
     <p>Let <code>REMOTEDR accessMode</code>s be <code>DRECEIPT accessMode</code>s</p>
    <li data-md>
     <p>If <code>DRECEIPT scopeOfDataGrant</code> is <code>interop:NoAccess</code></p>
     <ol>
      <li data-md>
       <p>Let <code>REMOTEDR scopeOfDataGrant</code> be <code>interop:NoAccess</code></p>
      <li data-md>
       <p>Let <code>REMOTEDR accessMode</code> be empty</p>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①⑥">Remote Data Instance</a> <code>REMOTEDI</code> linked via <code>REMOTEDR hasRemoteDataInstance</code></p>
       <ol>
        <li data-md>
         <p>Delete <code>REMOTEDI</code></p>
        <li data-md>
         <p>Remove <code>REMOTEDR hasRemoteDataInstance</code> link to <code>REMOTEDI</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>If <code>DRECEIPT scopeOfDataGrant</code> is <code>interop:AllInstances</code></p>
     <ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①⑦">Remote Data Instance</a> <code>REMOTEDI</code> linked via <code>REMOTEDR hasRemoteDataInstance</code></p>
       <ol>
        <li data-md>
         <p>Delete <code>REMOTEDI</code></p>
        <li data-md>
         <p>Remove <code>REMOTEDR hasRemoteDataInstance</code> link to <code>REMOTEDI</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>If <code>DRECEIPT scopeOfDataGrant</code> is <code>interop:SelectedInstances</code> or <code>interop:InheritInstances</code></p>
     <ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①⑧">Remote Data Instance</a> <code>REMOTEDI</code> linked via <code>REMOTEDR hasRemoteDataInstance</code></p>
       <ol>
        <li data-md>
         <p>Delete <code>REMOTEDI</code></p>
        <li data-md>
         <p>Remove <code>REMOTEDR hasRemoteDataInstance</code> link to <code>REMOTEDI</code></p>
       </ol>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦⑧">Registered Data Instance</a> <code>RDI</code> linked via <code>DRECEIPT hasRegisteredDataInstance</code></p>
       <ol>
        <li data-md>
         <p>Let <code>REMOTEDR hasRemoteDataInstance</code> be linked with the <a data-link-type="dfn" href="#remote-data-instance" id="ref-for-remote-data-instance①⑨">Remote Data Instance</a> returned from <a href="#remote-createremotedi">§ 10.4.3 Create Remote Data Instance</a> with inputs: <code>REMOTEDR</code>, <code>RDI</code>, <code>DRECEIPT</code>, <code>RECEIPT</code></p>
       </ol>
     </ol>
    <li data-md>
     <p>Let <code>REMOTEDR updatedAt</code> be the current timestamp</p>
    <li data-md>
     <p>Return <code>REMOTEDR</code></p>
   </ol>
   <p class="issue" id="issue-587cb988"><a class="self-link" href="#issue-587cb988"></a> It might be more elegant to not wipe out the remote data instances
and recreate them with changes.</p>
   <p class="issue" id="issue-c51d824d"><a class="self-link" href="#issue-c51d824d"></a> Someone should be able to grant a given <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦⑧">Agent</a> different modes of
access for different selected instances in a given registration.</p>
   <h4 class="heading settled" data-level="10.4.5" id="remote-loadremotedr"><span class="secno">10.4.5. </span><span class="content">Load Remote Data Registration</span><a class="self-link" href="#remote-loadremotedr"></a></h4>
   <h5 class="heading settled" data-level="10.4.5.1" id="loadremotedr-inputs"><span class="secno">10.4.5.1. </span><span class="content">Inputs</span><a class="self-link" href="#loadremotedr-inputs"></a></h5>
   <ul>
    <li data-md>
     <p>Let <code>DATAREG</code> be a <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑦②">Data Registration</a> to lookup</p>
    <li data-md>
     <p>Let <code>REGISTRY</code> be a <a data-link-type="dfn" href="#remote-data-registry" id="ref-for-remote-data-registry①⑤">Remote Data Registry</a> to load from</p>
   </ul>
   <h5 class="heading settled" data-level="10.4.5.2" id="loadremotedr-outputs"><span class="secno">10.4.5.2. </span><span class="content">Outputs</span><a class="self-link" href="#loadremotedr-outputs"></a></h5>
   <ul>
    <li data-md>
     <p>A <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration②⓪">Remote Data Registration</a> corresponding to <code>REMOTEDR</code></p>
   </ul>
   <h5 class="heading settled" data-level="10.4.5.3" id="loadremotedr-details"><span class="secno">10.4.5.3. </span><span class="content">Operation Details</span><a class="self-link" href="#loadremotedr-details"></a></h5>
   <ol>
    <li data-md>
     <p>For each <a data-link-type="dfn" href="#remote-data-registration" id="ref-for-remote-data-registration②①">Remote Data Registration</a> <code>REMOTEDR</code> in <code>REGISTRY</code></p>
     <ol>
      <li data-md>
       <p>return <code>REMOTEDR</code> if <code>REMOTEDR hasRegistration</code> == <code>DATAREG</code></p>
     </ol>
   </ol>
   <h2 class="heading settled" data-level="11" id="trusted"><span class="secno">11. </span><span class="content">Trusted Agents</span><a class="self-link" href="#trusted"></a></h2>
   <h3 class="heading settled" data-level="11.1" id="trusted-overview"><span class="secno">11.1. </span><span class="content">Overview</span><a class="self-link" href="#trusted-overview"></a></h3>
   <p>A <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent⑧">trusted Agent</a> is an application that a <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑦⑨">Agent</a> trusts
to perform actions for them with elevated privilege. They can be
trusted to help a <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧⓪">Agent</a> to make smart decisions related to
their data.</p>
   <p>There’s no limit to what a trusted agent can
assist with, but <a href="#appreg">registering applications</a> and authorizing access to
data are two critical operations covered in this proposal.</p>
   <p>A trusted <a data-link-type="dfn" href="#application-registration-agent" id="ref-for-application-registration-agent④">application registration agent</a> helps the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧①">Agent</a> make smart decisions about the applications they choose to utilize, and
ensure they get provisioned appropriately.</p>
   <p>A trusted agent for data authorization is needed in cases where the resource
controller wishes to grant limited access to data in her Pod to another <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent②">authenticated agent</a> or <a data-link-type="dfn" href="#user-piloted-application" id="ref-for-user-piloted-application">user-piloted application</a>, but needs
assistance to determine what access is needed, and help to provision
that access.</p>
   <p>There are three typical patterns to interact with a trusted agent; <em>Embedded</em>, <em>Synchronous</em>, and <em>Asynchronous</em>.</p>
   <p>The <strong>Embedded pattern</strong> is employed when the application in question has full
control privileges, and the trusted agent capabilities can
be executed directly. An example of an application that could fall into
this category would be a Pod management application installed by default
by the user’s Pod provider.</p>
   <p>The <strong>Synchronous pattern</strong> utilizes a web-based redirect flow much like an
OAuth2 grant flow. The user is redirected to the trusted agent URL, with
a callback parameter provided as part of the request. When the
trusted agent is finished, it sends the user back to the provided
callback URL. This is an excellent pattern for application registration
and data authorization.</p>
   <p>The <strong>Asynchronous pattern</strong> utilizes an event based model, where a message is
sent to the Trusted Agent through some mechanism (direct, pubsub, etc).
This flow is most typical for server-side/bot applications or any piloted
clients that can make use of asynchronous notification processing.</p>
   <p>A given trusted agent may employ one or more of these patterns.</p>
   <h3 class="heading settled" data-level="11.2" id="trusted-operations"><span class="secno">11.2. </span><span class="content">Operations</span><a class="self-link" href="#trusted-operations"></a></h3>
   <h4 class="heading settled" data-level="11.2.1" id="trusted-load"><span class="secno">11.2.1. </span><span class="content">Load Trusted Agent</span><a class="self-link" href="#trusted-load"></a></h4>
   <p class="issue" id="issue-7dd90a74"><a class="self-link" href="#issue-7dd90a74"></a> Write operation for Load Trusted Agent</p>
   <h4 class="heading settled" data-level="11.2.2" id="trusted-redirect"><span class="secno">11.2.2. </span><span class="content">Redirect to Trusted Agent</span><a class="self-link" href="#trusted-redirect"></a></h4>
   <p class="issue" id="issue-d8dc7dcb"><a class="self-link" href="#issue-d8dc7dcb"></a> Write operation for Redirect to Trusted Agent</p>
   <h4 class="heading settled" data-level="11.2.3" id="trusted-return"><span class="secno">11.2.3. </span><span class="content">Return from Trusted Agent</span><a class="self-link" href="#trusted-return"></a></h4>
   <p class="issue" id="issue-97ae7d4b"><a class="self-link" href="#issue-97ae7d4b"></a> Write operation for Return from Trusted Agent</p>
   <h2 class="heading settled" data-level="12" id="definitions"><span class="secno">12. </span><span class="content">Definitions</span><a class="self-link" href="#definitions"></a></h2>
   <p><b>All definitions as stated below should be considered in the context of
an interoperable <a data-link-type="dfn" href="#ecosystem" id="ref-for-ecosystem⑧">ecosystem</a> for <a data-link-type="dfn" href="#solid" id="ref-for-solid">Solid</a>, whether explicitly stated
or not.</b></p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="solid">Solid</dfn> is a protocol made up of a number of open web standards
aimed at decentralizing data on the web.</p>
   <p>A Solid <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pod">pod</dfn> is a place for storing and accessing data via
the <a data-link-type="dfn" href="#solid" id="ref-for-solid①">Solid</a> protocol, with mechanisms for controlling who or what can
access that data.</p>
   <p>An interoperable <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ecosystem">ecosystem</dfn> is
a collection of <a data-link-type="dfn" href="#solid" id="ref-for-solid②">Solid</a> compatible <a data-link-type="dfn" href="#application" id="ref-for-application①⓪①">applications</a> developed by one or more
entities, used by a community of users, that can safely access and manipulate
the same kinds of data in <a data-link-type="dfn" href="#pod" id="ref-for-pod⑨">pods</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="server-side-application">server-side application</dfn> runs on a dedicated server. They may
also act as autonomous <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent③">authenticated agents</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-piloted-application">user-piloted application</dfn> runs on a user’s device, with the user
as the <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent④">authenticated agent</a>. They include in-browser javascript
applications, native desktop applications, and mobile applications.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="authenticated-agent">authenticated agent</dfn> is an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧②">agent</a> that has strongly
authenticated their <a data-link-type="dfn" href="#identity" id="ref-for-identity①⑨">identity</a> by proving control of the <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①①">identity profile document</a> via an authentication protocol such as <a data-link-type="biblio" href="#biblio-webid-oidc">[WEBID-OIDC]</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="identity">identity</dfn> is a unique URI that can be dereferenced
to return an <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①②">identity profile document</a>. Compatible
identity systems include <a data-link-type="dfn" href="#webid" id="ref-for-webid②">WebID</a> and <a data-link-type="dfn" href="#did" id="ref-for-did">DID</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="identity-profile-document">identity profile document</dfn> is a linked data document obtained by
dereferencing the URI for a given <a data-link-type="dfn" href="#identity" id="ref-for-identity②⓪">identity</a>. It provides information that
can be used to prove that a given <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧③">Agent</a> controls the document.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="webid">WebID</dfn> is a web resource at an HTTP URI which refers to an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧④">agent</a>. An <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①③">identity profile document</a> can be accessed by
dereferencing the WebID. <a data-link-type="biblio" href="#biblio-webid">[WEBID]</a></p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="did">DID</dfn> is a URI that associates a DID subject (e.g. an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧⑤">agent</a>,
thing, data model, abstract entity, etc.) with a DID document,
equivalent to an <a data-link-type="dfn" href="#identity-profile-document" id="ref-for-identity-profile-document①④">identity profile document</a>, to allow trustable
interactions with that subject. <a data-link-type="biblio" href="#biblio-did">[DID]</a></p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="identity-provider">identity provider</dfn> furnishes an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧⑥">agent</a> with authenticated
credentials that prove agent is who it says it is, across the web.</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="token">token<a class="self-link" href="#token"></a></dfn> is used to make authenticated requests to the <a data-link-type="dfn" href="#solid" id="ref-for-solid③">Solid</a> server for a given <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent⑤">authenticated agent</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="applicationid">ApplicationID</dfn> is a web resource at an HTTP URI uniquely associated
with a given <a data-link-type="dfn" href="#application" id="ref-for-application①⓪②">application</a>. For <a data-link-type="dfn" href="#server-side-application" id="ref-for-server-side-application">server-side applications</a>, it may also
serve as an <a data-link-type="dfn" href="#identity" id="ref-for-identity②①">identity</a>. An <a data-link-type="dfn" href="#application-profile-document" id="ref-for-application-profile-document⑥">application profile document</a> can be
accessed by dereferencing the ApplicationID.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-profile-document">application profile document</dfn> is a linked data document
obtained by dereferencing the URI for a given <a data-link-type="dfn" href="#applicationid" id="ref-for-applicationid⑧">ApplicationID</a>. It contains
useful information about an application that can be employed in
various workflows including application registration and data authorization.</p>
   <p>A <dfn data-dfn-type="dfn" data-noexport id="resource-controller">resource controller<a class="self-link" href="#resource-controller"></a></dfn> is an <a data-link-type="dfn" href="#authenticated-agent" id="ref-for-authenticated-agent⑥">authenticated agent</a> with full
privileges and control over a given resource or set of resources.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="acl-resource">acl resource</dfn> as defined by <a data-link-type="biblio" href="#biblio-wac">[WAC]</a> may be directly
associated with a resource or indirectly associated with a resource
through inheritance. It determines which <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①⑧">authorization subjects</a> can
access a resource, and the modes of access they have for it.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="access-mode">access mode</dfn> denotes operations (e.g. read, write)
that a given <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject①⑨">authorization subject</a> can perform on a resource.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="authorization-subject">authorization subject</dfn> is the target of a given authorization
statement in an <a data-link-type="dfn" href="#acl-resource" id="ref-for-acl-resource⑥">acl resource</a>. It is either an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧⑦">Agent</a> (individual,
group, <a data-link-type="dfn" href="#server-side-application" id="ref-for-server-side-application①">server-side application</a>), a <a data-link-type="dfn" href="#user-piloted-application" id="ref-for-user-piloted-application①">User-Piloted Application</a> in use by <em>any</em> <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧⑧">Agent</a>, or a combination of
a specific <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑧⑨">Agent</a> using a specific <a data-link-type="dfn" href="#user-piloted-application" id="ref-for-user-piloted-application②">User-Piloted Application</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="authorization-statement">authorization statement</dfn> is ...</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="trusted-agent">trusted agent</dfn> is any <a data-link-type="dfn" href="#application" id="ref-for-application①⓪③">application</a> that a <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑨⓪">Agent</a> trusts to perform actions for them. These
actions typically require some leve</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-registration-agent">application registration agent</dfn> is a type of <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent⑨">trusted agent</a> that an <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑨①">Agent</a> uses to register and manage applications that
interface with their <a data-link-type="dfn" href="#pod" id="ref-for-pod①⓪">pod</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="data-authorization-agent">data authorization agent</dfn> is a type of <a data-link-type="dfn" href="#trusted-agent" id="ref-for-trusted-agent①⓪">trusted agent</a> that assists a <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑨②">Agent</a> with the managing the data
in their <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②⑤">Data Registries</a>, and authorizing access to it from other <a data-link-type="dfn" href="#authorization-subject" id="ref-for-authorization-subject②⓪">authorization subjects</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shape">shape</dfn> provides a schema that RDF data graphs must meet in order
to be considered conformant. A shape associated with a given resource in a <a data-link-type="dfn" href="#pod" id="ref-for-pod①①">pod</a> ensures that any data stored in that resource must conform to the
associated shape. Shape languages include <a data-link-type="biblio" href="#biblio-shex">[SHEX]</a> and <a data-link-type="biblio" href="#biblio-shacl">[SHACL]</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shape-tree">shape tree</dfn> defines a prospective tree of related resources
which can be read and written by applications. The shape tree associates
each of these resources with a shape. This allows one to treat a set of
related resources as a single grouping, and apply that to a range of
operations including access control, data organization, data validation,
and data migration. <a data-link-type="biblio" href="#biblio-shapetrees">[SHAPETREES]</a></p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-registry-set">Application Registry Set</dfn> is a <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set⑦">Registry Set</a> specifically
made up of <a data-link-type="dfn" href="#application-registry" id="ref-for-application-registry②⓪">Application Registries</a>. Represented by the <a href="interop.ttl#ApplicationRegistySet">interop:ApplicationRegistrySet</a> class.
Validated by the <a href="interop.shex#RegistrySetShape">interops:ApplicationRegistrySetShape</a>.
Associated with resources by the <a href="interop.tree#ApplicationRegistrySetTree">interopt:ApplicationRegistrySetTree</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-registry">Application Registry</dfn> is a collection of <a data-link-type="dfn" href="#application-registration" id="ref-for-application-registration③④">Application Registrations</a> stored in a specific location in a <a data-link-type="dfn" href="#pod" id="ref-for-pod①②">pod</a>.
Represented by the <a href="interop.ttl#ApplicationRegistry">interop:ApplicationRegistry</a> class.
Validated by the <a href="interop.shex#ApplicationRegistryShape">interops:ApplicationRegistryShape</a>.
Associated with resources by the <a href="interop.tree#ApplicationRegistryTree">interopt:ApplicationRegistryTree</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="application-registration">Application Registration</dfn> provides the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑨③">Agent</a> with a place to maintain metadata, state, preferences, and
other application-specific data associated with a given <a data-link-type="dfn" href="#application" id="ref-for-application①⓪④">Application</a> they
have elected to use. Represented by the <a href="interop.ttl#ApplicationRegistration">interop:ApplicationRegistration</a> class.
Validated by the <a href="interop.shex#ApplicationRegistrationShape">interops:ApplicationRegistrationShape</a>.
Associated with resources by the <a href="interop.tree#ApplicationRegistrationTree">interopt:ApplicationRegistrationTree</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="data-registry-set">Data Registry Set</dfn> is a <a data-link-type="dfn" href="#registry-set" id="ref-for-registry-set⑧">Registry Set</a> specifically made up of <a data-link-type="dfn" href="#data-registry" id="ref-for-data-registry②⑥">Data Registries</a>. Represented by the <a href="interop.ttl#DataRegistrySet">interop:DataRegistrySet</a> class.
Validated by the <a href="interop.shex#DataRegistrySetShape">interops:DataRegistrySetShape</a>.
Associated with resources by the <a href="interop.tree#DataRegistrySetTree">interopt:DataRegistrySetTree</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="data-registry">Data Registry</dfn> is a collection of <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑦③">Data Registrations</a>, each
representing a unique type of data, stored in a specific location in a
Solid <a data-link-type="dfn" href="#pod" id="ref-for-pod①③">pod</a>. Represented by the <a href="interop.ttl#DataRegistry">interop:DataRegistry</a> class.
Validated by the <a href="interop.shex#DataRegistryShape">interops:DataRegistryShape</a>.
Associated with resources through the <a href="interop.tree#DataRegistryTree">interopt:DataRegistryTree</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="data-registration">Data Registration</dfn> provides the <a data-link-type="dfn" href="#agent" id="ref-for-agent①⑨④">Agent</a> with a place to store <a data-link-type="dfn" href="#registered-data-instance" id="ref-for-registered-data-instance⑦⑨">Registered Data Instances</a> of a particular type, conforming to a
given <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑤②">shape tree</a>. Represented by the <a href="interop.ttl#DataRegistration">interop:DataRegistration</a> class.
Validated by the <a href="interop.shex#DataRegistrationShape">interops:DataRegistrationShape</a>.
Associated with resources through the <a href="interop.tree#DataRegistrationTree">interopt:DataRegistrationTree</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="registered-data-instance">Registered Data Instance</dfn> is a unique, stored instance of a
particular type of data conforming to a given <a data-link-type="dfn" href="#shape-tree" id="ref-for-shape-tree⑤③">shape tree</a>. Each registered
data instance is contained within a given <a data-link-type="dfn" href="#data-registration" id="ref-for-data-registration⑦④">Data Registration</a>.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#access-decorator-index">Access Decorator Index</a><span>, in §7.2.7</span>
   <li><a href="#access-decorator-resource">Access Decorator Resource</a><span>, in §7.2.8</span>
   <li><a href="#access-decorator-series">Access Decorator Series</a><span>, in §7.2.7.1</span>
   <li><a href="#access-decorator-version">Access Decorator Version</a><span>, in §7.2.7.2</span>
   <li><a href="#access-grant">Access Grant</a><span>, in §8.2.4</span>
   <li><a href="#access-grant-registry">Access Grant Registry</a><span>, in §8.2.3</span>
   <li><a href="#access-grant-registry-set">Access Grant Registry Set</a><span>, in §8.2.2</span>
   <li><a href="#access-grant-subject">Access Grant Subject</a><span>, in §8.2.5</span>
   <li><a href="#access-invitation">Access Invitation</a><span>, in §8.2.7</span>
   <li><a href="#access-invitation-channel">Access Invitation Channel</a><span>, in §8.2.8</span>
   <li><a href="#access-mode">access mode</a><span>, in §12</span>
   <li><a href="#access-need">Access Need</a><span>, in §7.2.3</span>
   <li><a href="#access-need-decorator">Access Need Decorator</a><span>, in §7.2.8.2</span>
   <li><a href="#access-need-group">Access Need Group</a><span>, in §7.2.2</span>
   <li><a href="#access-need-group-decorator">Access Need Group Decorator</a><span>, in §7.2.8.1</span>
   <li><a href="#access-need-override">Access Need Override</a><span>, in §7.2.2</span>
   <li><a href="#access-receipt">Access Receipt</a><span>, in §9.2.4</span>
   <li><a href="#access-receipt-registry">Access Receipt Registry</a><span>, in §9.2.3</span>
   <li><a href="#access-receipt-registry-set">Access Receipt Registry Set</a><span>, in §9.2.2</span>
   <li><a href="#access-request">Access Request</a><span>, in §7.2.6</span>
   <li><a href="#acl-resource">acl resource</a><span>, in §12</span>
   <li><a href="#agent">Agent</a><span>, in §2.2.2</span>
   <li><a href="#application">Application</a><span>, in §3.2.2</span>
   <li><a href="#applicationid">ApplicationID</a><span>, in §12</span>
   <li><a href="#application-profile-document">application profile document</a><span>, in §12</span>
   <li><a href="#application-registration">Application Registration</a><span>, in §12</span>
   <li><a href="#application-registration-agent">application registration agent</a><span>, in §12</span>
   <li><a href="#application-registry">Application Registry</a><span>, in §12</span>
   <li><a href="#application-registry-set">Application Registry Set</a><span>, in §12</span>
   <li><a href="#authenticated-agent">authenticated agent</a><span>, in §12</span>
   <li><a href="#authorization-statement">authorization statement</a><span>, in §12</span>
   <li><a href="#authorization-subject">authorization subject</a><span>, in §12</span>
   <li><a href="#compiled-access">Compiled Access</a><span>, in §7.2.5</span>
   <li><a href="#compiled-access-group">Compiled Access Group</a><span>, in §7.2.4</span>
   <li><a href="#data-authorization-agent">data authorization agent</a><span>, in §12</span>
   <li><a href="#data-grant">Data Grant</a><span>, in §8.2.6</span>
   <li><a href="#data-receipt">Data Receipt</a><span>, in §9.2.5</span>
   <li><a href="#data-registration">Data Registration</a><span>, in §12</span>
   <li><a href="#data-registry">Data Registry</a><span>, in §12</span>
   <li><a href="#data-registry-set">Data Registry Set</a><span>, in §12</span>
   <li><a href="#did">DID</a><span>, in §12</span>
   <li><a href="#ecosystem">ecosystem</a><span>, in §12</span>
   <li><a href="#identity">identity</a><span>, in §12</span>
   <li><a href="#identity-profile-document">identity profile document</a><span>, in §12</span>
   <li><a href="#identity-provider">identity provider</a><span>, in §12</span>
   <li><a href="#pod">pod</a><span>, in §12</span>
   <li><a href="#registered-data-instance">Registered Data Instance</a><span>, in §12</span>
   <li><a href="#registry">Registry</a><span>, in §2.1</span>
   <li><a href="#registry-set">Registry Set</a><span>, in §2.2.1</span>
   <li><a href="#remote-data-instance">Remote Data Instance</a><span>, in §10.2.5</span>
   <li><a href="#remote-data-registration">Remote Data Registration</a><span>, in §10.2.4</span>
   <li><a href="#remote-data-registry">Remote Data Registry</a><span>, in §10.2.3</span>
   <li><a href="#remote-data-registry-set">Remote Data Registry Set</a><span>, in §10.2.2</span>
   <li><a href="#resource-controller">resource controller</a><span>, in §12</span>
   <li><a href="#root-access-need">Root Access Need</a><span>, in §7.2.2</span>
   <li><a href="#root-compiled-access">Root Compiled Access</a><span>, in §7.2.4</span>
   <li><a href="#server-side-application">server-side application</a><span>, in §12</span>
   <li><a href="#shape">shape</a><span>, in §12</span>
   <li><a href="#shape-tree">shape tree</a><span>, in §12</span>
   <li><a href="#solid">Solid</a><span>, in §12</span>
   <li><a href="#token">token</a><span>, in §12</span>
   <li><a href="#trusted-agent">trusted agent</a><span>, in §12</span>
   <li><a href="#user-piloted-application">user-piloted application</a><span>, in §12</span>
   <li><a href="#webid">WebID</a><span>, in §12</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-violation-resource">
   <a href="https://w3c.github.io/webappsec-csp/#violation-resource">https://w3c.github.io/webappsec-csp/#violation-resource</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-violation-resource">8.4.9.3. Operation Details</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSP3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-violation-resource" style="color:initial">resource</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-csp3">[CSP3]
   <dd>Mike West. <a href="https://www.w3.org/TR/CSP3/">Content Security Policy Level 3</a>. 15 October 2018. WD. URL: <a href="https://www.w3.org/TR/CSP3/">https://www.w3.org/TR/CSP3/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-did">[DID]
   <dd>Drummond Reed; et al. <a href="https://www.w3.org/TR/did-core/">Decentralized Identifiers (DIDs) v1.0</a>. URL: <a href="https://www.w3.org/TR/did-core/">https://www.w3.org/TR/did-core/</a>
   <dt id="biblio-problems-and-goals">[PROBLEMS-AND-GOALS]
   <dd>Justin Bingham; et al. <a href="https://github.com/solid/data-interoperability-panel/blob/master/problems-and-goals.md">Problems and Goals for Interoperability, Collaboration, and Security in a Solid Pod</a>. URL: <a href="https://github.com/solid/data-interoperability-panel/blob/master/problems-and-goals.md">https://github.com/solid/data-interoperability-panel/blob/master/problems-and-goals.md</a>
   <dt id="biblio-shacl">[SHACL]
   <dd>Holger Knublauch; Dimitris Kontokostas. <a href="https://www.w3.org/TR/shacl/">Shapes Constraint Language (SHACL)</a>. URL: <a href="https://www.w3.org/TR/shacl/">https://www.w3.org/TR/shacl/</a>
   <dt id="biblio-shapetrees">[SHAPETREES]
   <dd>Justin Bingham; et al. <a href="https://shapetrees.github.io/specification/primer">Shape Trees</a>. URL: <a href="https://shapetrees.github.io/specification/primer">https://shapetrees.github.io/specification/primer</a>
   <dt id="biblio-shex">[SHEX]
   <dd>Eric Prud'hommeaux; et al. <a href="http://shex.io/shex-semantics/index.html">Shape Expressions Language 2.1</a>. URL: <a href="http://shex.io/shex-semantics/index.html">http://shex.io/shex-semantics/index.html</a>
   <dt id="biblio-wac">[WAC]
   <dd><a href="https://solid.github.io/specification/wac/">Web Access Control</a>. URL: <a href="https://solid.github.io/specification/wac/">https://solid.github.io/specification/wac/</a>
   <dt id="biblio-webid">[WEBID]
   <dd>Tim Berners-Lee; Henry Story; Andrei Sambra. <a href="https://www.w3.org/2005/Incubator/webid/spec/identity/">WebID 1.0</a>. URL: <a href="https://www.w3.org/2005/Incubator/webid/spec/identity/">https://www.w3.org/2005/Incubator/webid/spec/identity/</a>
   <dt id="biblio-webid-oidc">[WEBID-OIDC]
   <dd>Dmitri Zagidulin. <a href="https://github.com/solid/webid-oidc-spec">WebID-OIDC Authentication Specification</a>. URL: <a href="https://github.com/solid/webid-oidc-spec">https://github.com/solid/webid-oidc-spec</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Refactor Application Registration to use the format introduced throughout
Data Authorization (overview, model, hierarchy, permissions, operations )<a href="#issue-53f602c0"> ↵ </a></div>
   <div class="issue"> Is it appropriate to use a one-way hash for application registration
resource names. <a href="https://github.com/solid/data-interoperability-panel/issues/48">Github issue</a><a href="#issue-0ccfac38"> ↵ </a></div>
   <div class="issue"> Applications that can perform these capabilities will be discoverable
through the Agent. Until that section is written, we’ll use
hard-coded properties associated with the Agent for discovery.<a href="#issue-368507bb"> ↵ </a></div>
   <div class="issue"> Refactor Data Registration to use the format introduced throughout
Data Authorization (overview, model, hierarchy, permissions, operations )<a href="#issue-3a71f65f"> ↵ </a></div>
   <div class="issue"> WAC doesn’t have any mechanism to extend inherited permissions. The
presence of a specific ACL on a resource negates all inherited permissions,
making it impossible to “slightly adjust” or “modify” a resource
while maintaining the permissions inherited for it.<a href="#issue-c8c51af1"> ↵ </a></div>
   <div class="issue"> Identify the scheme through which created resource permissions are
derived if they are not specified explicitly.<a href="#issue-d79966ae"> ↵ </a></div>
   <div class="issue"> Patterns to interface with Trusted Agents will be detailed
in the Trusted Agents section.<a href="#issue-50ef623f"> ↵ </a></div>
   <div class="issue"> Should we assume that CISERVICE is able to manage grants, or should
it need to redirect through the authorization agent? Perhaps the recommendation
should be that they are combined? Bad separation of concerns?<a href="#issue-d5f0eb31"> ↵ </a></div>
   <div class="issue"> This doesn’t take account a sequencing of validation steps from
one channel to another.<a href="#issue-d1e70f49"> ↵ </a></div>
   <div class="issue"> Write overview for Access Grants<a href="#issue-a3c650f4"> ↵ </a></div>
   <div class="issue"> Need to properly factor in multi-pod scenarios. Must identify the
proper access registry to store things in based on the data registration, which
means pods will also need to be registered.<a href="#issue-4a203aca"> ↵ </a></div>
   <div class="issue"> Write standard operation for invitation delivery<a href="#issue-2800f864"> ↵ </a></div>
   <div class="issue"> Write standard operation for validating an invitation<a href="#issue-00444ef2"> ↵ </a></div>
   <div class="issue"> Deal with cases when the data registration doesn’t exist yet<a href="#issue-e3aa414f"> ↵ </a></div>
   <div class="issue"> Append mode for AllInstances needs to be specially handled, and may
require an additional attribute specified in the requested <a data-link-type="dfn" href="#access-need">Access Needs</a><a href="#issue-307c0631"> ↵ </a></div>
   <div class="issue"> Consider when an existing Access Need Group is expanded or contracted<a href="#issue-9e6a825b"> ↵ </a></div>
   <div class="issue"> Consider when there are new Groups being requested from a given Agent<a href="#issue-996107f3"> ↵ </a></div>
   <div class="issue"> Write operation for selecting specific registered data instances
for a given Data Registration within an Access Grant<a href="#issue-e2737901"> ↵ </a></div>
   <div class="issue"> Write operation for selecting all registered data instances
for a given Data Registration within an Access Grant<a href="#issue-9ab190ed"> ↵ </a></div>
   <div class="issue"> Write overview for Access Receipts<a href="#issue-bc8f1079"> ↵ </a></div>
   <div class="issue"> Write definition for Access Receipt class<a href="#issue-b8eb1e10"> ↵ </a></div>
   <div class="issue"> Write definition for Data Receipt class<a href="#issue-e441a39e"> ↵ </a></div>
   <div class="issue"> Write overview for Remote Data Registration<a href="#issue-49143a90"> ↵ </a></div>
   <div class="issue"> It might be more elegant to not wipe out the remote data instances
and recreate them with changes.<a href="#issue-587cb988"> ↵ </a></div>
   <div class="issue"> Someone should be able to grant a given <a data-link-type="dfn" href="#agent">Agent</a> different modes of
access for different selected instances in a given registration.<a href="#issue-c51d824d"> ↵ </a></div>
   <div class="issue"> Write operation for Load Trusted Agent<a href="#issue-7dd90a74"> ↵ </a></div>
   <div class="issue"> Write operation for Redirect to Trusted Agent<a href="#issue-d8dc7dcb"> ↵ </a></div>
   <div class="issue"> Write operation for Return from Trusted Agent<a href="#issue-97ae7d4b"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="registry">
   <b><a href="#registry">#registry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-registry">2.1. Overview</a> <a href="#ref-for-registry①">(2)</a>
    <li><a href="#ref-for-registry②">2.2.1. Summary</a> <a href="#ref-for-registry③">(2)</a> <a href="#ref-for-registry④">(3)</a> <a href="#ref-for-registry⑤">(4)</a> <a href="#ref-for-registry⑥">(5)</a> <a href="#ref-for-registry⑦">(6)</a>
    <li><a href="#ref-for-registry⑧">2.4. Permission Model</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="registry-set">
   <b><a href="#registry-set">#registry-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-registry-set">2.2.1. Summary</a> <a href="#ref-for-registry-set①">(2)</a> <a href="#ref-for-registry-set②">(3)</a>
    <li><a href="#ref-for-registry-set③">2.4. Permission Model</a>
    <li><a href="#ref-for-registry-set④">8.2.2. Access Grant Registry Set</a>
    <li><a href="#ref-for-registry-set⑤">9.2.2. Access Receipt Registry Set</a>
    <li><a href="#ref-for-registry-set⑥">10.2.2. Remote Data Registry Set</a>
    <li><a href="#ref-for-registry-set⑦">12. Definitions</a> <a href="#ref-for-registry-set⑧">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="agent">
   <b><a href="#agent">#agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-agent">1. Introduction</a> <a href="#ref-for-agent①">(2)</a> <a href="#ref-for-agent②">(3)</a> <a href="#ref-for-agent③">(4)</a> <a href="#ref-for-agent④">(5)</a> <a href="#ref-for-agent⑤">(6)</a> <a href="#ref-for-agent⑥">(7)</a> <a href="#ref-for-agent⑦">(8)</a> <a href="#ref-for-agent⑧">(9)</a> <a href="#ref-for-agent⑨">(10)</a> <a href="#ref-for-agent①⓪">(11)</a> <a href="#ref-for-agent①①">(12)</a> <a href="#ref-for-agent①②">(13)</a>
    <li><a href="#ref-for-agent①③">2.1. Overview</a> <a href="#ref-for-agent①④">(2)</a> <a href="#ref-for-agent①⑤">(3)</a> <a href="#ref-for-agent①⑥">(4)</a> <a href="#ref-for-agent①⑦">(5)</a> <a href="#ref-for-agent①⑧">(6)</a> <a href="#ref-for-agent①⑨">(7)</a> <a href="#ref-for-agent②⓪">(8)</a> <a href="#ref-for-agent②①">(9)</a> <a href="#ref-for-agent②②">(10)</a> <a href="#ref-for-agent②③">(11)</a> <a href="#ref-for-agent②④">(12)</a> <a href="#ref-for-agent②⑤">(13)</a> <a href="#ref-for-agent②⑥">(14)</a> <a href="#ref-for-agent②⑦">(15)</a> <a href="#ref-for-agent②⑧">(16)</a>
    <li><a href="#ref-for-agent②⑨">2.2.1. Summary</a> <a href="#ref-for-agent③⓪">(2)</a> <a href="#ref-for-agent③①">(3)</a> <a href="#ref-for-agent③②">(4)</a> <a href="#ref-for-agent③③">(5)</a>
    <li><a href="#ref-for-agent③④">2.2.2. Agent</a> <a href="#ref-for-agent③⑤">(2)</a> <a href="#ref-for-agent③⑥">(3)</a> <a href="#ref-for-agent③⑦">(4)</a> <a href="#ref-for-agent③⑧">(5)</a> <a href="#ref-for-agent③⑨">(6)</a> <a href="#ref-for-agent④⓪">(7)</a>
    <li><a href="#ref-for-agent④①">2.3. Resource Hierarchy</a>
    <li><a href="#ref-for-agent④②">2.4. Permission Model</a> <a href="#ref-for-agent④③">(2)</a> <a href="#ref-for-agent④④">(3)</a>
    <li><a href="#ref-for-agent④⑤">3.1. Overview</a> <a href="#ref-for-agent④⑥">(2)</a>
    <li><a href="#ref-for-agent④⑦">3.2.2. Application</a> <a href="#ref-for-agent④⑧">(2)</a>
    <li><a href="#ref-for-agent④⑨">4.1. Overview</a>
    <li><a href="#ref-for-agent⑤⓪">4.2. Data Model</a>
    <li><a href="#ref-for-agent⑤①">4.3. Structure and Validation</a>
    <li><a href="#ref-for-agent⑤②">4.4. Permission Model</a>
    <li><a href="#ref-for-agent⑤③">4.5. Looking up an Application Registration</a> <a href="#ref-for-agent⑤④">(2)</a> <a href="#ref-for-agent⑤⑤">(3)</a> <a href="#ref-for-agent⑤⑥">(4)</a>
    <li><a href="#ref-for-agent⑤⑦">4.6. Registering an Application</a> <a href="#ref-for-agent⑤⑧">(2)</a> <a href="#ref-for-agent⑤⑨">(3)</a> <a href="#ref-for-agent⑥⓪">(4)</a> <a href="#ref-for-agent⑥①">(5)</a> <a href="#ref-for-agent⑥②">(6)</a> <a href="#ref-for-agent⑥③">(7)</a>
    <li><a href="#ref-for-agent⑥④">4.6.1. Creating the application registration entry</a>
    <li><a href="#ref-for-agent⑥⑤">5.1. Overview</a>
    <li><a href="#ref-for-agent⑥⑥">5.2. Data Model</a> <a href="#ref-for-agent⑥⑦">(2)</a>
    <li><a href="#ref-for-agent⑥⑧">5.3. Structure and Validation</a> <a href="#ref-for-agent⑥⑨">(2)</a>
    <li><a href="#ref-for-agent⑦⓪">5.4. Permission Model</a> <a href="#ref-for-agent⑦①">(2)</a> <a href="#ref-for-agent⑦②">(3)</a>
    <li><a href="#ref-for-agent⑦③">5.4.1. Access Scopes for Data Registrations</a> <a href="#ref-for-agent⑦④">(2)</a> <a href="#ref-for-agent⑦⑤">(3)</a>
    <li><a href="#ref-for-agent⑦⑥">5.5.1. Enlisting the help of a trusted agent</a> <a href="#ref-for-agent⑦⑦">(2)</a> <a href="#ref-for-agent⑦⑧">(3)</a> <a href="#ref-for-agent⑦⑨">(4)</a>
    <li><a href="#ref-for-agent⑧⓪">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-agent⑧①">6.1. Overview</a> <a href="#ref-for-agent⑧②">(2)</a> <a href="#ref-for-agent⑧③">(3)</a> <a href="#ref-for-agent⑧④">(4)</a>
    <li><a href="#ref-for-agent⑧⑤">6.2.1. Application Requests Access</a> <a href="#ref-for-agent⑧⑥">(2)</a> <a href="#ref-for-agent⑧⑦">(3)</a>
    <li><a href="#ref-for-agent⑧⑧">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-agent⑧⑨">(2)</a> <a href="#ref-for-agent⑨⓪">(3)</a>
    <li><a href="#ref-for-agent⑨①">6.2.3. Controller Shares Access</a> <a href="#ref-for-agent⑨②">(2)</a> <a href="#ref-for-agent⑨③">(3)</a>
    <li><a href="#ref-for-agent⑨④">6.2.4. Controller Shares Access with Invited Agent</a>
    <li><a href="#ref-for-agent⑨⑤">7.1. Overview</a> <a href="#ref-for-agent⑨⑥">(2)</a> <a href="#ref-for-agent⑨⑦">(3)</a> <a href="#ref-for-agent⑨⑧">(4)</a> <a href="#ref-for-agent⑨⑨">(5)</a>
    <li><a href="#ref-for-agent①⓪⓪">7.2.2. Access Need Group</a> <a href="#ref-for-agent①⓪①">(2)</a> <a href="#ref-for-agent①⓪②">(3)</a> <a href="#ref-for-agent①⓪③">(4)</a>
    <li><a href="#ref-for-agent①⓪④">7.2.4. Compiled Access Group</a> <a href="#ref-for-agent①⓪⑤">(2)</a>
    <li><a href="#ref-for-agent①⓪⑥">7.2.5. Compiled Access</a> <a href="#ref-for-agent①⓪⑦">(2)</a>
    <li><a href="#ref-for-agent①⓪⑧">7.2.6. Access Request</a> <a href="#ref-for-agent①⓪⑨">(2)</a> <a href="#ref-for-agent①①⓪">(3)</a>
    <li><a href="#ref-for-agent①①①">7.2.8.1. Access Need Group Decorator</a>
    <li><a href="#ref-for-agent①①②">7.3. Operations</a>
    <li><a href="#ref-for-agent①①③">7.3.1. Compile Access Need Group</a>
    <li><a href="#ref-for-agent①①④">7.3.1.1. Inputs</a>
    <li><a href="#ref-for-agent①①⑤">7.3.2.1. Inputs</a>
    <li><a href="#ref-for-agent①①⑥">7.3.2.4.1. Inputs</a>
    <li><a href="#ref-for-agent①①⑦">7.3.4.1. Inputs</a>
    <li><a href="#ref-for-agent①①⑧">7.3.5.1. Inputs</a>
    <li><a href="#ref-for-agent①①⑨">7.3.6.1. Inputs</a>
    <li><a href="#ref-for-agent①②⓪">8.2.1. Summary</a> <a href="#ref-for-agent①②①">(2)</a>
    <li><a href="#ref-for-agent①②②">8.2.4. Access Grant</a>
    <li><a href="#ref-for-agent①②③">8.2.5. Access Grant Subject</a> <a href="#ref-for-agent①②④">(2)</a> <a href="#ref-for-agent①②⑤">(3)</a>
    <li><a href="#ref-for-agent①②⑥">8.2.6. Data Grant</a> <a href="#ref-for-agent①②⑦">(2)</a>
    <li><a href="#ref-for-agent①②⑧">8.2.7. Access Invitation</a> <a href="#ref-for-agent①②⑨">(2)</a> <a href="#ref-for-agent①③⓪">(3)</a>
    <li><a href="#ref-for-agent①③①">8.4. Operations</a> <a href="#ref-for-agent①③②">(2)</a>
    <li><a href="#ref-for-agent①③③">8.4.1.1. Inputs</a>
    <li><a href="#ref-for-agent①③④">8.4.10. Present Grant</a> <a href="#ref-for-agent①③⑤">(2)</a>
    <li><a href="#ref-for-agent①③⑥">8.4.10.1. Inputs</a>
    <li><a href="#ref-for-agent①③⑦">8.4.10.2. Operation Details</a> <a href="#ref-for-agent①③⑧">(2)</a> <a href="#ref-for-agent①③⑨">(3)</a>
    <li><a href="#ref-for-agent①④⓪">9.2.1. Summary</a> <a href="#ref-for-agent①④①">(2)</a>
    <li><a href="#ref-for-agent①④②">9.2.4. Access Receipt</a> <a href="#ref-for-agent①④③">(2)</a> <a href="#ref-for-agent①④④">(3)</a>
    <li><a href="#ref-for-agent①④⑤">9.2.5. Data Receipt</a>
    <li><a href="#ref-for-agent①④⑥">9.4.1.1. Inputs</a>
    <li><a href="#ref-for-agent①④⑦">9.4.1.4.1. Inputs</a>
    <li><a href="#ref-for-agent①④⑧">9.4.1.5.1. Inputs</a>
    <li><a href="#ref-for-agent①④⑨">9.4.1.6.1. Inputs</a>
    <li><a href="#ref-for-agent①⑤⓪">9.4.1.6.2. Outputs</a>
    <li><a href="#ref-for-agent①⑤①">9.4.3.1. Inputs</a>
    <li><a href="#ref-for-agent①⑤②">9.4.4. Present Access Receipt</a> <a href="#ref-for-agent①⑤③">(2)</a>
    <li><a href="#ref-for-agent①⑤④">9.4.4.1. Inputs</a>
    <li><a href="#ref-for-agent①⑤⑤">9.4.4.2. Operation Details</a> <a href="#ref-for-agent①⑤⑥">(2)</a> <a href="#ref-for-agent①⑤⑦">(3)</a> <a href="#ref-for-agent①⑤⑧">(4)</a> <a href="#ref-for-agent①⑤⑨">(5)</a> <a href="#ref-for-agent①⑥⓪">(6)</a> <a href="#ref-for-agent①⑥①">(7)</a> <a href="#ref-for-agent①⑥②">(8)</a>
    <li><a href="#ref-for-agent①⑥③">10.2.1. Summary</a> <a href="#ref-for-agent①⑥④">(2)</a>
    <li><a href="#ref-for-agent①⑥⑤">10.2.4. Remote Data Registration</a> <a href="#ref-for-agent①⑥⑥">(2)</a> <a href="#ref-for-agent①⑥⑦">(3)</a> <a href="#ref-for-agent①⑥⑧">(4)</a> <a href="#ref-for-agent①⑥⑨">(5)</a> <a href="#ref-for-agent①⑦⓪">(6)</a> <a href="#ref-for-agent①⑦①">(7)</a>
    <li><a href="#ref-for-agent①⑦②">10.2.5. Remote Data Instance</a> <a href="#ref-for-agent①⑦③">(2)</a> <a href="#ref-for-agent①⑦④">(3)</a> <a href="#ref-for-agent①⑦⑤">(4)</a> <a href="#ref-for-agent①⑦⑥">(5)</a>
    <li><a href="#ref-for-agent①⑦⑦">10.4.2.3. Operation Details</a>
    <li><a href="#ref-for-agent①⑦⑧">10.4.4.3. Operation Details</a>
    <li><a href="#ref-for-agent①⑦⑨">11.1. Overview</a> <a href="#ref-for-agent①⑧⓪">(2)</a> <a href="#ref-for-agent①⑧①">(3)</a>
    <li><a href="#ref-for-agent①⑧②">12. Definitions</a> <a href="#ref-for-agent①⑧③">(2)</a> <a href="#ref-for-agent①⑧④">(3)</a> <a href="#ref-for-agent①⑧⑤">(4)</a> <a href="#ref-for-agent①⑧⑥">(5)</a> <a href="#ref-for-agent①⑧⑦">(6)</a> <a href="#ref-for-agent①⑧⑧">(7)</a> <a href="#ref-for-agent①⑧⑨">(8)</a> <a href="#ref-for-agent①⑨⓪">(9)</a> <a href="#ref-for-agent①⑨①">(10)</a> <a href="#ref-for-agent①⑨②">(11)</a> <a href="#ref-for-agent①⑨③">(12)</a> <a href="#ref-for-agent①⑨④">(13)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application">
   <b><a href="#application">#application</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application">1. Introduction</a> <a href="#ref-for-application①">(2)</a> <a href="#ref-for-application②">(3)</a> <a href="#ref-for-application③">(4)</a> <a href="#ref-for-application④">(5)</a> <a href="#ref-for-application⑤">(6)</a>
    <li><a href="#ref-for-application⑥">2.1. Overview</a> <a href="#ref-for-application⑦">(2)</a> <a href="#ref-for-application⑧">(3)</a> <a href="#ref-for-application⑨">(4)</a> <a href="#ref-for-application①⓪">(5)</a>
    <li><a href="#ref-for-application①①">2.4. Permission Model</a>
    <li><a href="#ref-for-application①②">3.1. Overview</a> <a href="#ref-for-application①③">(2)</a> <a href="#ref-for-application①④">(3)</a> <a href="#ref-for-application①⑤">(4)</a> <a href="#ref-for-application①⑥">(5)</a> <a href="#ref-for-application①⑦">(6)</a>
    <li><a href="#ref-for-application①⑧">3.2.1. Summary</a> <a href="#ref-for-application①⑨">(2)</a> <a href="#ref-for-application②⓪">(3)</a>
    <li><a href="#ref-for-application②①">3.2.2. Application</a> <a href="#ref-for-application②②">(2)</a> <a href="#ref-for-application②③">(3)</a> <a href="#ref-for-application②④">(4)</a> <a href="#ref-for-application②⑤">(5)</a>
    <li><a href="#ref-for-application②⑥">3.3. Resource Hierarchy</a>
    <li><a href="#ref-for-application②⑦">3.4. Permission Model</a> <a href="#ref-for-application②⑧">(2)</a>
    <li><a href="#ref-for-application②⑨">4.1. Overview</a> <a href="#ref-for-application③⓪">(2)</a> <a href="#ref-for-application③①">(3)</a>
    <li><a href="#ref-for-application③②">4.2. Data Model</a>
    <li><a href="#ref-for-application③③">4.3. Structure and Validation</a>
    <li><a href="#ref-for-application③④">4.3.1. Naming application registration resources</a> <a href="#ref-for-application③⑤">(2)</a>
    <li><a href="#ref-for-application③⑥">4.3.2. Use of internal application space</a> <a href="#ref-for-application③⑦">(2)</a> <a href="#ref-for-application③⑧">(3)</a> <a href="#ref-for-application③⑨">(4)</a> <a href="#ref-for-application④⓪">(5)</a> <a href="#ref-for-application④①">(6)</a> <a href="#ref-for-application④②">(7)</a> <a href="#ref-for-application④③">(8)</a> <a href="#ref-for-application④④">(9)</a> <a href="#ref-for-application④⑤">(10)</a>
    <li><a href="#ref-for-application④⑥">4.4. Permission Model</a>
    <li><a href="#ref-for-application④⑦">4.5. Looking up an Application Registration</a> <a href="#ref-for-application④⑧">(2)</a> <a href="#ref-for-application④⑨">(3)</a> <a href="#ref-for-application⑤⓪">(4)</a> <a href="#ref-for-application⑤①">(5)</a> <a href="#ref-for-application⑤②">(6)</a> <a href="#ref-for-application⑤③">(7)</a> <a href="#ref-for-application⑤④">(8)</a> <a href="#ref-for-application⑤⑤">(9)</a> <a href="#ref-for-application⑤⑥">(10)</a> <a href="#ref-for-application⑤⑦">(11)</a>
    <li><a href="#ref-for-application⑤⑧">4.6. Registering an Application</a> <a href="#ref-for-application⑤⑨">(2)</a> <a href="#ref-for-application⑥⓪">(3)</a> <a href="#ref-for-application⑥①">(4)</a> <a href="#ref-for-application⑥②">(5)</a> <a href="#ref-for-application⑥③">(6)</a> <a href="#ref-for-application⑥④">(7)</a> <a href="#ref-for-application⑥⑤">(8)</a> <a href="#ref-for-application⑥⑥">(9)</a> <a href="#ref-for-application⑥⑦">(10)</a>
    <li><a href="#ref-for-application⑥⑧">4.6.1. Creating the application registration entry</a>
    <li><a href="#ref-for-application⑥⑨">5.4.1. Access Scopes for Data Registrations</a>
    <li><a href="#ref-for-application⑦⓪">5.5.1. Enlisting the help of a trusted agent</a> <a href="#ref-for-application⑦①">(2)</a> <a href="#ref-for-application⑦②">(3)</a>
    <li><a href="#ref-for-application⑦③">6.2.1. Application Requests Access</a> <a href="#ref-for-application⑦④">(2)</a> <a href="#ref-for-application⑦⑤">(3)</a> <a href="#ref-for-application⑦⑥">(4)</a>
    <li><a href="#ref-for-application⑦⑦">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-application⑦⑧">(2)</a> <a href="#ref-for-application⑦⑨">(3)</a>
    <li><a href="#ref-for-application⑧⓪">6.2.3. Controller Shares Access</a> <a href="#ref-for-application⑧①">(2)</a> <a href="#ref-for-application⑧②">(3)</a>
    <li><a href="#ref-for-application⑧③">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-application⑧④">(2)</a> <a href="#ref-for-application⑧⑤">(3)</a> <a href="#ref-for-application⑧⑥">(4)</a>
    <li><a href="#ref-for-application⑧⑦">7.1. Overview</a> <a href="#ref-for-application⑧⑧">(2)</a>
    <li><a href="#ref-for-application⑧⑨">7.2.2. Access Need Group</a> <a href="#ref-for-application⑨⓪">(2)</a>
    <li><a href="#ref-for-application⑨①">7.2.4. Compiled Access Group</a>
    <li><a href="#ref-for-application⑨②">8.2.4. Access Grant</a>
    <li><a href="#ref-for-application⑨③">8.2.5. Access Grant Subject</a> <a href="#ref-for-application⑨④">(2)</a>
    <li><a href="#ref-for-application⑨⑤">8.2.7. Access Invitation</a>
    <li><a href="#ref-for-application⑨⑥">8.4.10.2. Operation Details</a>
    <li><a href="#ref-for-application⑨⑦">9.2.4. Access Receipt</a>
    <li><a href="#ref-for-application⑨⑧">9.4.4.2. Operation Details</a>
    <li><a href="#ref-for-application⑨⑨">10.2.4. Remote Data Registration</a>
    <li><a href="#ref-for-application①⓪⓪">10.4.2.3. Operation Details</a>
    <li><a href="#ref-for-application①⓪①">12. Definitions</a> <a href="#ref-for-application①⓪②">(2)</a> <a href="#ref-for-application①⓪③">(3)</a> <a href="#ref-for-application①⓪④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-need-group">
   <b><a href="#access-need-group">#access-need-group</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-need-group">3.2.1. Summary</a>
    <li><a href="#ref-for-access-need-group①">3.2.2. Application</a>
    <li><a href="#ref-for-access-need-group②">6.2.1. Application Requests Access</a> <a href="#ref-for-access-need-group③">(2)</a> <a href="#ref-for-access-need-group④">(3)</a>
    <li><a href="#ref-for-access-need-group⑤">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-access-need-group⑥">(2)</a> <a href="#ref-for-access-need-group⑦">(3)</a> <a href="#ref-for-access-need-group⑧">(4)</a> <a href="#ref-for-access-need-group⑨">(5)</a>
    <li><a href="#ref-for-access-need-group①⓪">6.2.3. Controller Shares Access</a> <a href="#ref-for-access-need-group①①">(2)</a> <a href="#ref-for-access-need-group①②">(3)</a>
    <li><a href="#ref-for-access-need-group①③">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-need-group①④">(2)</a> <a href="#ref-for-access-need-group①⑤">(3)</a>
    <li><a href="#ref-for-access-need-group①⑥">7.1. Overview</a> <a href="#ref-for-access-need-group①⑦">(2)</a> <a href="#ref-for-access-need-group①⑧">(3)</a>
    <li><a href="#ref-for-access-need-group①⑨">7.2.1. Summary</a> <a href="#ref-for-access-need-group②⓪">(2)</a> <a href="#ref-for-access-need-group②①">(3)</a> <a href="#ref-for-access-need-group②②">(4)</a> <a href="#ref-for-access-need-group②③">(5)</a> <a href="#ref-for-access-need-group②④">(6)</a>
    <li><a href="#ref-for-access-need-group②⑤">7.2.2. Access Need Group</a>
    <li><a href="#ref-for-access-need-group②⑥">7.2.3. Access Need</a> <a href="#ref-for-access-need-group②⑦">(2)</a> <a href="#ref-for-access-need-group②⑧">(3)</a>
    <li><a href="#ref-for-access-need-group②⑨">7.2.4. Compiled Access Group</a> <a href="#ref-for-access-need-group③⓪">(2)</a> <a href="#ref-for-access-need-group③①">(3)</a> <a href="#ref-for-access-need-group③②">(4)</a> <a href="#ref-for-access-need-group③③">(5)</a>
    <li><a href="#ref-for-access-need-group③④">7.2.5. Compiled Access</a>
    <li><a href="#ref-for-access-need-group③⑤">7.2.6. Access Request</a> <a href="#ref-for-access-need-group③⑥">(2)</a>
    <li><a href="#ref-for-access-need-group③⑦">7.2.8.1. Access Need Group Decorator</a> <a href="#ref-for-access-need-group③⑧">(2)</a> <a href="#ref-for-access-need-group③⑨">(3)</a> <a href="#ref-for-access-need-group④⓪">(4)</a>
    <li><a href="#ref-for-access-need-group④①">7.2.8.2. Access Need Decorator</a>
    <li><a href="#ref-for-access-need-group④②">7.3. Operations</a>
    <li><a href="#ref-for-access-need-group④③">7.3.1. Compile Access Need Group</a>
    <li><a href="#ref-for-access-need-group④④">7.3.1.1. Inputs</a>
    <li><a href="#ref-for-access-need-group④⑤">7.3.2.5. _getSpecificAccessNeed</a>
    <li><a href="#ref-for-access-need-group④⑥">7.3.5. Get Access Need Group Decorator</a>
    <li><a href="#ref-for-access-need-group④⑦">7.3.5.1. Inputs</a>
    <li><a href="#ref-for-access-need-group④⑧">8.4.1. Initialize Grant</a>
    <li><a href="#ref-for-access-need-group④⑨">8.4.1.1. Inputs</a>
    <li><a href="#ref-for-access-need-group⑤⓪">8.4.1.3. Operation Details</a>
    <li><a href="#ref-for-access-need-group⑤①">8.4.10.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="root-access-need">
   <b><a href="#root-access-need">#root-access-need</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-root-access-need">7.2.1. Summary</a> <a href="#ref-for-root-access-need①">(2)</a> <a href="#ref-for-root-access-need②">(3)</a>
    <li><a href="#ref-for-root-access-need③">7.2.2. Access Need Group</a>
    <li><a href="#ref-for-root-access-need④">7.2.4. Compiled Access Group</a> <a href="#ref-for-root-access-need⑤">(2)</a>
    <li><a href="#ref-for-root-access-need⑥">7.3.1. Compile Access Need Group</a> <a href="#ref-for-root-access-need⑦">(2)</a>
    <li><a href="#ref-for-root-access-need⑧">7.3.1.3. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-need-override">
   <b><a href="#access-need-override">#access-need-override</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-need-override">7.2.1. Summary</a> <a href="#ref-for-access-need-override①">(2)</a>
    <li><a href="#ref-for-access-need-override②">7.2.2. Access Need Group</a>
    <li><a href="#ref-for-access-need-override③">7.2.4. Compiled Access Group</a>
    <li><a href="#ref-for-access-need-override④">7.3.2.5. _getSpecificAccessNeed</a> <a href="#ref-for-access-need-override⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-need">
   <b><a href="#access-need">#access-need</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-need">6.2.1. Application Requests Access</a>
    <li><a href="#ref-for-access-need①">6.2.2. Another Agent Requests Access</a>
    <li><a href="#ref-for-access-need②">7.2.1. Summary</a> <a href="#ref-for-access-need③">(2)</a> <a href="#ref-for-access-need④">(3)</a>
    <li><a href="#ref-for-access-need⑤">7.2.2. Access Need Group</a> <a href="#ref-for-access-need⑥">(2)</a> <a href="#ref-for-access-need⑦">(3)</a>
    <li><a href="#ref-for-access-need⑧">7.2.3. Access Need</a> <a href="#ref-for-access-need⑨">(2)</a> <a href="#ref-for-access-need①⓪">(3)</a> <a href="#ref-for-access-need①①">(4)</a> <a href="#ref-for-access-need①②">(5)</a> <a href="#ref-for-access-need①③">(6)</a> <a href="#ref-for-access-need①④">(7)</a> <a href="#ref-for-access-need①⑤">(8)</a> <a href="#ref-for-access-need①⑥">(9)</a>
    <li><a href="#ref-for-access-need①⑦">7.2.8.2. Access Need Decorator</a>
    <li><a href="#ref-for-access-need①⑧">7.3.1. Compile Access Need Group</a>
    <li><a href="#ref-for-access-need①⑨">7.3.1.3. Operation Details</a> <a href="#ref-for-access-need②⓪">(2)</a>
    <li><a href="#ref-for-access-need②①">7.3.2.1. Inputs</a> <a href="#ref-for-access-need②②">(2)</a> <a href="#ref-for-access-need②③">(3)</a>
    <li><a href="#ref-for-access-need②④">7.3.2.3. Operation Details</a>
    <li><a href="#ref-for-access-need②⑤">7.3.2.4.1. Inputs</a> <a href="#ref-for-access-need②⑥">(2)</a> <a href="#ref-for-access-need②⑦">(3)</a>
    <li><a href="#ref-for-access-need②⑧">7.3.2.4.3. Operation Details</a>
    <li><a href="#ref-for-access-need②⑨">7.3.2.5. _getSpecificAccessNeed</a>
    <li><a href="#ref-for-access-need③⓪">7.3.2.5.1. Inputs</a> <a href="#ref-for-access-need③①">(2)</a>
    <li><a href="#ref-for-access-need③②">7.3.2.5.2. Outputs</a>
    <li><a href="#ref-for-access-need③③">7.3.2.5.3. Operation Details</a>
    <li><a href="#ref-for-access-need③④">7.3.6. Get Access Need Decorator</a>
    <li><a href="#ref-for-access-need③⑤">7.3.6.1. Inputs</a>
    <li><a href="#ref-for-access-need③⑥">8.4.9.3. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compiled-access-group">
   <b><a href="#compiled-access-group">#compiled-access-group</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compiled-access-group">7.1. Overview</a> <a href="#ref-for-compiled-access-group①">(2)</a>
    <li><a href="#ref-for-compiled-access-group②">7.2.1. Summary</a> <a href="#ref-for-compiled-access-group③">(2)</a>
    <li><a href="#ref-for-compiled-access-group④">7.2.4. Compiled Access Group</a> <a href="#ref-for-compiled-access-group⑤">(2)</a>
    <li><a href="#ref-for-compiled-access-group⑥">7.2.5. Compiled Access</a> <a href="#ref-for-compiled-access-group⑦">(2)</a>
    <li><a href="#ref-for-compiled-access-group⑧">7.3.1. Compile Access Need Group</a> <a href="#ref-for-compiled-access-group⑨">(2)</a>
    <li><a href="#ref-for-compiled-access-group①⓪">7.3.1.2. Outputs</a>
    <li><a href="#ref-for-compiled-access-group①①">7.3.1.3. Operation Details</a>
    <li><a href="#ref-for-compiled-access-group①②">7.3.3. Link Supported Compiled Accesses</a>
    <li><a href="#ref-for-compiled-access-group①③">7.3.3.1. Inputs</a>
    <li><a href="#ref-for-compiled-access-group①④">8.2.4. Access Grant</a> <a href="#ref-for-compiled-access-group①⑤">(2)</a>
    <li><a href="#ref-for-compiled-access-group①⑥">8.2.7. Access Invitation</a> <a href="#ref-for-compiled-access-group①⑦">(2)</a>
    <li><a href="#ref-for-compiled-access-group①⑧">8.4.1. Initialize Grant</a>
    <li><a href="#ref-for-compiled-access-group①⑨">8.4.1.3. Operation Details</a> <a href="#ref-for-compiled-access-group②⓪">(2)</a> <a href="#ref-for-compiled-access-group②①">(3)</a>
    <li><a href="#ref-for-compiled-access-group②②">8.4.4.3. Operation Details</a> <a href="#ref-for-compiled-access-group②③">(2)</a>
    <li><a href="#ref-for-compiled-access-group②④">8.4.9.1. Inputs</a>
    <li><a href="#ref-for-compiled-access-group②⑤">8.4.10.2. Operation Details</a>
    <li><a href="#ref-for-compiled-access-group②⑥">8.4.11. Deny Compiled Access Group</a>
    <li><a href="#ref-for-compiled-access-group②⑦">8.4.11.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="root-compiled-access">
   <b><a href="#root-compiled-access">#root-compiled-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-root-compiled-access">7.2.1. Summary</a> <a href="#ref-for-root-compiled-access①">(2)</a>
    <li><a href="#ref-for-root-compiled-access②">7.2.4. Compiled Access Group</a>
    <li><a href="#ref-for-root-compiled-access③">7.3.1.3. Operation Details</a> <a href="#ref-for-root-compiled-access④">(2)</a>
    <li><a href="#ref-for-root-compiled-access⑤">8.4.10.2. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="compiled-access">
   <b><a href="#compiled-access">#compiled-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-compiled-access">7.1. Overview</a>
    <li><a href="#ref-for-compiled-access①">7.2.1. Summary</a> <a href="#ref-for-compiled-access②">(2)</a> <a href="#ref-for-compiled-access③">(3)</a> <a href="#ref-for-compiled-access④">(4)</a>
    <li><a href="#ref-for-compiled-access⑤">7.2.2. Access Need Group</a>
    <li><a href="#ref-for-compiled-access⑥">7.2.4. Compiled Access Group</a>
    <li><a href="#ref-for-compiled-access⑦">7.2.5. Compiled Access</a> <a href="#ref-for-compiled-access⑧">(2)</a> <a href="#ref-for-compiled-access⑨">(3)</a> <a href="#ref-for-compiled-access①⓪">(4)</a> <a href="#ref-for-compiled-access①①">(5)</a> <a href="#ref-for-compiled-access①②">(6)</a> <a href="#ref-for-compiled-access①③">(7)</a> <a href="#ref-for-compiled-access①④">(8)</a> <a href="#ref-for-compiled-access①⑤">(9)</a> <a href="#ref-for-compiled-access①⑥">(10)</a> <a href="#ref-for-compiled-access①⑦">(11)</a>
    <li><a href="#ref-for-compiled-access①⑧">7.3.1. Compile Access Need Group</a> <a href="#ref-for-compiled-access①⑨">(2)</a> <a href="#ref-for-compiled-access②⓪">(3)</a>
    <li><a href="#ref-for-compiled-access②①">7.3.1.2. Outputs</a>
    <li><a href="#ref-for-compiled-access②②">7.3.1.3. Operation Details</a> <a href="#ref-for-compiled-access②③">(2)</a>
    <li><a href="#ref-for-compiled-access②④">7.3.2. Compile Access Need</a>
    <li><a href="#ref-for-compiled-access②⑤">7.3.2.2. Outputs</a> <a href="#ref-for-compiled-access②⑥">(2)</a>
    <li><a href="#ref-for-compiled-access②⑦">7.3.2.3. Operation Details</a>
    <li><a href="#ref-for-compiled-access②⑧">7.3.2.4. _walkDecorators</a>
    <li><a href="#ref-for-compiled-access②⑨">7.3.2.4.2. Outputs</a> <a href="#ref-for-compiled-access③⓪">(2)</a>
    <li><a href="#ref-for-compiled-access③①">7.3.2.4.3. Operation Details</a> <a href="#ref-for-compiled-access③②">(2)</a>
    <li><a href="#ref-for-compiled-access③③">7.3.3. Link Supported Compiled Accesses</a> <a href="#ref-for-compiled-access③④">(2)</a> <a href="#ref-for-compiled-access③⑤">(3)</a>
    <li><a href="#ref-for-compiled-access③⑥">7.3.3.1. Inputs</a> <a href="#ref-for-compiled-access③⑦">(2)</a>
    <li><a href="#ref-for-compiled-access③⑧">7.3.3.3. Operation Details</a> <a href="#ref-for-compiled-access③⑨">(2)</a> <a href="#ref-for-compiled-access④⓪">(3)</a>
    <li><a href="#ref-for-compiled-access④①">7.3.3.4. Iterate for Supported Compiled Accesses</a> <a href="#ref-for-compiled-access④②">(2)</a>
    <li><a href="#ref-for-compiled-access④③">7.3.3.4.1. Inputs</a>
    <li><a href="#ref-for-compiled-access④④">7.3.3.4.2. Outputs</a>
    <li><a href="#ref-for-compiled-access④⑤">7.3.3.4.3. Operation Details</a> <a href="#ref-for-compiled-access④⑥">(2)</a>
    <li><a href="#ref-for-compiled-access④⑦">8.2.6. Data Grant</a> <a href="#ref-for-compiled-access④⑧">(2)</a> <a href="#ref-for-compiled-access④⑨">(3)</a>
    <li><a href="#ref-for-compiled-access⑤⓪">8.4.1. Initialize Grant</a>
    <li><a href="#ref-for-compiled-access⑤①">8.4.1.3. Operation Details</a>
    <li><a href="#ref-for-compiled-access⑤②">8.4.4.3. Operation Details</a> <a href="#ref-for-compiled-access⑤③">(2)</a> <a href="#ref-for-compiled-access⑤④">(3)</a>
    <li><a href="#ref-for-compiled-access⑤⑤">8.4.10.2. Operation Details</a> <a href="#ref-for-compiled-access⑤⑥">(2)</a>
    <li><a href="#ref-for-compiled-access⑤⑦">8.4.11.2. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-request">
   <b><a href="#access-request">#access-request</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-request">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-access-request①">(2)</a> <a href="#ref-for-access-request②">(3)</a>
    <li><a href="#ref-for-access-request③">7.2.1. Summary</a>
    <li><a href="#ref-for-access-request④">7.2.6. Access Request</a> <a href="#ref-for-access-request⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-decorator-index">
   <b><a href="#access-decorator-index">#access-decorator-index</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-decorator-index">7.2.1. Summary</a> <a href="#ref-for-access-decorator-index①">(2)</a>
    <li><a href="#ref-for-access-decorator-index②">7.3.4. Get Access Decorator Resource</a>
    <li><a href="#ref-for-access-decorator-index③">7.3.4.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-decorator-series">
   <b><a href="#access-decorator-series">#access-decorator-series</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-decorator-series">7.2.1. Summary</a> <a href="#ref-for-access-decorator-series①">(2)</a>
    <li><a href="#ref-for-access-decorator-series②">7.2.7. Access Decorator Index</a> <a href="#ref-for-access-decorator-series③">(2)</a>
    <li><a href="#ref-for-access-decorator-series④">7.2.7.1. Access Decorator Series</a>
    <li><a href="#ref-for-access-decorator-series⑤">7.3.4.3. Operation Details</a> <a href="#ref-for-access-decorator-series⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-decorator-version">
   <b><a href="#access-decorator-version">#access-decorator-version</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-decorator-version">7.2.1. Summary</a>
    <li><a href="#ref-for-access-decorator-version①">7.2.7.1. Access Decorator Series</a> <a href="#ref-for-access-decorator-version②">(2)</a>
    <li><a href="#ref-for-access-decorator-version③">7.3.4.3. Operation Details</a> <a href="#ref-for-access-decorator-version④">(2)</a> <a href="#ref-for-access-decorator-version⑤">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-decorator-resource">
   <b><a href="#access-decorator-resource">#access-decorator-resource</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-decorator-resource">7.2.1. Summary</a> <a href="#ref-for-access-decorator-resource①">(2)</a>
    <li><a href="#ref-for-access-decorator-resource②">7.2.7.2. Access Decorator Version</a> <a href="#ref-for-access-decorator-resource③">(2)</a> <a href="#ref-for-access-decorator-resource④">(3)</a> <a href="#ref-for-access-decorator-resource⑤">(4)</a>
    <li><a href="#ref-for-access-decorator-resource⑥">7.3.4. Get Access Decorator Resource</a>
    <li><a href="#ref-for-access-decorator-resource⑦">7.3.4.2. Outputs</a>
    <li><a href="#ref-for-access-decorator-resource⑧">7.3.4.3. Operation Details</a>
    <li><a href="#ref-for-access-decorator-resource⑨">7.3.5.3. Operation Details</a>
    <li><a href="#ref-for-access-decorator-resource①⓪">7.3.6.3. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-need-group-decorator">
   <b><a href="#access-need-group-decorator">#access-need-group-decorator</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-need-group-decorator">7.2.1. Summary</a>
    <li><a href="#ref-for-access-need-group-decorator①">7.2.4. Compiled Access Group</a> <a href="#ref-for-access-need-group-decorator②">(2)</a>
    <li><a href="#ref-for-access-need-group-decorator③">7.2.8. Access Decorator Resource</a>
    <li><a href="#ref-for-access-need-group-decorator④">7.3.1.3. Operation Details</a>
    <li><a href="#ref-for-access-need-group-decorator⑤">7.3.5. Get Access Need Group Decorator</a>
    <li><a href="#ref-for-access-need-group-decorator⑥">7.3.5.2. Outputs</a>
    <li><a href="#ref-for-access-need-group-decorator⑦">7.3.5.3. Operation Details</a>
    <li><a href="#ref-for-access-need-group-decorator⑧">8.4.10.2. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-need-decorator">
   <b><a href="#access-need-decorator">#access-need-decorator</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-need-decorator">7.2.3. Access Need</a>
    <li><a href="#ref-for-access-need-decorator①">7.2.8. Access Decorator Resource</a>
    <li><a href="#ref-for-access-need-decorator②">7.3.1.3. Operation Details</a>
    <li><a href="#ref-for-access-need-decorator③">7.3.2.1. Inputs</a>
    <li><a href="#ref-for-access-need-decorator④">7.3.2.4.1. Inputs</a>
    <li><a href="#ref-for-access-need-decorator⑤">7.3.2.4.3. Operation Details</a>
    <li><a href="#ref-for-access-need-decorator⑥">7.3.6. Get Access Need Decorator</a>
    <li><a href="#ref-for-access-need-decorator⑦">7.3.6.2. Outputs</a>
    <li><a href="#ref-for-access-need-decorator⑧">7.3.6.3. Operation Details</a>
    <li><a href="#ref-for-access-need-decorator⑨">8.4.10.2. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-grant-registry-set">
   <b><a href="#access-grant-registry-set">#access-grant-registry-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-grant-registry-set">2.2.2. Agent</a>
    <li><a href="#ref-for-access-grant-registry-set①">8.2.1. Summary</a> <a href="#ref-for-access-grant-registry-set②">(2)</a> <a href="#ref-for-access-grant-registry-set③">(3)</a> <a href="#ref-for-access-grant-registry-set④">(4)</a>
    <li><a href="#ref-for-access-grant-registry-set⑤">8.3. Resource Hierarchy</a> <a href="#ref-for-access-grant-registry-set⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-grant-registry">
   <b><a href="#access-grant-registry">#access-grant-registry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-grant-registry">6.2.1. Application Requests Access</a>
    <li><a href="#ref-for-access-grant-registry①">6.2.2. Another Agent Requests Access</a>
    <li><a href="#ref-for-access-grant-registry②">6.2.3. Controller Shares Access</a>
    <li><a href="#ref-for-access-grant-registry③">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-grant-registry④">(2)</a>
    <li><a href="#ref-for-access-grant-registry⑤">8.2.1. Summary</a> <a href="#ref-for-access-grant-registry⑥">(2)</a> <a href="#ref-for-access-grant-registry⑦">(3)</a> <a href="#ref-for-access-grant-registry⑧">(4)</a>
    <li><a href="#ref-for-access-grant-registry⑨">8.2.2. Access Grant Registry Set</a> <a href="#ref-for-access-grant-registry①⓪">(2)</a>
    <li><a href="#ref-for-access-grant-registry①①">8.3. Resource Hierarchy</a> <a href="#ref-for-access-grant-registry①②">(2)</a>
    <li><a href="#ref-for-access-grant-registry①③">8.4. Operations</a> <a href="#ref-for-access-grant-registry①④">(2)</a> <a href="#ref-for-access-grant-registry①⑤">(3)</a> <a href="#ref-for-access-grant-registry①⑥">(4)</a>
    <li><a href="#ref-for-access-grant-registry①⑦">8.4.2. Load Grant</a>
    <li><a href="#ref-for-access-grant-registry①⑧">8.4.2.1. Inputs</a>
    <li><a href="#ref-for-access-grant-registry①⑨">8.4.3. Load Invitation</a>
    <li><a href="#ref-for-access-grant-registry②⓪">8.4.3.1. Inputs</a>
    <li><a href="#ref-for-access-grant-registry②①">8.4.4. Validate Grant</a>
    <li><a href="#ref-for-access-grant-registry②②">8.4.5. Record Grant</a>
    <li><a href="#ref-for-access-grant-registry②③">8.4.5.1. Inputs</a>
    <li><a href="#ref-for-access-grant-registry②④">8.4.6. Record Invitation</a>
    <li><a href="#ref-for-access-grant-registry②⑤">8.4.6.1. Inputs</a>
    <li><a href="#ref-for-access-grant-registry②⑥">8.4.10.1. Inputs</a>
    <li><a href="#ref-for-access-grant-registry②⑦">9.4.2. Record Access Receipt</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-grant">
   <b><a href="#access-grant">#access-grant</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-grant">6.1. Overview</a>
    <li><a href="#ref-for-access-grant①">6.2.1. Application Requests Access</a> <a href="#ref-for-access-grant②">(2)</a>
    <li><a href="#ref-for-access-grant③">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-access-grant④">(2)</a>
    <li><a href="#ref-for-access-grant⑤">6.2.3. Controller Shares Access</a> <a href="#ref-for-access-grant⑥">(2)</a>
    <li><a href="#ref-for-access-grant⑦">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-grant⑧">(2)</a> <a href="#ref-for-access-grant⑨">(3)</a> <a href="#ref-for-access-grant①⓪">(4)</a>
    <li><a href="#ref-for-access-grant①①">7.1. Overview</a>
    <li><a href="#ref-for-access-grant①②">7.2.5. Compiled Access</a>
    <li><a href="#ref-for-access-grant①③">8.2.1. Summary</a> <a href="#ref-for-access-grant①④">(2)</a> <a href="#ref-for-access-grant①⑤">(3)</a>
    <li><a href="#ref-for-access-grant①⑥">8.2.3. Access Grant Registry</a> <a href="#ref-for-access-grant①⑦">(2)</a>
    <li><a href="#ref-for-access-grant①⑧">8.2.4. Access Grant</a> <a href="#ref-for-access-grant①⑨">(2)</a> <a href="#ref-for-access-grant②⓪">(3)</a> <a href="#ref-for-access-grant②①">(4)</a> <a href="#ref-for-access-grant②②">(5)</a>
    <li><a href="#ref-for-access-grant②③">8.2.7. Access Invitation</a> <a href="#ref-for-access-grant②④">(2)</a> <a href="#ref-for-access-grant②⑤">(3)</a>
    <li><a href="#ref-for-access-grant②⑥">8.3. Resource Hierarchy</a>
    <li><a href="#ref-for-access-grant②⑦">8.4. Operations</a> <a href="#ref-for-access-grant②⑧">(2)</a> <a href="#ref-for-access-grant②⑨">(3)</a> <a href="#ref-for-access-grant③⓪">(4)</a> <a href="#ref-for-access-grant③①">(5)</a>
    <li><a href="#ref-for-access-grant③②">8.4.1. Initialize Grant</a>
    <li><a href="#ref-for-access-grant③③">8.4.1.1. Inputs</a>
    <li><a href="#ref-for-access-grant③④">8.4.1.2. Outputs</a>
    <li><a href="#ref-for-access-grant③⑤">8.4.1.3. Operation Details</a>
    <li><a href="#ref-for-access-grant③⑥">8.4.2. Load Grant</a>
    <li><a href="#ref-for-access-grant③⑦">8.4.2.2. Outputs</a>
    <li><a href="#ref-for-access-grant③⑧">8.4.2.3. Operation Details</a>
    <li><a href="#ref-for-access-grant③⑨">8.4.4. Validate Grant</a>
    <li><a href="#ref-for-access-grant④⓪">8.4.4.1. Inputs</a>
    <li><a href="#ref-for-access-grant④①">8.4.4.3. Operation Details</a>
    <li><a href="#ref-for-access-grant④②">8.4.5. Record Grant</a>
    <li><a href="#ref-for-access-grant④③">8.4.5.1. Inputs</a>
    <li><a href="#ref-for-access-grant④④">8.4.5.2. Outputs</a>
    <li><a href="#ref-for-access-grant④⑤">8.4.9.1. Inputs</a>
    <li><a href="#ref-for-access-grant④⑥">8.4.9.2. Outputs</a>
    <li><a href="#ref-for-access-grant④⑦">8.4.10. Present Grant</a>
    <li><a href="#ref-for-access-grant④⑧">8.4.10.2. Operation Details</a> <a href="#ref-for-access-grant④⑨">(2)</a> <a href="#ref-for-access-grant⑤⓪">(3)</a>
    <li><a href="#ref-for-access-grant⑤①">8.4.11.1. Inputs</a>
    <li><a href="#ref-for-access-grant⑤②">9.4.1.1. Inputs</a>
    <li><a href="#ref-for-access-grant⑤③">9.4.1.4.1. Inputs</a>
    <li><a href="#ref-for-access-grant⑤④">9.4.1.6.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-grant-subject">
   <b><a href="#access-grant-subject">#access-grant-subject</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-grant-subject">8.2.4. Access Grant</a> <a href="#ref-for-access-grant-subject①">(2)</a>
    <li><a href="#ref-for-access-grant-subject②">8.2.7. Access Invitation</a>
    <li><a href="#ref-for-access-grant-subject③">8.4. Operations</a>
    <li><a href="#ref-for-access-grant-subject④">8.4.1.1. Inputs</a>
    <li><a href="#ref-for-access-grant-subject⑤">8.4.2.1. Inputs</a>
    <li><a href="#ref-for-access-grant-subject⑥">8.4.10.1. Inputs</a>
    <li><a href="#ref-for-access-grant-subject⑦">8.4.10.2. Operation Details</a>
    <li><a href="#ref-for-access-grant-subject⑧">9.4.1.3. Operation Details</a>
    <li><a href="#ref-for-access-grant-subject⑨">9.4.1.4.3. Operation Details</a>
    <li><a href="#ref-for-access-grant-subject①⓪">9.4.1.6.3. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="data-grant">
   <b><a href="#data-grant">#data-grant</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-data-grant">7.2.5. Compiled Access</a>
    <li><a href="#ref-for-data-grant①">8.2.4. Access Grant</a> <a href="#ref-for-data-grant②">(2)</a>
    <li><a href="#ref-for-data-grant③">8.2.6. Data Grant</a> <a href="#ref-for-data-grant④">(2)</a> <a href="#ref-for-data-grant⑤">(3)</a> <a href="#ref-for-data-grant⑥">(4)</a> <a href="#ref-for-data-grant⑦">(5)</a>
    <li><a href="#ref-for-data-grant⑧">8.2.7. Access Invitation</a> <a href="#ref-for-data-grant⑨">(2)</a>
    <li><a href="#ref-for-data-grant①⓪">8.4. Operations</a>
    <li><a href="#ref-for-data-grant①①">8.4.1. Initialize Grant</a>
    <li><a href="#ref-for-data-grant①②">8.4.1.3. Operation Details</a> <a href="#ref-for-data-grant①③">(2)</a> <a href="#ref-for-data-grant①④">(3)</a>
    <li><a href="#ref-for-data-grant①⑤">8.4.4.3. Operation Details</a> <a href="#ref-for-data-grant①⑥">(2)</a> <a href="#ref-for-data-grant①⑦">(3)</a>
    <li><a href="#ref-for-data-grant①⑧">8.4.9.1. Inputs</a>
    <li><a href="#ref-for-data-grant①⑨">8.4.9.3. Operation Details</a> <a href="#ref-for-data-grant②⓪">(2)</a> <a href="#ref-for-data-grant②①">(3)</a>
    <li><a href="#ref-for-data-grant②②">8.4.10. Present Grant</a>
    <li><a href="#ref-for-data-grant②③">8.4.10.2. Operation Details</a>
    <li><a href="#ref-for-data-grant②④">8.4.12. Select Specific Instances for Access</a> <a href="#ref-for-data-grant②⑤">(2)</a>
    <li><a href="#ref-for-data-grant②⑥">8.4.13. Select All Instances for Access</a>
    <li><a href="#ref-for-data-grant②⑦">9.2.5. Data Receipt</a>
    <li><a href="#ref-for-data-grant②⑧">9.4.1.4.3. Operation Details</a>
    <li><a href="#ref-for-data-grant②⑨">9.4.1.5.1. Inputs</a>
    <li><a href="#ref-for-data-grant③⓪">9.4.1.6.3. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-invitation">
   <b><a href="#access-invitation">#access-invitation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-invitation">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-invitation①">(2)</a> <a href="#ref-for-access-invitation②">(3)</a> <a href="#ref-for-access-invitation③">(4)</a> <a href="#ref-for-access-invitation④">(5)</a>
    <li><a href="#ref-for-access-invitation⑤">8.2.1. Summary</a> <a href="#ref-for-access-invitation⑥">(2)</a> <a href="#ref-for-access-invitation⑦">(3)</a>
    <li><a href="#ref-for-access-invitation⑧">8.2.7. Access Invitation</a> <a href="#ref-for-access-invitation⑨">(2)</a> <a href="#ref-for-access-invitation①⓪">(3)</a> <a href="#ref-for-access-invitation①①">(4)</a> <a href="#ref-for-access-invitation①②">(5)</a> <a href="#ref-for-access-invitation①③">(6)</a> <a href="#ref-for-access-invitation①④">(7)</a> <a href="#ref-for-access-invitation①⑤">(8)</a> <a href="#ref-for-access-invitation①⑥">(9)</a>
    <li><a href="#ref-for-access-invitation①⑦">8.2.8. Access Invitation Channel</a>
    <li><a href="#ref-for-access-invitation①⑧">8.4. Operations</a> <a href="#ref-for-access-invitation①⑨">(2)</a> <a href="#ref-for-access-invitation②⓪">(3)</a>
    <li><a href="#ref-for-access-invitation②①">8.4.1. Initialize Grant</a>
    <li><a href="#ref-for-access-invitation②②">8.4.1.2. Outputs</a>
    <li><a href="#ref-for-access-invitation②③">8.4.1.3. Operation Details</a>
    <li><a href="#ref-for-access-invitation②④">8.4.3. Load Invitation</a>
    <li><a href="#ref-for-access-invitation②⑤">8.4.3.2. Outputs</a>
    <li><a href="#ref-for-access-invitation②⑥">8.4.3.3. Operation Details</a> <a href="#ref-for-access-invitation②⑦">(2)</a>
    <li><a href="#ref-for-access-invitation②⑧">8.4.4. Validate Grant</a>
    <li><a href="#ref-for-access-invitation②⑨">8.4.4.1. Inputs</a>
    <li><a href="#ref-for-access-invitation③⓪">8.4.4.3. Operation Details</a>
    <li><a href="#ref-for-access-invitation③①">8.4.6. Record Invitation</a>
    <li><a href="#ref-for-access-invitation③②">8.4.6.1. Inputs</a>
    <li><a href="#ref-for-access-invitation③③">8.4.6.2. Outputs</a>
    <li><a href="#ref-for-access-invitation③④">8.4.10. Present Grant</a>
    <li><a href="#ref-for-access-invitation③⑤">8.4.10.1. Inputs</a> <a href="#ref-for-access-invitation③⑥">(2)</a>
    <li><a href="#ref-for-access-invitation③⑦">8.4.10.2. Operation Details</a> <a href="#ref-for-access-invitation③⑧">(2)</a> <a href="#ref-for-access-invitation③⑨">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-invitation-channel">
   <b><a href="#access-invitation-channel">#access-invitation-channel</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-invitation-channel">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-invitation-channel①">(2)</a> <a href="#ref-for-access-invitation-channel②">(3)</a> <a href="#ref-for-access-invitation-channel③">(4)</a> <a href="#ref-for-access-invitation-channel④">(5)</a> <a href="#ref-for-access-invitation-channel⑤">(6)</a>
    <li><a href="#ref-for-access-invitation-channel⑥">8.2.7. Access Invitation</a> <a href="#ref-for-access-invitation-channel⑦">(2)</a>
    <li><a href="#ref-for-access-invitation-channel⑧">8.4. Operations</a>
    <li><a href="#ref-for-access-invitation-channel⑨">8.4.1.1. Inputs</a>
    <li><a href="#ref-for-access-invitation-channel①⓪">8.4.1.3. Operation Details</a>
    <li><a href="#ref-for-access-invitation-channel①①">8.4.3.3. Operation Details</a>
    <li><a href="#ref-for-access-invitation-channel①②">8.4.10.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-receipt-registry-set">
   <b><a href="#access-receipt-registry-set">#access-receipt-registry-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-receipt-registry-set">2.2.2. Agent</a>
    <li><a href="#ref-for-access-receipt-registry-set①">9.2.1. Summary</a> <a href="#ref-for-access-receipt-registry-set②">(2)</a> <a href="#ref-for-access-receipt-registry-set③">(3)</a> <a href="#ref-for-access-receipt-registry-set④">(4)</a>
    <li><a href="#ref-for-access-receipt-registry-set⑤">9.3. Resource Hierarchy</a> <a href="#ref-for-access-receipt-registry-set⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-receipt-registry">
   <b><a href="#access-receipt-registry">#access-receipt-registry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-receipt-registry">6.2.2. Another Agent Requests Access</a>
    <li><a href="#ref-for-access-receipt-registry①">6.2.3. Controller Shares Access</a>
    <li><a href="#ref-for-access-receipt-registry②">9.2.1. Summary</a> <a href="#ref-for-access-receipt-registry③">(2)</a> <a href="#ref-for-access-receipt-registry④">(3)</a> <a href="#ref-for-access-receipt-registry⑤">(4)</a> <a href="#ref-for-access-receipt-registry⑥">(5)</a>
    <li><a href="#ref-for-access-receipt-registry⑦">9.2.2. Access Receipt Registry Set</a> <a href="#ref-for-access-receipt-registry⑧">(2)</a>
    <li><a href="#ref-for-access-receipt-registry⑨">9.3. Resource Hierarchy</a> <a href="#ref-for-access-receipt-registry①⓪">(2)</a>
    <li><a href="#ref-for-access-receipt-registry①①">9.4.2.1. Inputs</a>
    <li><a href="#ref-for-access-receipt-registry①②">9.4.3.1. Inputs</a>
    <li><a href="#ref-for-access-receipt-registry①③">9.4.4. Present Access Receipt</a>
    <li><a href="#ref-for-access-receipt-registry①④">9.4.4.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-receipt">
   <b><a href="#access-receipt">#access-receipt</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-receipt">6.2.1. Application Requests Access</a> <a href="#ref-for-access-receipt①">(2)</a>
    <li><a href="#ref-for-access-receipt②">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-access-receipt③">(2)</a> <a href="#ref-for-access-receipt④">(3)</a> <a href="#ref-for-access-receipt⑤">(4)</a> <a href="#ref-for-access-receipt⑥">(5)</a> <a href="#ref-for-access-receipt⑦">(6)</a> <a href="#ref-for-access-receipt⑧">(7)</a>
    <li><a href="#ref-for-access-receipt⑨">6.2.3. Controller Shares Access</a> <a href="#ref-for-access-receipt①⓪">(2)</a> <a href="#ref-for-access-receipt①①">(3)</a> <a href="#ref-for-access-receipt①②">(4)</a> <a href="#ref-for-access-receipt①③">(5)</a> <a href="#ref-for-access-receipt①④">(6)</a> <a href="#ref-for-access-receipt①⑤">(7)</a>
    <li><a href="#ref-for-access-receipt①⑥">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-access-receipt①⑦">(2)</a>
    <li><a href="#ref-for-access-receipt①⑧">8.4.5.2. Outputs</a>
    <li><a href="#ref-for-access-receipt①⑨">9.2.1. Summary</a> <a href="#ref-for-access-receipt②⓪">(2)</a> <a href="#ref-for-access-receipt②①">(3)</a>
    <li><a href="#ref-for-access-receipt②②">9.2.3. Access Receipt Registry</a> <a href="#ref-for-access-receipt②③">(2)</a>
    <li><a href="#ref-for-access-receipt②④">9.2.4. Access Receipt</a> <a href="#ref-for-access-receipt②⑤">(2)</a> <a href="#ref-for-access-receipt②⑥">(3)</a> <a href="#ref-for-access-receipt②⑦">(4)</a> <a href="#ref-for-access-receipt②⑧">(5)</a> <a href="#ref-for-access-receipt②⑨">(6)</a> <a href="#ref-for-access-receipt③⓪">(7)</a>
    <li><a href="#ref-for-access-receipt③①">9.3. Resource Hierarchy</a>
    <li><a href="#ref-for-access-receipt③②">9.4.1.2. Outputs</a>
    <li><a href="#ref-for-access-receipt③③">9.4.1.3. Operation Details</a>
    <li><a href="#ref-for-access-receipt③④">9.4.1.4.2. Outputs</a>
    <li><a href="#ref-for-access-receipt③⑤">9.4.1.4.3. Operation Details</a>
    <li><a href="#ref-for-access-receipt③⑥">9.4.1.6.2. Outputs</a>
    <li><a href="#ref-for-access-receipt③⑦">9.4.1.6.3. Operation Details</a>
    <li><a href="#ref-for-access-receipt③⑧">9.4.2. Record Access Receipt</a> <a href="#ref-for-access-receipt③⑨">(2)</a>
    <li><a href="#ref-for-access-receipt④⓪">9.4.2.1. Inputs</a>
    <li><a href="#ref-for-access-receipt④①">9.4.2.2. Outputs</a> <a href="#ref-for-access-receipt④②">(2)</a>
    <li><a href="#ref-for-access-receipt④③">9.4.2.3. Operation Details</a>
    <li><a href="#ref-for-access-receipt④④">9.4.3.2. Outputs</a>
    <li><a href="#ref-for-access-receipt④⑤">9.4.3.3. Operation Details</a>
    <li><a href="#ref-for-access-receipt④⑥">9.4.4. Present Access Receipt</a>
    <li><a href="#ref-for-access-receipt④⑦">9.4.4.1. Inputs</a>
    <li><a href="#ref-for-access-receipt④⑧">9.4.4.2. Operation Details</a> <a href="#ref-for-access-receipt④⑨">(2)</a> <a href="#ref-for-access-receipt⑤⓪">(3)</a>
    <li><a href="#ref-for-access-receipt⑤①">10.2.4. Remote Data Registration</a> <a href="#ref-for-access-receipt⑤②">(2)</a>
    <li><a href="#ref-for-access-receipt⑤③">10.2.5. Remote Data Instance</a> <a href="#ref-for-access-receipt⑤④">(2)</a>
    <li><a href="#ref-for-access-receipt⑤⑤">10.4.1.1. Inputs</a>
    <li><a href="#ref-for-access-receipt⑤⑥">10.4.1.2. Outputs</a>
    <li><a href="#ref-for-access-receipt⑤⑦">10.4.2.1. Inputs</a>
    <li><a href="#ref-for-access-receipt⑤⑧">10.4.3.1. Inputs</a>
    <li><a href="#ref-for-access-receipt⑤⑨">10.4.4.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="data-receipt">
   <b><a href="#data-receipt">#data-receipt</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-data-receipt">9.2.4. Access Receipt</a>
    <li><a href="#ref-for-data-receipt①">9.2.5. Data Receipt</a> <a href="#ref-for-data-receipt②">(2)</a> <a href="#ref-for-data-receipt③">(3)</a> <a href="#ref-for-data-receipt④">(4)</a>
    <li><a href="#ref-for-data-receipt⑤">9.4.1.5.2. Outputs</a>
    <li><a href="#ref-for-data-receipt⑥">9.4.1.5.3. Operation Details</a>
    <li><a href="#ref-for-data-receipt⑦">9.4.4.2. Operation Details</a> <a href="#ref-for-data-receipt⑧">(2)</a> <a href="#ref-for-data-receipt⑨">(3)</a> <a href="#ref-for-data-receipt①⓪">(4)</a> <a href="#ref-for-data-receipt①①">(5)</a>
    <li><a href="#ref-for-data-receipt①②">10.2.4. Remote Data Registration</a> <a href="#ref-for-data-receipt①③">(2)</a> <a href="#ref-for-data-receipt①④">(3)</a> <a href="#ref-for-data-receipt①⑤">(4)</a>
    <li><a href="#ref-for-data-receipt①⑥">10.2.5. Remote Data Instance</a> <a href="#ref-for-data-receipt①⑦">(2)</a> <a href="#ref-for-data-receipt①⑧">(3)</a>
    <li><a href="#ref-for-data-receipt①⑨">10.4.1.3. Operation Details</a>
    <li><a href="#ref-for-data-receipt②⓪">10.4.2.1. Inputs</a>
    <li><a href="#ref-for-data-receipt②①">10.4.3.1. Inputs</a>
    <li><a href="#ref-for-data-receipt②②">10.4.4.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="remote-data-registry-set">
   <b><a href="#remote-data-registry-set">#remote-data-registry-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remote-data-registry-set">2.2.2. Agent</a>
    <li><a href="#ref-for-remote-data-registry-set①">10.2.1. Summary</a> <a href="#ref-for-remote-data-registry-set②">(2)</a> <a href="#ref-for-remote-data-registry-set③">(3)</a> <a href="#ref-for-remote-data-registry-set④">(4)</a>
    <li><a href="#ref-for-remote-data-registry-set⑤">10.3. Resource Hierarchy</a> <a href="#ref-for-remote-data-registry-set⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="remote-data-registry">
   <b><a href="#remote-data-registry">#remote-data-registry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remote-data-registry">6.2.2. Another Agent Requests Access</a>
    <li><a href="#ref-for-remote-data-registry①">6.2.3. Controller Shares Access</a>
    <li><a href="#ref-for-remote-data-registry②">9.4.2. Record Access Receipt</a>
    <li><a href="#ref-for-remote-data-registry③">9.4.4. Present Access Receipt</a>
    <li><a href="#ref-for-remote-data-registry④">10.2.1. Summary</a> <a href="#ref-for-remote-data-registry⑤">(2)</a> <a href="#ref-for-remote-data-registry⑥">(3)</a> <a href="#ref-for-remote-data-registry⑦">(4)</a> <a href="#ref-for-remote-data-registry⑧">(5)</a>
    <li><a href="#ref-for-remote-data-registry⑨">10.2.2. Remote Data Registry Set</a> <a href="#ref-for-remote-data-registry①⓪">(2)</a>
    <li><a href="#ref-for-remote-data-registry①①">10.3. Resource Hierarchy</a> <a href="#ref-for-remote-data-registry①②">(2)</a>
    <li><a href="#ref-for-remote-data-registry①③">10.4.1.1. Inputs</a>
    <li><a href="#ref-for-remote-data-registry①④">10.4.2.1. Inputs</a>
    <li><a href="#ref-for-remote-data-registry①⑤">10.4.5.1. Inputs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="remote-data-registration">
   <b><a href="#remote-data-registration">#remote-data-registration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remote-data-registration">10.2.1. Summary</a> <a href="#ref-for-remote-data-registration①">(2)</a> <a href="#ref-for-remote-data-registration②">(3)</a> <a href="#ref-for-remote-data-registration③">(4)</a>
    <li><a href="#ref-for-remote-data-registration④">10.2.3. Remote Data Registry</a> <a href="#ref-for-remote-data-registration⑤">(2)</a>
    <li><a href="#ref-for-remote-data-registration⑥">10.2.4. Remote Data Registration</a> <a href="#ref-for-remote-data-registration⑦">(2)</a> <a href="#ref-for-remote-data-registration⑧">(3)</a> <a href="#ref-for-remote-data-registration⑨">(4)</a> <a href="#ref-for-remote-data-registration①⓪">(5)</a> <a href="#ref-for-remote-data-registration①①">(6)</a> <a href="#ref-for-remote-data-registration①②">(7)</a> <a href="#ref-for-remote-data-registration①③">(8)</a>
    <li><a href="#ref-for-remote-data-registration①④">10.3. Resource Hierarchy</a>
    <li><a href="#ref-for-remote-data-registration①⑤">10.4.2.2. Outputs</a>
    <li><a href="#ref-for-remote-data-registration①⑥">10.4.2.3. Operation Details</a>
    <li><a href="#ref-for-remote-data-registration①⑦">10.4.3.1. Inputs</a>
    <li><a href="#ref-for-remote-data-registration①⑧">10.4.4.1. Inputs</a>
    <li><a href="#ref-for-remote-data-registration①⑨">10.4.4.2. Outputs</a>
    <li><a href="#ref-for-remote-data-registration②⓪">10.4.5.2. Outputs</a>
    <li><a href="#ref-for-remote-data-registration②①">10.4.5.3. Operation Details</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="remote-data-instance">
   <b><a href="#remote-data-instance">#remote-data-instance</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remote-data-instance">10.2.1. Summary</a> <a href="#ref-for-remote-data-instance①">(2)</a>
    <li><a href="#ref-for-remote-data-instance②">10.2.4. Remote Data Registration</a> <a href="#ref-for-remote-data-instance③">(2)</a> <a href="#ref-for-remote-data-instance④">(3)</a>
    <li><a href="#ref-for-remote-data-instance⑤">10.2.5. Remote Data Instance</a> <a href="#ref-for-remote-data-instance⑥">(2)</a> <a href="#ref-for-remote-data-instance⑦">(3)</a> <a href="#ref-for-remote-data-instance⑧">(4)</a> <a href="#ref-for-remote-data-instance⑨">(5)</a> <a href="#ref-for-remote-data-instance①⓪">(6)</a> <a href="#ref-for-remote-data-instance①①">(7)</a>
    <li><a href="#ref-for-remote-data-instance①②">10.3. Resource Hierarchy</a>
    <li><a href="#ref-for-remote-data-instance①③">10.4.2.3. Operation Details</a>
    <li><a href="#ref-for-remote-data-instance①④">10.4.3.2. Outputs</a>
    <li><a href="#ref-for-remote-data-instance①⑤">10.4.3.3. Operation Details</a>
    <li><a href="#ref-for-remote-data-instance①⑥">10.4.4.3. Operation Details</a> <a href="#ref-for-remote-data-instance①⑦">(2)</a> <a href="#ref-for-remote-data-instance①⑧">(3)</a> <a href="#ref-for-remote-data-instance①⑨">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="solid">
   <b><a href="#solid">#solid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-solid">12. Definitions</a> <a href="#ref-for-solid①">(2)</a> <a href="#ref-for-solid②">(3)</a> <a href="#ref-for-solid③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="pod">
   <b><a href="#pod">#pod</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-pod">5.1. Overview</a>
    <li><a href="#ref-for-pod①">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-pod②">(2)</a>
    <li><a href="#ref-for-pod③">8.2.3. Access Grant Registry</a>
    <li><a href="#ref-for-pod④">8.3. Resource Hierarchy</a>
    <li><a href="#ref-for-pod⑤">9.2.3. Access Receipt Registry</a>
    <li><a href="#ref-for-pod⑥">9.3. Resource Hierarchy</a>
    <li><a href="#ref-for-pod⑦">10.2.3. Remote Data Registry</a>
    <li><a href="#ref-for-pod⑧">10.3. Resource Hierarchy</a>
    <li><a href="#ref-for-pod⑨">12. Definitions</a> <a href="#ref-for-pod①⓪">(2)</a> <a href="#ref-for-pod①①">(3)</a> <a href="#ref-for-pod①②">(4)</a> <a href="#ref-for-pod①③">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="ecosystem">
   <b><a href="#ecosystem">#ecosystem</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ecosystem">2.1. Overview</a>
    <li><a href="#ref-for-ecosystem①">4.1. Overview</a>
    <li><a href="#ref-for-ecosystem②">4.3.2. Use of internal application space</a>
    <li><a href="#ref-for-ecosystem③">5.1. Overview</a>
    <li><a href="#ref-for-ecosystem④">5.4. Permission Model</a>
    <li><a href="#ref-for-ecosystem⑤">6.1. Overview</a>
    <li><a href="#ref-for-ecosystem⑥">7.1. Overview</a> <a href="#ref-for-ecosystem⑦">(2)</a>
    <li><a href="#ref-for-ecosystem⑧">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="server-side-application">
   <b><a href="#server-side-application">#server-side-application</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-server-side-application">12. Definitions</a> <a href="#ref-for-server-side-application①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="user-piloted-application">
   <b><a href="#user-piloted-application">#user-piloted-application</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-user-piloted-application">11.1. Overview</a>
    <li><a href="#ref-for-user-piloted-application①">12. Definitions</a> <a href="#ref-for-user-piloted-application②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="authenticated-agent">
   <b><a href="#authenticated-agent">#authenticated-agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-authenticated-agent">4.6.1. Creating the application registration entry</a>
    <li><a href="#ref-for-authenticated-agent①">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-authenticated-agent②">11.1. Overview</a>
    <li><a href="#ref-for-authenticated-agent③">12. Definitions</a> <a href="#ref-for-authenticated-agent④">(2)</a> <a href="#ref-for-authenticated-agent⑤">(3)</a> <a href="#ref-for-authenticated-agent⑥">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identity">
   <b><a href="#identity">#identity</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identity">2.1. Overview</a> <a href="#ref-for-identity①">(2)</a>
    <li><a href="#ref-for-identity②">2.2.2. Agent</a>
    <li><a href="#ref-for-identity③">3.1. Overview</a> <a href="#ref-for-identity④">(2)</a>
    <li><a href="#ref-for-identity⑤">4.6.1. Creating the application registration entry</a>
    <li><a href="#ref-for-identity⑥">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-identity⑦">6.2.1. Application Requests Access</a> <a href="#ref-for-identity⑧">(2)</a>
    <li><a href="#ref-for-identity⑨">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-identity①⓪">(2)</a> <a href="#ref-for-identity①①">(3)</a> <a href="#ref-for-identity①②">(4)</a>
    <li><a href="#ref-for-identity①③">6.2.3. Controller Shares Access</a> <a href="#ref-for-identity①④">(2)</a>
    <li><a href="#ref-for-identity①⑤">6.2.4. Controller Shares Access with Invited Agent</a> <a href="#ref-for-identity①⑥">(2)</a> <a href="#ref-for-identity①⑦">(3)</a>
    <li><a href="#ref-for-identity①⑧">8.2.7. Access Invitation</a>
    <li><a href="#ref-for-identity①⑨">12. Definitions</a> <a href="#ref-for-identity②⓪">(2)</a> <a href="#ref-for-identity②①">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identity-profile-document">
   <b><a href="#identity-profile-document">#identity-profile-document</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identity-profile-document">2.4. Permission Model</a>
    <li><a href="#ref-for-identity-profile-document①">3.4. Permission Model</a>
    <li><a href="#ref-for-identity-profile-document②">6.2.1. Application Requests Access</a>
    <li><a href="#ref-for-identity-profile-document③">6.2.2. Another Agent Requests Access</a> <a href="#ref-for-identity-profile-document④">(2)</a> <a href="#ref-for-identity-profile-document⑤">(3)</a> <a href="#ref-for-identity-profile-document⑥">(4)</a> <a href="#ref-for-identity-profile-document⑦">(5)</a>
    <li><a href="#ref-for-identity-profile-document⑧">6.2.3. Controller Shares Access</a> <a href="#ref-for-identity-profile-document⑨">(2)</a>
    <li><a href="#ref-for-identity-profile-document①⓪">6.2.4. Controller Shares Access with Invited Agent</a>
    <li><a href="#ref-for-identity-profile-document①①">12. Definitions</a> <a href="#ref-for-identity-profile-document①②">(2)</a> <a href="#ref-for-identity-profile-document①③">(3)</a> <a href="#ref-for-identity-profile-document①④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="webid">
   <b><a href="#webid">#webid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-webid">4.6.1. Creating the application registration entry</a>
    <li><a href="#ref-for-webid①">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-webid②">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="did">
   <b><a href="#did">#did</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-did">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identity-provider">
   <b><a href="#identity-provider">#identity-provider</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identity-provider">4.6. Registering an Application</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="applicationid">
   <b><a href="#applicationid">#applicationid</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-applicationid">4.2. Data Model</a>
    <li><a href="#ref-for-applicationid①">4.3.1. Naming application registration resources</a>
    <li><a href="#ref-for-applicationid②">4.5. Looking up an Application Registration</a>
    <li><a href="#ref-for-applicationid③">4.6. Registering an Application</a> <a href="#ref-for-applicationid④">(2)</a>
    <li><a href="#ref-for-applicationid⑤">4.6.1. Creating the application registration entry</a> <a href="#ref-for-applicationid⑥">(2)</a>
    <li><a href="#ref-for-applicationid⑦">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-applicationid⑧">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-profile-document">
   <b><a href="#application-profile-document">#application-profile-document</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-profile-document">4.6. Registering an Application</a> <a href="#ref-for-application-profile-document①">(2)</a>
    <li><a href="#ref-for-application-profile-document②">6.2.1. Application Requests Access</a>
    <li><a href="#ref-for-application-profile-document③">6.2.2. Another Agent Requests Access</a>
    <li><a href="#ref-for-application-profile-document④">6.2.3. Controller Shares Access</a>
    <li><a href="#ref-for-application-profile-document⑤">6.2.4. Controller Shares Access with Invited Agent</a>
    <li><a href="#ref-for-application-profile-document⑥">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="acl-resource">
   <b><a href="#acl-resource">#acl-resource</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-acl-resource">5.4.1. Access Scopes for Data Registrations</a>
    <li><a href="#ref-for-acl-resource①">8.4. Operations</a>
    <li><a href="#ref-for-acl-resource②">8.4.9.3. Operation Details</a> <a href="#ref-for-acl-resource③">(2)</a> <a href="#ref-for-acl-resource④">(3)</a> <a href="#ref-for-acl-resource⑤">(4)</a>
    <li><a href="#ref-for-acl-resource⑥">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="access-mode">
   <b><a href="#access-mode">#access-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-access-mode">5.4.1.1. Permissions for All Registered Data Instances</a> <a href="#ref-for-access-mode①">(2)</a>
    <li><a href="#ref-for-access-mode②">5.4.1.2. Permissions for a Specific Registered Data Instance</a> <a href="#ref-for-access-mode③">(2)</a>
    <li><a href="#ref-for-access-mode④">7.2.3. Access Need</a>
    <li><a href="#ref-for-access-mode⑤">8.4.9.3. Operation Details</a> <a href="#ref-for-access-mode⑥">(2)</a> <a href="#ref-for-access-mode⑦">(3)</a> <a href="#ref-for-access-mode⑧">(4)</a> <a href="#ref-for-access-mode⑨">(5)</a> <a href="#ref-for-access-mode①⓪">(6)</a> <a href="#ref-for-access-mode①①">(7)</a> <a href="#ref-for-access-mode①②">(8)</a> <a href="#ref-for-access-mode①③">(9)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="authorization-subject">
   <b><a href="#authorization-subject">#authorization-subject</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-authorization-subject">5.4.1.1. Permissions for All Registered Data Instances</a> <a href="#ref-for-authorization-subject①">(2)</a> <a href="#ref-for-authorization-subject②">(3)</a>
    <li><a href="#ref-for-authorization-subject③">5.4.1.2. Permissions for a Specific Registered Data Instance</a> <a href="#ref-for-authorization-subject④">(2)</a> <a href="#ref-for-authorization-subject⑤">(3)</a>
    <li><a href="#ref-for-authorization-subject⑥">8.4.9.1. Inputs</a>
    <li><a href="#ref-for-authorization-subject⑦">8.4.9.3. Operation Details</a> <a href="#ref-for-authorization-subject⑧">(2)</a> <a href="#ref-for-authorization-subject⑨">(3)</a> <a href="#ref-for-authorization-subject①⓪">(4)</a> <a href="#ref-for-authorization-subject①①">(5)</a> <a href="#ref-for-authorization-subject①②">(6)</a> <a href="#ref-for-authorization-subject①③">(7)</a> <a href="#ref-for-authorization-subject①④">(8)</a> <a href="#ref-for-authorization-subject①⑤">(9)</a> <a href="#ref-for-authorization-subject①⑥">(10)</a> <a href="#ref-for-authorization-subject①⑦">(11)</a>
    <li><a href="#ref-for-authorization-subject①⑧">12. Definitions</a> <a href="#ref-for-authorization-subject①⑨">(2)</a> <a href="#ref-for-authorization-subject②⓪">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="authorization-statement">
   <b><a href="#authorization-statement">#authorization-statement</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-authorization-statement">8.4.9.3. Operation Details</a> <a href="#ref-for-authorization-statement①">(2)</a> <a href="#ref-for-authorization-statement②">(3)</a> <a href="#ref-for-authorization-statement③">(4)</a> <a href="#ref-for-authorization-statement④">(5)</a> <a href="#ref-for-authorization-statement⑤">(6)</a> <a href="#ref-for-authorization-statement⑥">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="trusted-agent">
   <b><a href="#trusted-agent">#trusted-agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-trusted-agent">2.4. Permission Model</a>
    <li><a href="#ref-for-trusted-agent①">4.5. Looking up an Application Registration</a> <a href="#ref-for-trusted-agent②">(2)</a>
    <li><a href="#ref-for-trusted-agent③">4.6. Registering an Application</a> <a href="#ref-for-trusted-agent④">(2)</a>
    <li><a href="#ref-for-trusted-agent⑤">4.6.1. Creating the application registration entry</a>
    <li><a href="#ref-for-trusted-agent⑥">5.5.1. Enlisting the help of a trusted agent</a>
    <li><a href="#ref-for-trusted-agent⑦">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-trusted-agent⑧">11.1. Overview</a>
    <li><a href="#ref-for-trusted-agent⑨">12. Definitions</a> <a href="#ref-for-trusted-agent①⓪">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-registration-agent">
   <b><a href="#application-registration-agent">#application-registration-agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-registration-agent">4.6. Registering an Application</a> <a href="#ref-for-application-registration-agent①">(2)</a>
    <li><a href="#ref-for-application-registration-agent②">4.6.1. Creating the application registration entry</a> <a href="#ref-for-application-registration-agent③">(2)</a>
    <li><a href="#ref-for-application-registration-agent④">11.1. Overview</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="data-authorization-agent">
   <b><a href="#data-authorization-agent">#data-authorization-agent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-data-authorization-agent">5.5.1. Enlisting the help of a trusted agent</a> <a href="#ref-for-data-authorization-agent①">(2)</a> <a href="#ref-for-data-authorization-agent②">(3)</a>
    <li><a href="#ref-for-data-authorization-agent③">5.5.2. Creating the data registration entry</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="shape">
   <b><a href="#shape">#shape</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shape">1. Introduction</a>
    <li><a href="#ref-for-shape①">4.3.2. Use of internal application space</a> <a href="#ref-for-shape②">(2)</a> <a href="#ref-for-shape③">(3)</a> <a href="#ref-for-shape④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="shape-tree">
   <b><a href="#shape-tree">#shape-tree</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-shape-tree">1. Introduction</a>
    <li><a href="#ref-for-shape-tree①">4.3.2. Use of internal application space</a> <a href="#ref-for-shape-tree②">(2)</a> <a href="#ref-for-shape-tree③">(3)</a> <a href="#ref-for-shape-tree④">(4)</a>
    <li><a href="#ref-for-shape-tree⑤">5.2. Data Model</a> <a href="#ref-for-shape-tree⑥">(2)</a>
    <li><a href="#ref-for-shape-tree⑦">5.3.1. Structure of Data Registrations in a Data Registry</a>
    <li><a href="#ref-for-shape-tree⑧">5.3.2. Structure of Registered Data Instances in a Data Registration</a> <a href="#ref-for-shape-tree⑨">(2)</a> <a href="#ref-for-shape-tree①⓪">(3)</a> <a href="#ref-for-shape-tree①①">(4)</a> <a href="#ref-for-shape-tree①②">(5)</a>
    <li><a href="#ref-for-shape-tree①③">5.5.2. Creating the data registration entry</a> <a href="#ref-for-shape-tree①④">(2)</a>
    <li><a href="#ref-for-shape-tree①⑤">7.2.1. Summary</a> <a href="#ref-for-shape-tree①⑥">(2)</a>
    <li><a href="#ref-for-shape-tree①⑦">7.2.2. Access Need Group</a> <a href="#ref-for-shape-tree①⑧">(2)</a> <a href="#ref-for-shape-tree①⑨">(3)</a>
    <li><a href="#ref-for-shape-tree②⓪">7.2.3. Access Need</a> <a href="#ref-for-shape-tree②①">(2)</a> <a href="#ref-for-shape-tree②②">(3)</a> <a href="#ref-for-shape-tree②③">(4)</a> <a href="#ref-for-shape-tree②④">(5)</a>
    <li><a href="#ref-for-shape-tree②⑤">7.2.4. Compiled Access Group</a> <a href="#ref-for-shape-tree②⑥">(2)</a>
    <li><a href="#ref-for-shape-tree②⑦">7.2.5. Compiled Access</a> <a href="#ref-for-shape-tree②⑧">(2)</a> <a href="#ref-for-shape-tree②⑨">(3)</a> <a href="#ref-for-shape-tree③⓪">(4)</a> <a href="#ref-for-shape-tree③①">(5)</a> <a href="#ref-for-shape-tree③②">(6)</a> <a href="#ref-for-shape-tree③③">(7)</a> <a href="#ref-for-shape-tree③④">(8)</a>
    <li><a href="#ref-for-shape-tree③⑤">7.2.8.2. Access Need Decorator</a>
    <li><a href="#ref-for-shape-tree③⑥">7.3.1. Compile Access Need Group</a> <a href="#ref-for-shape-tree③⑦">(2)</a>
    <li><a href="#ref-for-shape-tree③⑧">7.3.2.1. Inputs</a>
    <li><a href="#ref-for-shape-tree③⑨">7.3.2.4.1. Inputs</a>
    <li><a href="#ref-for-shape-tree④⓪">7.3.2.4.3. Operation Details</a>
    <li><a href="#ref-for-shape-tree④①">7.3.2.5. _getSpecificAccessNeed</a>
    <li><a href="#ref-for-shape-tree④②">7.3.2.5.1. Inputs</a>
    <li><a href="#ref-for-shape-tree④③">7.3.3. Link Supported Compiled Accesses</a> <a href="#ref-for-shape-tree④④">(2)</a>
    <li><a href="#ref-for-shape-tree④⑤">7.3.3.3. Operation Details</a>
    <li><a href="#ref-for-shape-tree④⑥">7.3.3.4. Iterate for Supported Compiled Accesses</a>
    <li><a href="#ref-for-shape-tree④⑦">8.2.6. Data Grant</a>
    <li><a href="#ref-for-shape-tree④⑧">8.4.10.2. Operation Details</a> <a href="#ref-for-shape-tree④⑨">(2)</a>
    <li><a href="#ref-for-shape-tree⑤⓪">9.2.5. Data Receipt</a>
    <li><a href="#ref-for-shape-tree⑤①">9.4.4.2. Operation Details</a>
    <li><a href="#ref-for-shape-tree⑤②">12. Definitions</a> <a href="#ref-for-shape-tree⑤③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-registry-set">
   <b><a href="#application-registry-set">#application-registry-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-registry-set">2.2.2. Agent</a>
    <li><a href="#ref-for-application-registry-set①">4.2. Data Model</a> <a href="#ref-for-application-registry-set②">(2)</a>
    <li><a href="#ref-for-application-registry-set③">4.5. Looking up an Application Registration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-registry">
   <b><a href="#application-registry">#application-registry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-registry">4.1. Overview</a>
    <li><a href="#ref-for-application-registry①">4.2. Data Model</a> <a href="#ref-for-application-registry②">(2)</a>
    <li><a href="#ref-for-application-registry③">4.3. Structure and Validation</a> <a href="#ref-for-application-registry④">(2)</a> <a href="#ref-for-application-registry⑤">(3)</a> <a href="#ref-for-application-registry⑥">(4)</a> <a href="#ref-for-application-registry⑦">(5)</a>
    <li><a href="#ref-for-application-registry⑧">4.4. Permission Model</a> <a href="#ref-for-application-registry⑨">(2)</a> <a href="#ref-for-application-registry①⓪">(3)</a>
    <li><a href="#ref-for-application-registry①①">4.5. Looking up an Application Registration</a> <a href="#ref-for-application-registry①②">(2)</a> <a href="#ref-for-application-registry①③">(3)</a> <a href="#ref-for-application-registry①④">(4)</a>
    <li><a href="#ref-for-application-registry①⑤">4.6. Registering an Application</a>
    <li><a href="#ref-for-application-registry①⑥">4.6.1. Creating the application registration entry</a> <a href="#ref-for-application-registry①⑦">(2)</a> <a href="#ref-for-application-registry①⑧">(3)</a>
    <li><a href="#ref-for-application-registry①⑨">6.2.1. Application Requests Access</a>
    <li><a href="#ref-for-application-registry②⓪">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="application-registration">
   <b><a href="#application-registration">#application-registration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-application-registration">4.1. Overview</a>
    <li><a href="#ref-for-application-registration①">4.2. Data Model</a> <a href="#ref-for-application-registration②">(2)</a> <a href="#ref-for-application-registration③">(3)</a>
    <li><a href="#ref-for-application-registration④">4.3. Structure and Validation</a> <a href="#ref-for-application-registration⑤">(2)</a> <a href="#ref-for-application-registration⑥">(3)</a> <a href="#ref-for-application-registration⑦">(4)</a> <a href="#ref-for-application-registration⑧">(5)</a>
    <li><a href="#ref-for-application-registration⑨">4.3.1. Naming application registration resources</a> <a href="#ref-for-application-registration①⓪">(2)</a>
    <li><a href="#ref-for-application-registration①①">4.4. Permission Model</a> <a href="#ref-for-application-registration①②">(2)</a>
    <li><a href="#ref-for-application-registration①③">4.5. Looking up an Application Registration</a> <a href="#ref-for-application-registration①④">(2)</a> <a href="#ref-for-application-registration①⑤">(3)</a> <a href="#ref-for-application-registration①⑥">(4)</a> <a href="#ref-for-application-registration①⑦">(5)</a> <a href="#ref-for-application-registration①⑧">(6)</a> <a href="#ref-for-application-registration①⑨">(7)</a> <a href="#ref-for-application-registration②⓪">(8)</a> <a href="#ref-for-application-registration②①">(9)</a>
    <li><a href="#ref-for-application-registration②②">4.6. Registering an Application</a>
    <li><a href="#ref-for-application-registration②③">4.6.1. Creating the application registration entry</a> <a href="#ref-for-application-registration②④">(2)</a> <a href="#ref-for-application-registration②⑤">(3)</a> <a href="#ref-for-application-registration②⑥">(4)</a> <a href="#ref-for-application-registration②⑦">(5)</a> <a href="#ref-for-application-registration②⑧">(6)</a> <a href="#ref-for-application-registration②⑨">(7)</a> <a href="#ref-for-application-registration③⓪">(8)</a> <a href="#ref-for-application-registration③①">(9)</a>
    <li><a href="#ref-for-application-registration③②">6.2.1. Application Requests Access</a>
    <li><a href="#ref-for-application-registration③③">9.4.1.4.2. Outputs</a>
    <li><a href="#ref-for-application-registration③④">12. Definitions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="data-registry-set">
   <b><a href="#data-registry-set">#data-registry-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-data-registry-set">2.2.2. Agent</a>
    <li><a href="#ref-for-data-registry-set①">5.2. Data Model</a> <a href="#ref-for-data-registry-set②">(2)</a> <a href="#ref-for-data-registry-set③">(3)</a> <a href="#ref-for-data-registry-set④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="data-registry">
   <b><a href="#data-registry">#data-registry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-data-registry">5.1. Overview</a> <a href="#ref-for-data-registry①">(2)</a> <a href="#ref-for-data-registry②">(3)</a>
    <li><a href="#ref-for-data-registry③">5.2. Data Model</a> <a href="#ref-for-data-registry④">(2)</a> <a href="#ref-for-data-registry⑤">(3)</a> <a href="#ref-for-data-registry⑥">(4)</a>
    <li><a href="#ref-for-data-registry⑦">5.3. Structure and Validation</a> <a href="#ref-for-data-registry⑧">(2)</a>
    <li><a href="#ref-for-data-registry⑨">5.3.1. Structure of Data Registrations in a Data Registry</a> <a href="#ref-for-data-registry①⓪">(2)</a> <a href="#ref-for-data-registry①①">(3)</a> <a href="#ref-for-data-registry①②">(4)</a> <a href="#ref-for-data-registry①③">(5)</a> <a href="#ref-for-data-registry①④">(6)</a>
    <li><a href="#ref-for-data-registry①⑤">5.4. Permission Model</a> <a href="#ref-for-data-registry①⑥">(2)</a> <a href="#ref-for-data-registry①⑦">(3)</a>
    <li><a href="#ref-for-data-registry①⑧">5.4.1. Access Scopes for Data Registrations</a>
    <li><a href="#ref-for-data-registry①⑨">5.5. Registering Data</a>
    <li><a href="#ref-for-data-registry②⓪">5.5.1. Enlisting the help of a trusted agent</a>
    <li><a href="#ref-for-data-registry②①">5.5.2. Creating the data registration entry</a> <a href="#ref-for-data-registry②②">(2)</a> <a href="#ref-for-data-registry②③">(3)</a>
    <li><a href="#ref-for-data-registry②④">8.2.4. Access Grant</a>
    <li><a href="#ref-for-data-registry②⑤">12. Definitions</a> <a href="#ref-for-data-registry②⑥">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="data-registration">
   <b><a href="#data-registration">#data-registration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-data-registration">5.1. Overview</a>
    <li><a href="#ref-for-data-registration①">5.2. Data Model</a> <a href="#ref-for-data-registration②">(2)</a> <a href="#ref-for-data-registration③">(3)</a> <a href="#ref-for-data-registration④">(4)</a> <a href="#ref-for-data-registration⑤">(5)</a>
    <li><a href="#ref-for-data-registration⑥">5.3. Structure and Validation</a> <a href="#ref-for-data-registration⑦">(2)</a>
    <li><a href="#ref-for-data-registration⑧">5.3.1. Structure of Data Registrations in a Data Registry</a> <a href="#ref-for-data-registration⑨">(2)</a> <a href="#ref-for-data-registration①⓪">(3)</a> <a href="#ref-for-data-registration①①">(4)</a>
    <li><a href="#ref-for-data-registration①②">5.3.2. Structure of Registered Data Instances in a Data Registration</a> <a href="#ref-for-data-registration①③">(2)</a> <a href="#ref-for-data-registration①④">(3)</a> <a href="#ref-for-data-registration①⑤">(4)</a> <a href="#ref-for-data-registration①⑥">(5)</a> <a href="#ref-for-data-registration①⑦">(6)</a> <a href="#ref-for-data-registration①⑧">(7)</a> <a href="#ref-for-data-registration①⑨">(8)</a> <a href="#ref-for-data-registration②⓪">(9)</a> <a href="#ref-for-data-registration②①">(10)</a>
    <li><a href="#ref-for-data-registration②②">5.3.3. Naming Registrations and Registered Data Instances</a> <a href="#ref-for-data-registration②③">(2)</a>
    <li><a href="#ref-for-data-registration②④">5.4. Permission Model</a> <a href="#ref-for-data-registration②⑤">(2)</a>
    <li><a href="#ref-for-data-registration②⑥">5.4.1. Access Scopes for Data Registrations</a> <a href="#ref-for-data-registration②⑦">(2)</a> <a href="#ref-for-data-registration②⑧">(3)</a> <a href="#ref-for-data-registration②⑨">(4)</a>
    <li><a href="#ref-for-data-registration③⓪">5.4.1.1. Permissions for All Registered Data Instances</a> <a href="#ref-for-data-registration③①">(2)</a> <a href="#ref-for-data-registration③②">(3)</a> <a href="#ref-for-data-registration③③">(4)</a> <a href="#ref-for-data-registration③④">(5)</a> <a href="#ref-for-data-registration③⑤">(6)</a>
    <li><a href="#ref-for-data-registration③⑥">5.5. Registering Data</a> <a href="#ref-for-data-registration③⑦">(2)</a>
    <li><a href="#ref-for-data-registration③⑧">5.5.1. Enlisting the help of a trusted agent</a> <a href="#ref-for-data-registration③⑨">(2)</a>
    <li><a href="#ref-for-data-registration④⓪">5.5.2. Creating the data registration entry</a> <a href="#ref-for-data-registration④①">(2)</a> <a href="#ref-for-data-registration④②">(3)</a> <a href="#ref-for-data-registration④③">(4)</a> <a href="#ref-for-data-registration④④">(5)</a> <a href="#ref-for-data-registration④⑤">(6)</a> <a href="#ref-for-data-registration④⑥">(7)</a> <a href="#ref-for-data-registration④⑦">(8)</a> <a href="#ref-for-data-registration④⑧">(9)</a> <a href="#ref-for-data-registration④⑨">(10)</a> <a href="#ref-for-data-registration⑤⓪">(11)</a> <a href="#ref-for-data-registration⑤①">(12)</a>
    <li><a href="#ref-for-data-registration⑤②">5.5.3. Creating registered data instances</a>
    <li><a href="#ref-for-data-registration⑤③">7.2.3. Access Need</a>
    <li><a href="#ref-for-data-registration⑤④">8.2.6. Data Grant</a> <a href="#ref-for-data-registration⑤⑤">(2)</a> <a href="#ref-for-data-registration⑤⑥">(3)</a> <a href="#ref-for-data-registration⑤⑦">(4)</a>
    <li><a href="#ref-for-data-registration⑤⑧">8.4.1.3. Operation Details</a>
    <li><a href="#ref-for-data-registration⑤⑨">8.4.9.3. Operation Details</a>
    <li><a href="#ref-for-data-registration⑥⓪">9.2.4. Access Receipt</a>
    <li><a href="#ref-for-data-registration⑥①">9.2.5. Data Receipt</a> <a href="#ref-for-data-registration⑥②">(2)</a> <a href="#ref-for-data-registration⑥③">(3)</a>
    <li><a href="#ref-for-data-registration⑥④">10.2.4. Remote Data Registration</a> <a href="#ref-for-data-registration⑥⑤">(2)</a> <a href="#ref-for-data-registration⑥⑥">(3)</a> <a href="#ref-for-data-registration⑥⑦">(4)</a> <a href="#ref-for-data-registration⑥⑧">(5)</a> <a href="#ref-for-data-registration⑥⑨">(6)</a> <a href="#ref-for-data-registration⑦⓪">(7)</a> <a href="#ref-for-data-registration⑦①">(8)</a>
    <li><a href="#ref-for-data-registration⑦②">10.4.5.1. Inputs</a>
    <li><a href="#ref-for-data-registration⑦③">12. Definitions</a> <a href="#ref-for-data-registration⑦④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="registered-data-instance">
   <b><a href="#registered-data-instance">#registered-data-instance</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-registered-data-instance">5.2. Data Model</a> <a href="#ref-for-registered-data-instance①">(2)</a> <a href="#ref-for-registered-data-instance②">(3)</a>
    <li><a href="#ref-for-registered-data-instance③">5.3. Structure and Validation</a>
    <li><a href="#ref-for-registered-data-instance④">5.3.2. Structure of Registered Data Instances in a Data Registration</a> <a href="#ref-for-registered-data-instance⑤">(2)</a>
    <li><a href="#ref-for-registered-data-instance⑥">5.3.3. Naming Registrations and Registered Data Instances</a>
    <li><a href="#ref-for-registered-data-instance⑦">5.4. Permission Model</a> <a href="#ref-for-registered-data-instance⑧">(2)</a>
    <li><a href="#ref-for-registered-data-instance⑨">5.4.1. Access Scopes for Data Registrations</a> <a href="#ref-for-registered-data-instance①⓪">(2)</a> <a href="#ref-for-registered-data-instance①①">(3)</a>
    <li><a href="#ref-for-registered-data-instance①②">5.4.1.1. Permissions for All Registered Data Instances</a> <a href="#ref-for-registered-data-instance①③">(2)</a> <a href="#ref-for-registered-data-instance①④">(3)</a> <a href="#ref-for-registered-data-instance①⑤">(4)</a> <a href="#ref-for-registered-data-instance①⑥">(5)</a> <a href="#ref-for-registered-data-instance①⑦">(6)</a> <a href="#ref-for-registered-data-instance①⑧">(7)</a> <a href="#ref-for-registered-data-instance①⑨">(8)</a>
    <li><a href="#ref-for-registered-data-instance②⓪">5.4.1.2. Permissions for a Specific Registered Data Instance</a> <a href="#ref-for-registered-data-instance②①">(2)</a> <a href="#ref-for-registered-data-instance②②">(3)</a> <a href="#ref-for-registered-data-instance②③">(4)</a> <a href="#ref-for-registered-data-instance②④">(5)</a> <a href="#ref-for-registered-data-instance②⑤">(6)</a> <a href="#ref-for-registered-data-instance②⑥">(7)</a> <a href="#ref-for-registered-data-instance②⑦">(8)</a>
    <li><a href="#ref-for-registered-data-instance②⑧">5.5. Registering Data</a> <a href="#ref-for-registered-data-instance②⑨">(2)</a>
    <li><a href="#ref-for-registered-data-instance③⓪">5.5.2. Creating the data registration entry</a>
    <li><a href="#ref-for-registered-data-instance③①">5.5.3. Creating registered data instances</a> <a href="#ref-for-registered-data-instance③②">(2)</a>
    <li><a href="#ref-for-registered-data-instance③③">7.2.3. Access Need</a> <a href="#ref-for-registered-data-instance③④">(2)</a> <a href="#ref-for-registered-data-instance③⑤">(3)</a>
    <li><a href="#ref-for-registered-data-instance③⑥">7.2.5. Compiled Access</a>
    <li><a href="#ref-for-registered-data-instance③⑦">8.2.6. Data Grant</a> <a href="#ref-for-registered-data-instance③⑧">(2)</a> <a href="#ref-for-registered-data-instance③⑨">(3)</a> <a href="#ref-for-registered-data-instance④⓪">(4)</a> <a href="#ref-for-registered-data-instance④①">(5)</a>
    <li><a href="#ref-for-registered-data-instance④②">8.4.9.3. Operation Details</a> <a href="#ref-for-registered-data-instance④③">(2)</a> <a href="#ref-for-registered-data-instance④④">(3)</a> <a href="#ref-for-registered-data-instance④⑤">(4)</a>
    <li><a href="#ref-for-registered-data-instance④⑥">8.4.10.2. Operation Details</a> <a href="#ref-for-registered-data-instance④⑦">(2)</a> <a href="#ref-for-registered-data-instance④⑧">(3)</a> <a href="#ref-for-registered-data-instance④⑨">(4)</a> <a href="#ref-for-registered-data-instance⑤⓪">(5)</a> <a href="#ref-for-registered-data-instance⑤①">(6)</a> <a href="#ref-for-registered-data-instance⑤②">(7)</a> <a href="#ref-for-registered-data-instance⑤③">(8)</a> <a href="#ref-for-registered-data-instance⑤④">(9)</a>
    <li><a href="#ref-for-registered-data-instance⑤⑤">8.4.12. Select Specific Instances for Access</a> <a href="#ref-for-registered-data-instance⑤⑥">(2)</a>
    <li><a href="#ref-for-registered-data-instance⑤⑦">8.4.13. Select All Instances for Access</a>
    <li><a href="#ref-for-registered-data-instance⑤⑧">9.2.4. Access Receipt</a>
    <li><a href="#ref-for-registered-data-instance⑤⑨">9.2.5. Data Receipt</a> <a href="#ref-for-registered-data-instance⑥⓪">(2)</a> <a href="#ref-for-registered-data-instance⑥①">(3)</a> <a href="#ref-for-registered-data-instance⑥②">(4)</a> <a href="#ref-for-registered-data-instance⑥③">(5)</a>
    <li><a href="#ref-for-registered-data-instance⑥④">9.4.4.2. Operation Details</a> <a href="#ref-for-registered-data-instance⑥⑤">(2)</a> <a href="#ref-for-registered-data-instance⑥⑥">(3)</a>
    <li><a href="#ref-for-registered-data-instance⑥⑦">10.2.4. Remote Data Registration</a> <a href="#ref-for-registered-data-instance⑥⑧">(2)</a> <a href="#ref-for-registered-data-instance⑥⑨">(3)</a>
    <li><a href="#ref-for-registered-data-instance⑦⓪">10.2.5. Remote Data Instance</a> <a href="#ref-for-registered-data-instance⑦①">(2)</a> <a href="#ref-for-registered-data-instance⑦②">(3)</a> <a href="#ref-for-registered-data-instance⑦③">(4)</a> <a href="#ref-for-registered-data-instance⑦④">(5)</a> <a href="#ref-for-registered-data-instance⑦⑤">(6)</a>
    <li><a href="#ref-for-registered-data-instance⑦⑥">10.4.2.3. Operation Details</a>
    <li><a href="#ref-for-registered-data-instance⑦⑦">10.4.3.1. Inputs</a>
    <li><a href="#ref-for-registered-data-instance⑦⑧">10.4.4.3. Operation Details</a>
    <li><a href="#ref-for-registered-data-instance⑦⑨">12. Definitions</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>